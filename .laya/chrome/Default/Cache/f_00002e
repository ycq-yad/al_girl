(function () {
    'use strict';

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
    /* global Reflect, Promise */

    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };

    function __extends(d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }

    function __awaiter(thisArg, _arguments, P, generator) {
        return new (P || (P = Promise))(function (resolve, reject) {
            function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
            function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
            function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
            step((generator = generator.apply(thisArg, _arguments || [])).next());
        });
    }

    function __generator(thisArg, body) {
        var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
        return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
        function verb(n) { return function (v) { return step([n, v]); }; }
        function step(op) {
            if (f) throw new TypeError("Generator is already executing.");
            while (_) try {
                if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
                if (y = 0, t) op = [op[0] & 2, t.value];
                switch (op[0]) {
                    case 0: case 1: t = op; break;
                    case 4: _.label++; return { value: op[1], done: false };
                    case 5: _.label++; y = op[1]; op = [0]; continue;
                    case 7: op = _.ops.pop(); _.trys.pop(); continue;
                    default:
                        if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                        if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                        if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                        if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                        if (t[2]) _.ops.pop();
                        _.trys.pop(); continue;
                }
                op = body.call(thisArg, _);
            } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
            if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
        }
    }

    var CustemButton = (function (_super) {
        __extends(CustemButton, _super);
        function CustemButton() {
            return _super.call(this) || this;
        }
        return CustemButton;
    }(CustomScaleComponent));

    var GameConfig = (function () {
        function GameConfig() {
        }
        GameConfig.init = function () {
            var reg = Laya.ClassUtils.regClass;
            reg("script/tool/CustemButton.ts", CustemButton);
        };
        GameConfig.width = 640;
        GameConfig.height = 1136;
        GameConfig.scaleMode = "fixedwidth";
        GameConfig.screenMode = "none";
        GameConfig.alignV = "top";
        GameConfig.alignH = "left";
        GameConfig.startScene = "game/GameHomeView.scene";
        GameConfig.sceneRoot = "";
        GameConfig.debug = false;
        GameConfig.stat = false;
        GameConfig.physicsDebug = false;
        GameConfig.exportSceneToJson = true;
        return GameConfig;
    }());
    GameConfig.init();

    var localData;
    (function (localData) {
        var InviteData = (function () {
            function InviteData() {
            }
            return InviteData;
        }());
        localData.InviteData = InviteData;
    })(localData || (localData = {}));
    var netData;
    (function (netData) {
        var UserInfos = (function () {
            function UserInfos() {
                this.openId = "";
                this.nick = "";
                this.avatarUrl = "";
                this.sex = 0;
                this.sessionKey = "";
                this.accessToken = "";
            }
            return UserInfos;
        }());
        netData.UserInfos = UserInfos;
        var PlayerData = (function () {
            function PlayerData() {
                this.lastTime = null;
                this.gold = 2000;
                this.snacks = 0;
                this.lottery = { fish: 0, fishVideo: 1 };
                this.curMaxCompLv = 1;
            }
            return PlayerData;
        }());
        netData.PlayerData = PlayerData;
        var Invite = (function () {
            function Invite() {
                this.inviteId = [];
            }
            return Invite;
        }());
        netData.Invite = Invite;
        var Inviter = (function () {
            function Inviter() {
            }
            return Inviter;
        }());
        netData.Inviter = Inviter;
    })(netData || (netData = {}));

    var GameData = (function () {
        function GameData() {
            this.gameId = "1043";
            this.userInfo = new netData.UserInfos();
            this.isByCollection = false;
            this.isByShare = false;
            this.deadTime = 1500;
            this.codeVersion_ = "t.v.4.3.3";
            this.qqMiniGameResUrl = "https://package.32yx.com/ecy_game_small/laya/girl/qq_res/qq_res_v_z_2_3/";
            this.wxMiniGameResUrl = "https://package.32yx.com/ecy_game_small/laya/girl/wx_res/wx_res_v_z_3_5/";
            this.ttMiniGameResUrl = "https://package.32yx.com/ecy_game_small/laya/girl/tt/tt_res_v_z_2_4/";
            this.debug_ = (this.serverConf_ != "wzs");
            this.guanQiaArr = [30, 50, 20, 50, 50];
            this.tips = "你的网络已断开，请检查设置。";
            this.videoTips = "视频观看完整才能获得奖励哦";
            this.URL_DELETE_DATA = "https://littlegame.32yx.com/DelMiniGameData.fcgi";
            this.URL_DELETE_DATA_TEST = "https://172.17.3.217:8090/DelMiniGameData.fcgi";
            this.URL_SAVE_DATA = "https://littlegame.32yx.com/MiniGameData.fcgi";
            this.URL_SAVE_DATA_TEST = "http://172.17.3.217:8090/MiniGameData.fcgi";
            this.URL_OF_RANK = "https://littlegame.32yx.com/MiniGameRank.fcgi";
            this.URL_OF_RANK_TEST = "http://172.17.3.217:8090/MiniGameRank.fcgi";
            this.URL_OF_INVITE = "https://littlegame.32yx.com/Invitation.fcgi";
            this.URL_OF_INVITE_TEST = "http://172.17.3.217:8090/Invitation.fcgi";
            this.URL_TIMESTAMP = "https://littlegame.32yx.com/gettime.php";
            this.URL_WX_REQ = "https://yxtest.32yx.com/MiniGame.fcgi";
            this.URL_WX_REQ_TEST = "http://172.17.3.217:8090/MiniGame.fcgi";
            this.bannerId = new Array();
            this.videoId = Array();
            this.longVideoId = Array();
        }
        GameData.getInstance = function () {
            if (!GameData.instance) {
                GameData.instance = new GameData();
            }
            return GameData.instance;
        };
        Object.defineProperty(GameData.prototype, "serverConf", {
            set: function (sc) {
                this.serverConf_ = sc;
                this.initServer();
            },
            enumerable: true,
            configurable: true
        });
        GameData.prototype.initServer = function () {
            switch (GameData.instance.serverConf_) {
                case "nts":
                    this.URL_SAVE_DATA = this.URL_SAVE_DATA_TEST;
                    this.URL_OF_RANK = this.URL_OF_RANK_TEST;
                    this.URL_OF_INVITE = this.URL_OF_INVITE_TEST;
                    this.URL_DELETE_DATA = this.URL_DELETE_DATA_TEST;
                    break;
                case "wts":
                    break;
                case "wzs":
                    break;
            }
        };
        Object.defineProperty(GameData.prototype, "codeVersion", {
            get: function () {
                return this.codeVersion_ + " " + this.serverConf_;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(GameData.prototype, "debug", {
            get: function () {
                return (this.serverConf_ != "wzs");
            },
            enumerable: true,
            configurable: true
        });
        GameData.prototype.initConfig = function (res) {
            if (res) {
                this.bannerId = res.gameInfo.bannerId;
                this.videoId = res.gameInfo.videoId;
                this.longVideoId = res.gameInfo.longVideoId;
                this.boxId = res.gameInfo.boxId;
            }
            else {
                console.error("GameData.initConfig res error!");
            }
        };
        return GameData;
    }());

    var AnimationManager = (function () {
        function AnimationManager() {
        }
        Object.defineProperty(AnimationManager, "instance", {
            get: function () {
                if (AnimationManager.ins == null) {
                    AnimationManager.ins = new AnimationManager();
                }
                return AnimationManager.ins;
            },
            enumerable: true,
            configurable: true
        });
        AnimationManager.prototype.getAtlasAnimation = function (url, fex) {
            url = url + fex;
            return new Promise(function (resolve) {
                var roleAni = new Laya.Animation();
                roleAni.loadAtlas(url, Laya.Handler.create(null, function () {
                    resolve(roleAni);
                }));
            });
        };
        AnimationManager.prototype.scaleTween = function (target, caller, duration, complete, props, ease) {
            if (duration === void 0) { duration = 500; }
            target.visible = true;
            target.scale(0.8, 0.8);
            Laya.Tween.to(target, { scaleX: 1, scaleY: 1 }, duration, ease, Laya.Handler.create(caller, function () {
                complete && complete();
            }));
        };
        AnimationManager.prototype.scaleBTween = function (target, caller, duration, complete, props, ease) {
            if (duration === void 0) { duration = 500; }
            target.scale(1.1, 1.1);
            Laya.Tween.to(target, { scaleX: 1, scaleY: 1 }, duration, ease, Laya.Handler.create(caller, function () {
                complete && complete();
            }));
        };
        AnimationManager.prototype.upToDownTween = function (target, props, duration, caller, ease, complete) {
            Laya.Tween.to(target, props, duration, ease, Laya.Handler.create(caller, function () {
                complete && complete();
            }));
        };
        AnimationManager.prototype.showSkeletonAnimation = function (url, callBack, aniMode) {
            console.log(url);
            var boomAnimation = new Laya.Skeleton();
            boomAnimation.load(url, Laya.Handler.create(this, function () {
                if (boomAnimation.player == null)
                    return;
                boomAnimation.player.playbackRate = 1;
                callBack && callBack(boomAnimation);
            }), aniMode);
        };
        AnimationManager.prototype.show2dBoonAnimation = function (url, dbBox, index, loop, rate, x, y, rotation) {
            var _this = this;
            return new Promise(function (resolve) {
                var self = _this;
                dbBox.removeChildren();
                var boomAnimation = new Laya.Skeleton();
                boomAnimation.load(url, Laya.Handler.create(self, function () {
                    if (!boomAnimation.player) {
                        resolve();
                        return;
                    }
                    boomAnimation.player.playbackRate = rate;
                    boomAnimation.player.once(Laya.Event.STOPPED, self, function () {
                        resolve();
                    });
                    boomAnimation.scale(2, 2);
                    dbBox.addChild(boomAnimation);
                    boomAnimation.x = x;
                    boomAnimation.y = y;
                    boomAnimation.rotation = rotation;
                    boomAnimation.play(index, loop);
                }));
            });
        };
        AnimationManager.prototype.displayTwinkle = function (target, prefix, caller) {
            var index = 1;
            Laya.timer.loop(500, caller, function () {
                target.skin = prefix + index + ".png";
                index = index == 1 ? 2 : 1;
            });
        };
        AnimationManager.prototype.frameAni = function (target, prefix, caller, frameNum, time) {
            if (time === void 0) { time = 100; }
            var index = 1;
            Laya.timer.loop(time, caller, function () {
                target.skin = prefix + index + ".png";
                index++;
                if (index > frameNum)
                    index = 1;
            });
        };
        AnimationManager.prototype.zoomTween = function (target, caller) {
            var scaleDelta = 0;
            Laya.timer.loop(20, caller, function () {
                scaleDelta += 0.04;
                var scaleVaule = Math.sin(scaleDelta) * 0.1 + 1;
                target.scale(scaleVaule, scaleVaule);
            });
        };
        AnimationManager.prototype.zoomImgTween = function (target, caller) {
            var scaleDelta = 0;
            Laya.timer.loop(20, caller, function () {
                scaleDelta += 0.04;
                var scaleVaule = Math.sin(scaleDelta) * 0.02 + 1;
                target.rotation += Math.sin(scaleDelta) * 0.02;
                target.scale(scaleVaule, scaleVaule);
            });
        };
        AnimationManager.prototype.titleImgTween = function (target, caller) {
            var scaleDelta = 0;
            Laya.timer.loop(20, caller, function () {
                scaleDelta += 0.04;
                target.rotation += Math.sin(scaleDelta) * 0.2;
            });
        };
        AnimationManager.prototype.VTween = function (target, caller, ds) {
            if (ds === void 0) { ds = 1; }
            var xDelta = 0;
            Laya.timer.loop(20, caller, function () {
                xDelta += 0.04;
                var xVaule = Math.sin(xDelta) * ds;
                target.x += xVaule;
            });
        };
        AnimationManager.prototype.flaTween = function (target, caller) {
            var alp = 0;
            Laya.timer.loop(20, caller, function () {
                alp += 0.04;
                var alpVaule = Math.abs(Math.sin(alp) * 0.5) + 0.5;
                target.alpha = alpVaule;
            });
        };
        AnimationManager.prototype.swingHeadTween = function (target, caller) {
            var scaleDelta = 0;
            var posY = target.y;
            Laya.timer.loop(20, caller, function () {
                scaleDelta += 0.04;
                var scaleVaule = Math.sin(scaleDelta) * 6;
                target.y = scaleVaule + posY;
            });
        };
        AnimationManager.prototype.swingBodyTween = function (target, caller) {
            var scaleDelta = 0;
            Laya.timer.loop(20, caller, function () {
                scaleDelta += 0.04;
                var scaleVaule = Math.sin(scaleDelta) * 0.05 + 1;
                target.scale(scaleVaule, scaleVaule);
            });
        };
        AnimationManager.prototype.cardEnter = function (xs, target, caller, complete) {
            var x = xs;
            var wid = target.width;
            var w = 0.6;
            target.width = wid * w;
            Laya.timer.loop(20, caller, function onLoop() {
                w += 0.01;
                target.width = wid * w;
                target.x += 10;
                if (target.x >= x) {
                    target.width = wid;
                    Laya.timer.clear(caller, onLoop);
                    complete && complete();
                }
            });
        };
        AnimationManager.prototype.fallAni = function (target, caller, duration) {
            var disY = 1920 - target.y;
            var time = (duration / 20) + 1;
            var vX = Math.random() * 10 - 5;
            var vY = -Math.random() * 30;
            var aY = (disY - vY * time) * 2 / (time * time);
            var x = target.x;
            var y = target.y;
            var t = 0;
            var r = 360 / time;
            Laya.timer.loop(20, caller, function onLoop() {
                vY += aY;
                x += vX;
                y += vY;
                t += 20;
                target.pos(x, y);
                target.rotation += r;
                if (t > duration) {
                    Laya.timer.clear(caller, onLoop);
                    target.destroy();
                }
            });
        };
        AnimationManager.prototype.riseAni = function (target, caller, duration) {
            var vY = -Math.random() * 2;
            var t = 0;
            var scaleDelta = 0;
            Laya.timer.loop(20, caller, function onLoop() {
                target.y += vY;
                t += 20;
                scaleDelta += 0.04;
                var scaleVaule = Math.sin(scaleDelta) * 0.5 + 0.1;
                target.scale(scaleVaule, scaleVaule);
                if (t > duration) {
                    Laya.timer.clear(caller, onLoop);
                    target.destroy();
                }
            });
        };
        AnimationManager.prototype.CardFly = function (target, startPoint, targetPoint, duration, caller, complete) {
            var disX = targetPoint.x - startPoint.x;
            var disY = targetPoint.y - startPoint.y;
            var time = (duration / 30) + 1;
            var vX = (disX / time);
            var vY = -30;
            var aY = (disY - vY * time) * 2 / (time * time);
            var x = target.x;
            var y = target.y;
            var t = 0;
            var r = 360 / time;
            Laya.timer.loop(30, caller, function onLoop() {
                vY += aY;
                x += vX;
                y += vY;
                t += 30;
                target.pos(x, y);
                target.rotation += r;
                if (t > duration) {
                    Laya.timer.clear(caller, onLoop);
                    complete && complete();
                }
            });
        };
        AnimationManager.prototype.flayGlod = function (xSrc, ySrc, xObj, yObj) {
            var _this = this;
            var iTeme = 30;
            var nCount = 10;
            var goldArr = [];
            for (var i = 0; i < nCount; i++) {
                var goldImg = Laya.Pool.getItem("goods");
                if (!goldImg)
                    goldImg = new Laya.Image();
                goldImg.skin = "resource/assets/img/common/maininterface_icon_6.png";
                Laya.stage.addChild(goldImg);
                goldImg.x = xSrc;
                goldImg.y = ySrc;
                goldArr.push(goldImg);
            }
            var _loop_1 = function (i) {
                Laya.timer.once(i * iTeme, this_1, function () {
                    Laya.Tween.to(goldArr[i], { x: xObj, y: yObj }, 200, null, Laya.Handler.create(_this, function () {
                        Laya.stage.removeChild(goldArr[i]);
                        Laya.Pool.recover("goods", goldArr[i]);
                    }));
                });
            };
            var this_1 = this;
            for (var i = 0; i < goldArr.length; i++) {
                _loop_1(i);
            }
        };
        return AnimationManager;
    }());

    var GamePreLoadingView = (function (_super) {
        __extends(GamePreLoadingView, _super);
        function GamePreLoadingView() {
            var _this = _super.call(this) || this;
            _this.className_key = "GamePreLoadingView";
            _this.img_bg = new Laya.Image();
            _this.img_bg.skin = "resource/assets/preloading/loading_bg.jpg";
            _this.img_bg.width = Laya.stage.width;
            _this.img_bg.height = Laya.stage.height;
            _this.img_bg.x = 0;
            _this.img_bg.y = 0;
            _this.addChild(_this.img_bg);
            _this.img_head = new Laya.Image();
            if (DeviceUtil.isWXMiniGame()) {
                _this.img_head.skin = "resource/assets/preloading/loading_logo_wx.png";
            }
            else {
                _this.img_head.skin = "resource/assets/preloading/loading_logo.png";
            }
            _this.img_head.top = 300;
            _this.img_head.centerX = 0;
            _this.addChild(_this.img_head);
            _this.img_jdt_db = new Laya.Image();
            _this.img_jdt_db.skin = "resource/assets/preloading/loading_baseboard_1.png";
            _this.img_jdt_db.sizeGrid = "10,10,10,10";
            _this.img_jdt_db.width = 706;
            _this.img_jdt_db.height = 50;
            _this.img_jdt_db.bottom = 400;
            _this.img_jdt_db.centerX = 0;
            _this.addChild(_this.img_jdt_db);
            _this.img_jdt = new Laya.Image();
            _this.img_jdt.skin = "resource/assets/preloading/loading_baseboard_2.png";
            _this.img_jdt.sizeGrid = "10,10,10,10";
            _this.img_jdt.width = 691;
            _this.img_jdt.height = 36;
            _this.img_jdt.x = 8;
            _this.img_jdt.centerY = 0;
            _this.img_jdt_db.addChild(_this.img_jdt);
            _this.img_load = new Laya.Image();
            _this.img_load.skin = "resource/assets/preloading/loading_word.png";
            _this.img_load.bottom = 300;
            _this.img_load.centerX = 0;
            _this.addChild(_this.img_load);
            _this.aniBox = new Laya.Box();
            _this.aniBox.width = 500;
            _this.aniBox.height = 700;
            _this.aniBox.x = Laya.stage.width / 2;
            _this.aniBox.y = Laya.stage.height / 2;
            _this.addChild(_this.aniBox);
            _this.createSkeleton("resource/assets/preloading/loading.sk");
            _this.progress(1, 100);
            return _this;
        }
        GamePreLoadingView.prototype.childrenCreated = function () { };
        GamePreLoadingView.prototype.createSkeleton = function (url) {
            var _this = this;
            return new Promise(function (resolve) {
                AnimationManager.instance.showSkeletonAnimation(url, function (boomAnimation) {
                    boomAnimation.player.playbackRate = 1;
                    boomAnimation.autoSize = true;
                    boomAnimation.scale(1, 1);
                    boomAnimation.play(0, true);
                    _this.aniBox.y = Laya.stage.height / 2 + boomAnimation.height / 2 - 50;
                    _this.aniBox.addChild(boomAnimation);
                    resolve(boomAnimation);
                }, 1);
            });
        };
        GamePreLoadingView.prototype.createChildren = function () {
            _super.prototype.createChildren.call(this);
        };
        GamePreLoadingView.prototype.onAwake = function () {
            _super.prototype.onAwake.call(this);
            this.img_bg.scaleX = this.img_bg.scaleY = DeviceUtil.getScalePix();
        };
        GamePreLoadingView.prototype.progress = function (index, len) {
            if (this.img_jdt) {
                this.img_jdt.width = 691 * (index / len);
            }
        };
        GamePreLoadingView.prototype.remove = function () {
            Laya.timer.clearAll(this);
        };
        return GamePreLoadingView;
    }(BaseSceneUISkin));

    var SoundConst = (function () {
        function SoundConst() {
        }
        SoundConst.getKeyUrl = function (key) {
            return "resource/assets/sounds/" + key + SoundConst.sufix;
        };
        SoundConst.Bgm = "bgm";
        SoundConst.Btn_1 = "btn_1";
        SoundConst.sufix = ".mp3";
        return SoundConst;
    }());

    var SoundManager = (function () {
        function SoundManager() {
            this._shakeIsOpen = true;
            this._soundIsOpen = true;
            this.effectPool = {};
            this._musicOpen = true;
            this._bgvolume = 1;
            this.effectPools = {};
            this.onPlaySoundNum = 0;
            this.effectVolume = 1;
            this._soundOpen = true;
        }
        SoundManager.getInstance = function () {
            if (!SoundManager.instance) {
                SoundManager.instance = new SoundManager();
            }
            return SoundManager.instance;
        };
        Object.defineProperty(SoundManager.prototype, "shakeIsOpen", {
            get: function () {
                return this._shakeIsOpen;
            },
            set: function (isOpen) {
                this._shakeIsOpen = isOpen;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(SoundManager.prototype, "soundIsOpen", {
            get: function () {
                return this._soundIsOpen;
            },
            set: function (isOpen) {
                this._soundIsOpen = isOpen;
                this.musicOpen = isOpen;
                this.soundOpen = isOpen;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(SoundManager.prototype, "musicOpen", {
            get: function () {
                return this._musicOpen;
            },
            set: function (value) {
                this._musicOpen = value;
                if (value) {
                    this.playBgMusic();
                }
                else {
                    this.stopBgMusic();
                }
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(SoundManager.prototype, "bgm", {
            get: function () {
                return this._bgm;
            },
            set: function (bgm) {
                if (!this._bgm || this._bgm != bgm) {
                    this._bgm = bgm;
                    this.playBgMusic();
                }
                else if (this._bgm == bgm) {
                    this.stopBgMusic();
                    this.playBgMusic();
                }
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(SoundManager.prototype, "bgvolume", {
            get: function () {
                return this._bgvolume;
            },
            set: function (value) {
                this.musicChannel && (this.musicChannel.volume = value);
                this._bgvolume = value;
            },
            enumerable: true,
            configurable: true
        });
        SoundManager.prototype.playBgMusic = function () {
            console.log("playBgm >>>", this._bgm, this.musicOpen);
            if (!this._bgm)
                return;
            if (!this.musicOpen)
                return;
            this.playMusic();
        };
        SoundManager.prototype.playMusic = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _url, _a;
                return __generator(this, function (_b) {
                    switch (_b.label) {
                        case 0:
                            if (!this.soundChannel) return [3, 1];
                            this.soundChannel.resume();
                            return [3, 3];
                        case 1:
                            _url = ResUtil.getIntance().defaultOriginUrl + "resource/assets/sounds/" + this._bgm + ".mp3";
                            console.log("bgm url >>>", _url);
                            _a = this;
                            return [4, Laya.SoundManager.playMusic(_url, 0)];
                        case 2:
                            _a.soundChannel = _b.sent();
                            _b.label = 3;
                        case 3: return [2];
                    }
                });
            });
        };
        SoundManager.prototype.pauseBgm = function () {
            console.log("pauseBgm >>>");
            this.soundChannel && this.soundChannel.pause();
        };
        SoundManager.prototype.stopBgMusic = function () {
            console.log("stopBgm >>>");
            Laya.SoundManager.stopMusic();
        };
        Object.defineProperty(SoundManager.prototype, "soundOpen", {
            get: function () {
                return this._soundOpen;
            },
            set: function (_soundOpen) {
                this._soundOpen = _soundOpen;
            },
            enumerable: true,
            configurable: true
        });
        SoundManager.prototype.destoryOneSound = function (soundName) {
            var _url = SoundConst.getKeyUrl(soundName);
            if (DeviceUtil.isMiniGame()) {
                _url = Laya.URL.basePath + _url;
            }
            Laya.loader.clearRes(_url);
            if (!DeviceUtil.isQQMiniGame() && !DeviceUtil.isWXMiniGame()) {
                this.effectPool[_url].destroy();
                this.effectPool[_url] = null;
            }
            this.effectPools[_url].destroy();
            this.effectPools[_url] = null;
        };
        SoundManager.prototype.playEffect = function (soundUrl, times) {
            return __awaiter(this, void 0, void 0, function () {
                var _url, sound, soundChannel, soundChannel;
                var _this = this;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            _url = SoundConst.getKeyUrl(soundUrl);
                            if (this._soundOpen == false || !soundUrl || soundUrl == "")
                                return [2];
                            if (DeviceUtil.isQQMiniGame() || DeviceUtil.isWXMiniGame()) {
                                this.playMiniGameEffect(Laya.URL.basePath + _url);
                                return [2];
                            }
                            sound = this.effectPool[soundUrl];
                            if (!(!sound || !sound.audioBuffer || !sound._disposed)) return [3, 5];
                            return [4, ResUtil.getIntance().getAsyncRESByUrl(_url)];
                        case 1:
                            sound = _a.sent();
                            if (!sound) return [3, 2];
                            this.effectPool[soundUrl] = sound;
                            soundChannel = sound.play(0, times);
                            soundChannel.volume = this.effectVolume;
                            return [3, 4];
                        case 2: return [4, ResUtil.getIntance().getAsyncRESByUrl(_url).then(function () {
                                _this.playEffect(soundUrl, times);
                            })];
                        case 3:
                            _a.sent();
                            return [2];
                        case 4: return [3, 6];
                        case 5:
                            soundChannel = sound.play(0, times);
                            if (soundChannel) {
                                soundChannel.play();
                            }
                            soundChannel.volume = this.effectVolume;
                            _a.label = 6;
                        case 6: return [2];
                    }
                });
            });
        };
        SoundManager.prototype.stopEffect = function (soundUrl) {
            var stLayaSound = this.effectPool[soundUrl];
            if (stLayaSound) {
                stLayaSound.dispose;
            }
        };
        SoundManager.prototype.playMiniGameEffect = function (soundUrl) {
            if (DeviceUtil.isWXMiniGame() || DeviceUtil.isQQMiniGame()) {
                var innerAudioContext_1 = this.effectPools[soundUrl];
                if (!innerAudioContext_1) {
                    SoundManager.getInstance().effectPools[soundUrl] = innerAudioContext_1 = platform.createInnerAudioContext();
                    innerAudioContext_1.autoplay = true;
                    innerAudioContext_1.src = soundUrl;
                    innerAudioContext_1.onError(function () {
                        innerAudioContext_1.destroy();
                        SoundManager.getInstance().effectPools[soundUrl] = null;
                    });
                    innerAudioContext_1.onStop(function () {
                        innerAudioContext_1.destroy();
                        SoundManager.getInstance().effectPools[soundUrl] = null;
                    });
                }
                innerAudioContext_1.play();
                return;
            }
            var miniSounds = this.effectPools[soundUrl];
            if (!miniSounds) {
                this.effectPools[soundUrl] = miniSounds = [];
            }
            var miniSound;
            if (miniSounds.length < 1) {
                miniSound = new MiniGameSound();
                miniSound.create(soundUrl);
            }
            else {
                miniSound = miniSounds.shift();
                if (miniSound.isEnded == false) {
                    miniSound = new MiniGameSound();
                    miniSound.create(soundUrl);
                }
                else {
                    miniSound.play();
                }
            }
            this.onPlaySoundNum += 1;
        };
        return SoundManager;
    }());
    var MiniGameSound = (function () {
        function MiniGameSound() {
        }
        MiniGameSound.prototype.create = function (soundUrl) {
            var _this = this;
            this.innerAudioContext = platform.createInnerAudioContext();
            this.innerAudioContext.onEnded(function () {
                _this.isEnded = true;
                SoundManager.getInstance().effectPools[_this.soundUrl].push(_this);
                SoundManager.getInstance().onPlaySoundNum -= 1;
            });
            this.isEnded = false;
            this.soundUrl = soundUrl;
            this.innerAudioContext.src = soundUrl;
            this.innerAudioContext.autoplay = true;
        };
        MiniGameSound.prototype.play = function () {
            this.innerAudioContext.play();
        };
        return MiniGameSound;
    }());

    var GameManager = (function () {
        function GameManager() {
            this.isMiniGame = false;
        }
        Object.defineProperty(GameManager, "instance", {
            get: function () {
                if (this.ins == null) {
                    this.ins = new GameManager();
                }
                return this.ins;
            },
            enumerable: true,
            configurable: true
        });
        GameManager.prototype.parseShopTimeShow = function (time, en) {
            var min = time / 60;
            var hour = min / 60;
            var day = hour / 24;
            var str = '';
            if (day >= 1) {
                str = day.toFixed(2) + '天';
            }
            else if (hour >= 1) {
                str = hour.toFixed(2) + '小时';
            }
            else {
                str = min.toFixed(2) + '分钟';
            }
            if (en) {
                str = str.replace("天", 'day');
                str = str.replace("小时", 'hour');
                str = str.replace("分钟", 'min');
            }
            return str;
        };
        GameManager.prototype.loadCongigs = function (url) {
            var _this = this;
            return new Promise(function (resolve) {
                var jsonUrl = url;
                Laya.loader.load(jsonUrl, Laya.Handler.create(_this, function (res) {
                    if (typeof (res) == "string") {
                        res = JSON.parse(res);
                    }
                    resolve(Utils.copy(res));
                }));
            });
        };
        return GameManager;
    }());
    window['GameManager'] = GameManager;

    var GameEvent = (function () {
        function GameEvent() {
        }
        GameEvent.ON_PS_CHANGE = "ON_PS_CHANGE";
        GameEvent.ON_GLOD_CHANGE = "ON_GLOD_CHANGE";
        GameEvent.ON_SP_UPDOWN_TIME = "ON_SP_UPDOWN_TIME";
        GameEvent.REFRESH_INVITE = "REFRESH_INVITE";
        GameEvent.EVENT_FLAY_GLOD = "EVENT_FLAY_GLOD";
        GameEvent.CHANGE_VIDEO_IMAGE = "CHANGE_VIDEO_IMAGE";
        return GameEvent;
    }());
    window['GameEvent'] = GameEvent;

    var EnterGameType;
    (function (EnterGameType) {
        EnterGameType[EnterGameType["enum_EnterGameType_GameHome"] = 1] = "enum_EnterGameType_GameHome";
        EnterGameType[EnterGameType["enum_EnterGameType_Next"] = 2] = "enum_EnterGameType_Next";
        EnterGameType[EnterGameType["enum_EnterGameType_ReStart"] = 3] = "enum_EnterGameType_ReStart";
        EnterGameType[EnterGameType["enum_EnterGameType_ChooseLevel"] = 4] = "enum_EnterGameType_ChooseLevel";
    })(EnterGameType || (EnterGameType = {}));
    var GoodsType;
    (function (GoodsType) {
        GoodsType[GoodsType["enum_GoodsType_Sp"] = 1] = "enum_GoodsType_Sp";
        GoodsType[GoodsType["enum_GoodsType_Glod"] = 2] = "enum_GoodsType_Glod";
    })(GoodsType || (GoodsType = {}));
    var SkinState;
    (function (SkinState) {
        SkinState[SkinState["enum_SkinState_Have"] = 1] = "enum_SkinState_Have";
        SkinState[SkinState["enum_SkinState_NotOwned"] = 2] = "enum_SkinState_NotOwned";
        SkinState[SkinState["enum_SkinState_Used"] = 3] = "enum_SkinState_Used";
    })(SkinState || (SkinState = {}));
    var MoreGameIndex = (function () {
        function MoreGameIndex() {
            this.ad_id = 0;
            this.ad_img = "";
            this.name = "";
            this.ad_appid = "";
            this.url = "";
        }
        return MoreGameIndex;
    }());

    var ConfigManager = (function () {
        function ConfigManager() {
            this.mapDialogBoxIndex = {};
        }
        ConfigManager.getInstance = function () {
            if (!ConfigManager.instance) {
                ConfigManager.instance = new ConfigManager();
            }
            return ConfigManager.instance;
        };
        ConfigManager.prototype.initConfigInfo = function () {
            var self = ConfigManager.instance;
            return new Promise(function (resolve) {
                var count = 0;
                var len = 5;
                var loadConfigSucc = function () {
                    count++;
                    if (count >= len) {
                        resolve();
                    }
                };
                Laya.loader.load('resource/assets/config/GameConfig.json?v=' + Math.random(), new Laya.Handler(self, function (json) {
                    if (typeof (json) == "string") {
                        self.aryGameConfig = JSON.parse(json);
                    }
                    else {
                        self.aryGameConfig = json;
                    }
                    loadConfigSucc();
                }));
                Laya.loader.load('resource/assets/config/SignConfig.json?v=' + Math.random(), new Laya.Handler(self, function (json) {
                    if (typeof (json) == "string") {
                        self.arySignData = JSON.parse(json);
                    }
                    else {
                        self.arySignData = json;
                    }
                    loadConfigSucc();
                }));
                Laya.loader.load('resource/assets/config/LevelPsInfo.json?v=' + Math.random(), new Laya.Handler(self, function (json) {
                    if (typeof (json) == "string") {
                        self.aryLevelPsData = JSON.parse(json);
                    }
                    else {
                        self.aryLevelPsData = json;
                    }
                    loadConfigSucc();
                }));
                Laya.loader.load('resource/assets/config/DialogBox.json?v=' + Math.random(), new Laya.Handler(self, function (json) {
                    if (typeof (json) == "string") {
                        self.aryDialogBoxIndex = JSON.parse(json);
                    }
                    else {
                        self.aryDialogBoxIndex = json;
                    }
                    var nLen = self.aryDialogBoxIndex.length;
                    for (var i = 0; i < nLen; ++i) {
                        self.mapDialogBoxIndex[self.aryDialogBoxIndex[i].id] = self.aryDialogBoxIndex[i];
                    }
                    loadConfigSucc();
                }));
                Laya.loader.load('resource/assets/config/InviteConfig.json?v=' + Math.random(), new Laya.Handler(self, function (json) {
                    if (typeof (json) == "string") {
                        self.aryInviteConfigIndex = JSON.parse(json);
                    }
                    else {
                        self.aryInviteConfigIndex = json;
                    }
                    loadConfigSucc();
                }));
            });
        };
        ConfigManager.prototype.getInviteConfigInfo = function () {
            return ConfigManager.instance.aryInviteConfigIndex;
        };
        ConfigManager.prototype.getSignDataAll = function () {
            return ConfigManager.instance.arySignData;
        };
        ConfigManager.prototype.getSignDataBySignID = function (nIndex) {
            if (nIndex < 0 || nIndex >= ConfigManager.instance.arySignData.length) {
                return null;
            }
            return ConfigManager.instance.arySignData[nIndex];
        };
        ConfigManager.prototype.getGameConfigDataByID = function (nID) {
            if (nID > ConfigManager.instance.aryGameConfig.length || nID <= 0) {
                return null;
            }
            var nRealID = nID - 1;
            return ConfigManager.instance.aryGameConfig[nRealID];
        };
        ConfigManager.prototype.getTreasureByCurLevel = function () {
            var nRealIndex = PlayerDataManager.getInstance().getCurLevel();
            if (nRealIndex < 0 || ConfigManager.instance.aryLevelPsData.length < 0) {
                return 0;
            }
            nRealIndex = nRealIndex >= ConfigManager.instance.aryLevelPsData.length ? ConfigManager.instance.aryLevelPsData.length - 1 : nRealIndex;
            return ConfigManager.instance.aryLevelPsData[nRealIndex].nPs;
        };
        ConfigManager.prototype.getDialogInfo = function (nDialogID) {
            return ConfigManager.instance.mapDialogBoxIndex[nDialogID];
        };
        return ConfigManager;
    }());

    var GameLogicProcessingManager = (function () {
        function GameLogicProcessingManager() {
        }
        GameLogicProcessingManager.getInstance = function () {
            if (!this.instance) {
                this.instance = new GameLogicProcessingManager();
            }
            return this.instance;
        };
        GameLogicProcessingManager.GetCurTime = function () {
            return Laya.Browser.now();
        };
        Object.defineProperty(GameLogicProcessingManager.prototype, "PSRecoveryOpen", {
            get: function () {
                return this.bPSRecoveryOpen;
            },
            set: function (b) {
                this.bPSRecoveryOpen = b;
            },
            enumerable: true,
            configurable: true
        });
        return GameLogicProcessingManager;
    }());

    var PlayerDataBase = (function () {
        function PlayerDataBase() {
            this.inviteId = [];
            this.nMaxLevel = 0;
            this.nCurLevel = 0;
            this.nCurIndex = 0;
            this.nSignTimeLast = 0;
            this.nSignIndex = 0;
            this.nGlodCount = 0;
            this.nPS = 5;
            this.nPsTime = 0;
        }
        return PlayerDataBase;
    }());
    var DYLogData = (function () {
        function DYLogData() {
            this.aryIndex = [];
        }
        return DYLogData;
    }());
    var PlayerDataManager = (function () {
        function PlayerDataManager() {
            this.nMaxLevelCount = 29;
            this.stPlayerDataBase = new PlayerDataBase();
            this.stDYLogData = new DYLogData();
            this.nPsRecoveryTime = 0;
            this.nPsTimeCountDown = 0;
            this.strUpDownTime = "";
            this.bIsNewPlayer = false;
        }
        PlayerDataManager.getInstance = function () {
            if (!this.instance) {
                this.instance = new PlayerDataManager();
            }
            return this.instance;
        };
        PlayerDataManager.prototype.addLevel = function () {
            this.stPlayerDataBase.nCurLevel = this.stPlayerDataBase.nCurLevel += 1;
            this.stPlayerDataBase.nCurLevel = this.stPlayerDataBase.nCurLevel < this.nMaxLevelCount ? this.stPlayerDataBase.nCurLevel : this.nMaxLevelCount - 1;
            if (this.stPlayerDataBase.nMaxLevel < this.stPlayerDataBase.nCurLevel) {
                this.stPlayerDataBase.nMaxLevel = this.stPlayerDataBase.nCurLevel;
            }
            this.SaveData();
        };
        PlayerDataManager.prototype.getCurLevel = function () {
            return this.stPlayerDataBase.nCurLevel;
        };
        PlayerDataManager.prototype.getCurLevelMax = function () {
            return this.stPlayerDataBase.nMaxLevel;
        };
        Object.defineProperty(PlayerDataManager.prototype, "isNewPlayer", {
            get: function () {
                return this.bIsNewPlayer;
            },
            enumerable: true,
            configurable: true
        });
        PlayerDataManager.prototype.setCurLevel = function (nLevel) {
            this.stPlayerDataBase.nCurLevel = nLevel;
        };
        PlayerDataManager.prototype.getCurLevelToChallenge = function () {
            var nRealData = this.stPlayerDataBase.nCurLevel + 1;
            if (nRealData > this.nMaxLevelCount) {
                nRealData = this.nMaxLevelCount;
            }
            return nRealData;
        };
        PlayerDataManager.prototype.getLevelToChangeMaxLevel = function () {
            var nRealData = this.stPlayerDataBase.nMaxLevel + 1;
            if (nRealData > this.nMaxLevelCount) {
                nRealData = this.nMaxLevelCount;
            }
            return nRealData;
        };
        PlayerDataManager.prototype.SaveData = function () {
            var str = JSON.stringify(this.stPlayerDataBase);
            Laya.LocalStorage.setItem(GameData.getInstance().userInfo.openId + "BaseData", str);
            str = JSON.stringify(this.stDYLogData);
            Laya.LocalStorage.setItem(GameData.getInstance().userInfo.openId + "DYLogData", str);
        };
        PlayerDataManager.prototype.GetData = function () {
            var str = Laya.LocalStorage.getItem(GameData.getInstance().userInfo.openId + "BaseData");
            if (str) {
                try {
                    this.stPlayerDataBase = JSON.parse(str);
                    this.bIsNewPlayer = false;
                }
                catch (e) {
                    this.bIsNewPlayer = true;
                    this.stPlayerDataBase = new PlayerDataBase();
                }
            }
            else {
                this.bIsNewPlayer = true;
            }
            str = Laya.LocalStorage.getItem(GameData.getInstance().userInfo.openId + "DYLogData");
            if (str) {
                try {
                    this.stDYLogData = JSON.parse(str);
                }
                catch (e) {
                    this.stDYLogData = new DYLogData();
                }
            }
            EventMgr.getInstance().sendEvent(GameEvent.ON_GLOD_CHANGE);
            EventMgr.getInstance().sendEvent(GameEvent.ON_PS_CHANGE);
        };
        PlayerDataManager.prototype.AddGoods = function (nType, nCount) {
            if (nType == GoodsType.enum_GoodsType_Glod) {
                this.stPlayerDataBase.nGlodCount += nCount;
                EventMgr.getInstance().sendEvent(GameEvent.ON_GLOD_CHANGE);
            }
            else if (nType == GoodsType.enum_GoodsType_Sp) {
                this.stPlayerDataBase.nPS += nCount;
                var nMax = 99;
                var stGameConfig = ConfigManager.getInstance().getGameConfigDataByID(4);
                if (stGameConfig) {
                    nMax = parseInt(stGameConfig.strValue);
                }
                if (this.stPlayerDataBase.nPS > nMax) {
                    TipsManager.getInstance().showDefaultTips("体力已满");
                    this.stPlayerDataBase.nPS = nMax;
                }
                EventMgr.getInstance().sendEvent(GameEvent.ON_PS_CHANGE);
                this.openPSRecoveryTime();
            }
            this.SaveData();
        };
        PlayerDataManager.prototype.CheckGoods = function (nType, nCount) {
            if (nType == GoodsType.enum_GoodsType_Glod) {
                return this.stPlayerDataBase.nGlodCount >= nCount;
            }
            else if (nType == GoodsType.enum_GoodsType_Sp) {
                return this.stPlayerDataBase.nPS >= nCount;
            }
        };
        PlayerDataManager.prototype.subGoods = function (nType, nCount) {
            if (nType == GoodsType.enum_GoodsType_Glod) {
                this.stPlayerDataBase.nGlodCount -= nCount;
                this.stPlayerDataBase.nGlodCount = this.stPlayerDataBase.nGlodCount < 0 ? 0 : this.stPlayerDataBase.nGlodCount;
                EventMgr.getInstance().sendEvent(GameEvent.ON_GLOD_CHANGE);
            }
            else if (nType == GoodsType.enum_GoodsType_Sp) {
                this.stPlayerDataBase.nPS -= nCount;
                this.stPlayerDataBase.nPS = this.stPlayerDataBase.nPS < 0 ? 0 : this.stPlayerDataBase.nPS;
                EventMgr.getInstance().sendEvent(GameEvent.ON_PS_CHANGE);
                this.openPSRecoveryTime();
            }
            this.SaveData();
        };
        PlayerDataManager.prototype.getSpLastTime = function () {
            return this.strUpDownTime;
        };
        PlayerDataManager.prototype.refreshOffLinePS = function () {
            this.addPsAboutOffLine();
            this.openPSRecoveryTime();
        };
        PlayerDataManager.prototype.addPsAboutOffLine = function () {
            if (this.stPlayerDataBase.nPsTime == 0) {
                return;
            }
            var nMaxPs = 10;
            var stGameConfig = ConfigManager.getInstance().getGameConfigDataByID(1);
            if (stGameConfig) {
                nMaxPs = parseInt(stGameConfig.strValue);
            }
            if (this.stPlayerDataBase.nPS >= nMaxPs) {
                return;
            }
            stGameConfig = ConfigManager.getInstance().getGameConfigDataByID(2);
            if (stGameConfig) {
                var nAddPsPerTime = parseInt(stGameConfig.strValue);
                if (nAddPsPerTime == 0) {
                    return;
                }
                var nCurtTime = GameLogicProcessingManager.GetCurTime();
                var nTimeOverFlow = nCurtTime - this.stPlayerDataBase.nPsTime;
                var nPsAdd = Math.floor(nTimeOverFlow / nAddPsPerTime);
                this.stPlayerDataBase.nPS += nPsAdd;
                nTimeOverFlow = nTimeOverFlow % nAddPsPerTime;
                this.stPlayerDataBase.nPsTime = nCurtTime - nTimeOverFlow;
                if (this.stPlayerDataBase.nPS >= nMaxPs) {
                    this.stPlayerDataBase.nPS = nMaxPs;
                    this.stPlayerDataBase.nPsTime = 0;
                }
                this.SaveData();
            }
        };
        PlayerDataManager.prototype.openPSRecoveryTime = function () {
            if (this.nPsRecoveryTime == 0) {
                var stGameConfig_1 = ConfigManager.getInstance().getGameConfigDataByID(2);
                if (!stGameConfig_1) {
                    return;
                }
                this.nPsRecoveryTime = parseInt(stGameConfig_1.strValue);
            }
            var nMaxPs = 10;
            var stGameConfig = ConfigManager.getInstance().getGameConfigDataByID(1);
            if (stGameConfig) {
                nMaxPs = parseInt(stGameConfig.strValue);
            }
            if (this.stPlayerDataBase.nPS >= nMaxPs) {
                Laya.timer.clear(this, this.subTimeAndRefreshPsRecoveryTimeView);
                this.stPlayerDataBase.nPsTime = 0;
                GameLogicProcessingManager.getInstance().PSRecoveryOpen = false;
            }
            else {
                if (!GameLogicProcessingManager.getInstance().PSRecoveryOpen) {
                    GameLogicProcessingManager.getInstance().PSRecoveryOpen = true;
                    var nCurTime = GameLogicProcessingManager.GetCurTime();
                    if (this.stPlayerDataBase.nPsTime == 0) {
                        this.stPlayerDataBase.nPsTime = nCurTime;
                    }
                    this.nPsTimeCountDown = this.nPsRecoveryTime - (nCurTime - this.stPlayerDataBase.nPsTime);
                    this.refreshPsRecoveryTimeView(this.nPsTimeCountDown);
                    Laya.timer.loop(1000, this, this.subTimeAndRefreshPsRecoveryTimeView);
                    this.SaveData();
                }
            }
        };
        PlayerDataManager.prototype.subTimeAndRefreshPsRecoveryTimeView = function () {
            if (!GameLogicProcessingManager.getInstance().PSRecoveryOpen) {
                return;
            }
            this.nPsTimeCountDown -= 1000;
            this.refreshPsRecoveryTimeView(this.nPsTimeCountDown);
        };
        PlayerDataManager.prototype.refreshPsRecoveryTimeView = function (nTime) {
            var nLastTime = nTime;
            nLastTime = nLastTime < 0 ? 0 : nLastTime;
            nLastTime = Math.floor(nLastTime / 1000);
            var nMinTotal = Math.floor(nLastTime / 60);
            var nMinTen = Math.floor(nMinTotal / 10);
            var nSecTotal = nLastTime % 60;
            var nSecTen = Math.floor(nSecTotal / 10);
            var nSecBit = nSecTotal % 10;
            this.strUpDownTime = nMinTen.toString() + nMinTotal.toString() + ":" + nSecTen.toString() + nSecBit.toString();
            EventMgr.getInstance().sendEvent(GameEvent.ON_SP_UPDOWN_TIME);
            if (nTime < 0) {
                this.nPsTimeCountDown = 0;
                GameLogicProcessingManager.getInstance().PSRecoveryOpen = false;
                this.stPlayerDataBase.nPsTime = 0;
                Laya.timer.clear(this, this.refreshPsRecoveryTimeView);
                this.AddGoods(GoodsType.enum_GoodsType_Sp, 1);
                return;
            }
        };
        PlayerDataManager.prototype.getLevelNumMakeOver = function () {
            return this.nMaxLevelCount;
        };
        PlayerDataManager.prototype.initGoods = function () {
            if (!this.bIsNewPlayer) {
                return;
            }
            var stGameConfig = ConfigManager.getInstance().getGameConfigDataByID(15);
            if (stGameConfig) {
                this.stPlayerDataBase.nPS = parseInt(stGameConfig.strValue);
            }
            stGameConfig = ConfigManager.getInstance().getGameConfigDataByID(16);
            if (stGameConfig) {
                this.stPlayerDataBase.nGlodCount = parseInt(stGameConfig.strValue);
            }
        };
        PlayerDataManager.prototype.isSign = function () {
            var nCurTime = GameLogicProcessingManager.GetCurTime();
            if (Utils.judgeIsOnTheSameDay(PlayerDataManager.getInstance().stPlayerDataBase.nSignTimeLast, nCurTime)) {
                return false;
            }
            else {
                return true;
            }
        };
        PlayerDataManager.prototype.checkSkinState = function (nSkinID) {
            var nState = SkinState.enum_SkinState_NotOwned;
            if (nSkinID == 1) {
                nState = SkinState.enum_SkinState_Have;
            }
            else if (nSkinID == 2) {
                nState = SkinState.enum_SkinState_NotOwned;
            }
            return nState;
        };
        PlayerDataManager.prototype.recordDyLogIndex = function (nIndex) {
            this.stDYLogData.aryIndex.push(nIndex);
        };
        PlayerDataManager.prototype.checkDyLogIndexrecorded = function (nIndex) {
            for (var i = 0; i < this.stDYLogData.aryIndex.length; ++i) {
                if (nIndex == this.stDYLogData.aryIndex[i]) {
                    return true;
                }
            }
            return false;
        };
        return PlayerDataManager;
    }());

    var InviteManager = (function () {
        function InviteManager() {
            this.URL = GameData.getInstance().URL_OF_INVITE;
            this.inviterInfo = new netData.Inviter();
            this.newPlayer = [];
        }
        InviteManager.getInstance = function () {
            if (!InviteManager.instance_) {
                InviteManager.instance_ = new InviteManager();
            }
            return InviteManager.instance_;
        };
        InviteManager.prototype.selectInfo = function (callF, obj) {
            var _this = this;
            if (callF === void 0) { callF = null; }
            if (obj === void 0) { obj = null; }
            var gameId = GameData.getInstance().gameId;
            var openId = GameData.getInstance().userInfo.openId;
            var msg = {};
            msg.msg_type = "16";
            msg.msg_data = {
                "gameid": gameId,
                "openid": openId
            };
            console.log("查询受邀人列表 ->", msg);
            HttpMgr.getInstance().sendHttp(this.URL, msg, function (e) {
                var code = e["msg_data"]["error_code"];
                if (code == "0") {
                    console.log("查询受邀人列表成功 ->", e);
                    if (e["msg_data"]["index_list"] != "") {
                        var newPlayerTemp = e["msg_data"]["index_list"];
                        if (newPlayerTemp) {
                            _this.newPlayer = newPlayerTemp;
                        }
                        console.log("recvnewplayer = ", _this.newPlayer);
                    }
                }
                else {
                    console.warn("查询受邀人列表失败：", "str");
                }
                if (callF && obj) {
                    callF.call(obj, code);
                }
            }, function (e) { });
        };
        InviteManager.prototype.createInfo = function (callF, obj) {
            if (callF === void 0) { callF = null; }
            if (obj === void 0) { obj = null; }
            return __awaiter(this, void 0, void 0, function () {
                var _this = this;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0: return [4, new Promise(function (res, rej) {
                                var inviterOpenId = _this.inviterInfo.openId;
                                var tx_url = GameData.getInstance().userInfo.avatarUrl;
                                var nick = GameData.getInstance().userInfo.nick;
                                var gameId = GameData.getInstance().gameId;
                                var msg = {};
                                msg.msg_type = "14";
                                msg.msg_data = {
                                    "openid": inviterOpenId,
                                    "url": tx_url,
                                    "name": nick,
                                    "gameid": gameId
                                };
                                console.log("关联自己及邀请人 ->", msg, " game id = ", GameData.getInstance().gameId);
                                HttpMgr.getInstance().sendHttp(_this.URL, msg, function (e) {
                                    var code = e["msg_data"]["error_code"];
                                    if (code == "0") {
                                        console.log("关联自己及邀请人成功...");
                                    }
                                    else {
                                        var str = code.toString();
                                        console.warn("关联自己及邀请人失败：", str);
                                    }
                                    if (callF && obj) {
                                        callF.call(obj, code);
                                    }
                                    res();
                                }, function (e) { });
                            })];
                        case 1:
                            _a.sent();
                            return [2];
                    }
                });
            });
        };
        InviteManager.prototype.judgeInvite = function () {
            var _this = this;
            return new Promise(function (resolve) {
                var res = GameData.getInstance().enterGameInfo;
                console.log("开始关联邀请人", res);
                console.log("自己信息", GameData.getInstance().userInfo);
                if (res) {
                    var scene = res.scene;
                    if (scene == 1007 || scene == 1008 || scene == 1044) {
                        if (GameData.getInstance().userInfo.openId && res.query && res.query["openid"]) {
                            _this.inviterInfo.nick = res.query["nick"];
                            _this.inviterInfo.openId = res.query["openid"];
                            if (GameData.getInstance().userInfo.openId != _this.inviterInfo.openId) {
                                console.log("关联邀请人", res.query);
                                _this.createInfo();
                            }
                        }
                    }
                    resolve();
                }
                else {
                    resolve();
                }
            });
        };
        InviteManager.prototype.getInviteAwardData = function () {
            var inviteConfig = ConfigManager.getInstance().getInviteConfigInfo();
            var lingqu = PlayerDataManager.getInstance().stPlayerDataBase.inviteId;
            var invitePlayer = this.newPlayer;
            var dataArr = [];
            for (var i = 0, len = inviteConfig.length; i < len; i++) {
                var invite = inviteConfig[i];
                var awardId = invite.ID;
                var canLingqu = false;
                var lingqued = false;
                var player = null;
                if (invitePlayer.length - 1 >= i) {
                    player = invitePlayer[i];
                }
                if (lingqu.indexOf(awardId) > -1)
                    lingqued = true;
                if (player)
                    canLingqu = true;
                var data = new localData.InviteData();
                data.id = awardId;
                data.head = player ? player["url"] : "";
                data.reward = invite.nCount;
                data.lingqued = lingqued;
                data.canLingqu = canLingqu;
                dataArr.push(data);
            }
            return dataArr;
        };
        return InviteManager;
    }());

    var HttpMgr$1 = (function () {
        function HttpMgr() {
            this.printLog = true;
            this.defaultTimeOut = 5000;
        }
        HttpMgr.getInstance = function () {
            if (!HttpMgr.instance_) {
                HttpMgr.instance_ = new HttpMgr();
            }
            return HttpMgr.instance_;
        };
        HttpMgr.prototype.sendHttp = function (url, data, secces, fail, type, responseType) {
            var _this = this;
            if (data === void 0) { data = null; }
            if (secces === void 0) { secces = null; }
            if (fail === void 0) { fail = null; }
            if (type === void 0) { type = "post"; }
            console.log("url ->", url);
            var jsonStr = data ? JSON.stringify(data) : "null";
            if (this.printLog) {
                var date = new Date();
                console.log("HTTP Send :[" + date.toTimeString() + " time:" + date.getTime() + "]  \n    send data: " + jsonStr);
            }
            var httpRequest = Laya.Pool.getItemByClass("HttpRequest", Laya.HttpRequest);
            httpRequest.http.timeout = this.defaultTimeOut;
            httpRequest.http.ontimeout = function () {
                console.log('ontimeout');
                if (fail) {
                    fail(null);
                    TipsManager.getInstance().showDefaultTips("网络请求超时！");
                }
                httpRequest.http.ontimeout = null;
                Laya.Pool.recover("HttpRequest", httpRequest);
            };
            httpRequest.once(Laya.Event.COMPLETE, this, function (rev) {
                if (secces) {
                    secces(JSON.parse(rev));
                }
                Laya.Pool.recover("HttpRequest", httpRequest);
            });
            httpRequest.once(Laya.Event.ERROR, this, function (e) {
                if (_this.printLog) {
                    var date = new Date();
                    console.log("HTTP Error :[" + date.toTimeString() + " time:" + date.getTime() + "]");
                }
                if (fail) {
                    fail(e);
                    TipsManager.getInstance().showDefaultTips("你的网络已断开，请检查设置。");
                }
                Laya.Pool.recover("HttpRequest", httpRequest);
            });
            httpRequest.send(url, data ? jsonStr : null, type, "text");
        };
        HttpMgr.prototype.sendHttpDY = function (url, data, secces, fail, type, responseType) {
            var _this = this;
            if (data === void 0) { data = null; }
            if (secces === void 0) { secces = null; }
            if (fail === void 0) { fail = null; }
            if (type === void 0) { type = "post"; }
            if (type == "get" && data) {
                url += Utils.querStr(data);
            }
            console.log("url ->", url);
            var jsonStr = data ? JSON.stringify(data) : "null";
            if (this.printLog) {
                var date = new Date();
                console.log("HTTP Send :[" + date.toTimeString() + " time:" + date.getTime() + "]  \n    send data: " + jsonStr);
            }
            var httpRequest = Laya.Pool.getItemByClass("HttpRequest", Laya.HttpRequest);
            httpRequest.http.timeout = this.defaultTimeOut;
            httpRequest.http.ontimeout = function () {
                console.log("ontimeout");
                if (fail) {
                    fail(null);
                    TipsManager.getInstance().showDefaultTips("网络请求超时！");
                }
                httpRequest.http.ontimeout = null;
                Laya.Pool.recover("HttpRequest", httpRequest);
            };
            httpRequest.once(Laya.Event.COMPLETE, this, function (rev) {
                if (secces) {
                    secces(JSON.parse(rev));
                }
                Laya.Pool.recover("HttpRequest", httpRequest);
            });
            httpRequest.once(Laya.Event.ERROR, this, function (e) {
                if (_this.printLog) {
                    var date = new Date();
                    console.log("HTTP Error :[" + date.toTimeString() + " time:" + date.getTime() + "]");
                }
                if (fail) {
                    fail(e);
                    TipsManager.getInstance().showDefaultTips("你的网络已断开，请检查设置。");
                }
                Laya.Pool.recover("HttpRequest", httpRequest);
            });
            if (type == "get") {
                httpRequest.send(url);
                return;
            }
            httpRequest.send(url, data ? jsonStr : null, "post", "text");
        };
        HttpMgr.prototype.sendPostHttp = function (url, data, secces, fail, type, showParse) {
            var _this = this;
            if (data === void 0) { data = null; }
            if (secces === void 0) { secces = null; }
            if (fail === void 0) { fail = null; }
            if (type === void 0) { type = "post"; }
            if (showParse === void 0) { showParse = true; }
            console.log("url ->", url);
            var param;
            if (showParse) {
                param = this.getEncodeParam(data);
            }
            param = data;
            var httpRequest = Laya.Pool.getItemByClass("HttpRequest", Laya.HttpRequest);
            httpRequest.http.timeout = this.defaultTimeOut;
            httpRequest.http.ontimeout = function () {
                console.log('ontimeout');
                if (fail) {
                    fail(null);
                    TipsManager.getInstance().showDefaultTips("网络请求超时！");
                }
                httpRequest.http.ontimeout = null;
                Laya.Pool.recover("HttpRequest", httpRequest);
            };
            httpRequest.once(Laya.Event.COMPLETE, this, function (rev) {
                if (secces) {
                    secces(rev);
                }
                Laya.Pool.recover("HttpRequest", httpRequest);
            });
            httpRequest.once(Laya.Event.ERROR, this, function (e) {
                if (_this.printLog) {
                    var date = new Date();
                    console.log("HTTP Error :[" + date.toTimeString() + " time:" + date.getTime() + "]");
                }
                if (fail) {
                    fail(e);
                    TipsManager.getInstance().showDefaultTips("你的网络已断开，请检查设置。");
                }
                Laya.Pool.recover("HttpRequest", httpRequest);
            });
            httpRequest.send(url, param, type, "json");
        };
        HttpMgr.prototype.sendGetHttp = function (url, data, secces, fail, type, responseType) {
            var _this = this;
            if (data === void 0) { data = null; }
            if (secces === void 0) { secces = null; }
            if (fail === void 0) { fail = null; }
            if (type === void 0) { type = "get"; }
            console.log("url ->", url);
            var jsonStr = data ? JSON.stringify(data) : "null";
            var param = '';
            param = this.getEncodeParam(data);
            if (this.printLog) {
                var date = new Date();
                console.log("HTTP Send :[" + date.toTimeString() + " time:" + date.getTime() + "]  \n    send data: " + jsonStr);
            }
            var httpRequest = Laya.Pool.getItemByClass("HttpRequest", Laya.HttpRequest);
            httpRequest.http.timeout = this.defaultTimeOut;
            var httpRequests = httpRequest.http;
            httpRequests.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
            httpRequest.http.ontimeout = function () {
                console.log('ontimeout');
                if (fail) {
                    fail(null);
                    TipsManager.getInstance().showDefaultTips("网络请求超时！");
                }
                httpRequest.http.ontimeout = null;
                Laya.Pool.recover("HttpRequest", httpRequest);
            };
            httpRequest.once(Laya.Event.COMPLETE, this, function (rev) {
                if (secces) {
                    secces(JSON.parse(rev));
                }
                Laya.Pool.recover("HttpRequest", httpRequest);
            });
            httpRequest.once(Laya.Event.ERROR, this, function (e) {
                if (_this.printLog) {
                    var date = new Date();
                    console.log("HTTP Error :[" + date.toTimeString() + " time:" + date.getTime() + "]");
                }
                if (fail) {
                    fail(e);
                    TipsManager.getInstance().showDefaultTips("你的网络已断开，请检查设置。");
                }
                Laya.Pool.recover("HttpRequest", httpRequest);
            });
            httpRequest.send(url + param, param, type, "text");
        };
        HttpMgr.prototype.getEncodeParam = function (data) {
            var param = '';
            if (data) {
                if (data instanceof String) {
                    return data;
                }
                var arr = [];
                for (var obj in data) {
                    arr.push(obj + '=' + data[obj]);
                }
                param = arr.join('&');
            }
            return param;
        };
        return HttpMgr;
    }());

    var Utils$1 = (function () {
        function Utils() {
        }
        Utils.objToParams = function (obj) {
            if (obj == null)
                return '';
            var arr = [];
            for (var key in obj) {
                arr.push(key + '=' + obj[key]);
            }
            var str = arr.join('&');
            arr = null;
            return str;
        };
        return Utils;
    }());

    var PlatformDY = (function () {
        function PlatformDY() {
        }
        PlatformDY.prototype.getParams = function () {
            if (DeviceUtil.isWXMiniGame()) ;
            else if (DeviceUtil.isQQMiniGame()) ;
            else if (DeviceUtil.isTTMiniGame()) ;
            return '';
        };
        PlatformDY.getTTOpenidAndAuthorzia = function (obj) {
            var data = Utils$1.objToParams(obj);
            return new Promise(function (resolve) {
                HttpMgr$1.getInstance().sendHttpDY(PlatformDY.url + "&act=userinfo" + "&", obj, function (rev) {
                    var jsonRev = rev.data;
                    PlatformDY.openid = jsonRev.openid;
                    console.log("DY---> authorzia rev = " + rev);
                    resolve(jsonRev);
                }, null, "get");
            });
        };
        PlatformDY.getOpenidAndAuthorzia = function (obj) {
            return new Promise(function (resolve) {
                HttpMgr$1.getInstance().sendHttpDY(PlatformDY.url + "&act=userinfo&version=" + PlatformDY.version + "&", obj, function (rev) {
                    var jsonRev = rev.data;
                    PlatformDY.openid = jsonRev.openid;
                    console.log("DY---> authorzia rev = " + rev);
                    resolve(jsonRev);
                }, null, "get");
            });
        };
        PlatformDY.startGame = function () {
            return new Promise(function (resolve) {
                HttpMgr$1.getInstance().sendHttpDY(PlatformDY.url + "&act=index&version=" + PlatformDY.version + "&openid=" + PlatformDY.openid + "&", null, function (rev) {
                    var jsonRev = rev.data;
                    console.log("DY---> startGame rev = ", rev);
                    PlatformDY.nGameID = jsonRev.id;
                    resolve(jsonRev);
                }, null, "get");
            });
        };
        PlatformDY.endGame = function (obj) {
            return new Promise(function (resolve) {
                HttpMgr$1.getInstance().sendHttpDY(PlatformDY.url + "&act=end&version=" + PlatformDY.version + "&openid=" + PlatformDY.openid + "&", obj, function (rev) {
                    var jsonRev = rev.data;
                    console.log("DY---> endGame rev = ", rev);
                    resolve(jsonRev);
                }, null, "get");
            });
        };
        PlatformDY.clickGame = function (id) {
            HttpMgr$1.getInstance().sendHttpDY(PlatformDY.url + "&act=game&version=" + PlatformDY.version + "&id=" + id + "&openid=" + PlatformDY.openid, null, function (rev) {
                console.log("DY---> clickGame rev = ", rev);
            }, null, "get");
        };
        PlatformDY.toGame = function (id) {
            HttpMgr$1.getInstance().sendHttpDY(PlatformDY.url + "&act=cgame&version=" + PlatformDY.version + "&id=" + id + "&openid=" + PlatformDY.openid, null, function (rev) {
                console.log("DY---> toGame rev = ", rev);
            }, null, "get");
        };
        PlatformDY.delSameFlag = function (arr) {
            if (arr == null)
                return null;
            var len = arr.length;
            var obj = {};
            for (var i = 0; i < len; i++) {
                obj[arr[i].id] = arr[i];
            }
            var newArr = [];
            for (var id in obj) {
                newArr.push(obj[id]);
            }
            return newArr;
        };
        PlatformDY.getGameList = function () {
            return new Promise(function (resolve) {
                var url = PlatformDY.url + "&act=gamelist&version=" + PlatformDY.version + "&openid=" + PlatformDY.openid + "&v=" + Math.random();
                HttpMgr$1.getInstance().sendHttpDY(url, null, function (rev) {
                    console.log("DY---> getGameList rev = ", rev);
                    PlatformDY.bannerInfos = rev.data.banner;
                    PlatformDY.gameListInfos = PlatformDY.delSameFlag(rev.data.gamelist);
                    resolve(rev.data);
                }, null, "get");
            });
        };
        PlatformDY.initBoxView = function (adUnitId) {
            PlatformDY.boxView = platform.createAppBox(adUnitId);
            PlatformDY.boxView.load();
            PlatformDY.boxView.onClose(PlatformDY.boxViewClose);
        };
        PlatformDY.boxViewClose = function () {
            console.log("qq boxView close");
            if (PlatformDY.tempCloseBoxViewCallFunc) {
                PlatformDY.tempCloseBoxViewCallFunc.apply(PlatformDY.tempCloseBoxViewCallObj, PlatformDY.tempCloseBoxViewCallParam);
                PlatformDY.tempCloseBoxViewCallFunc = null;
            }
        };
        PlatformDY.refreshGameList = function () {
            PlatformDY.getGameList().then(function () {
                GameData.getInstance().weCatMiniIconsInfo = [];
                var nLen = 0;
                if (PlatformDY.gameListInfos)
                    nLen = PlatformDY.gameListInfos.length;
                for (var i = 0; i < nLen; ++i) {
                    var stData = new MoreGameIndex();
                    stData.ad_id = PlatformDY.gameListInfos[i].id;
                    stData.ad_img = PlatformDY.gameListInfos[i].img;
                    stData.name = PlatformDY.gameListInfos[i].title;
                    stData.ad_appid = PlatformDY.gameListInfos[i].appid;
                    stData.url = PlatformDY.gameListInfos[i].url;
                    GameData.getInstance().weCatMiniIconsInfo.push(stData);
                }
                console.log("GameData.getInstance().weCatMiniIconsInfo = ", GameData.getInstance().weCatMiniIconsInfo);
            });
        };
        PlatformDY.showBoxView = function () {
            return __awaiter(this, void 0, void 0, function () {
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            if (!PlatformDY.boxView) {
                                console.error("boxView not init!!!!!!!!!");
                            }
                            return [4, PlatformDY.boxView.show()];
                        case 1:
                            _a.sent();
                            return [2];
                    }
                });
            });
        };
        PlatformDY.url = "https://fx.xyxapi.com/home/index.php?webid=18";
        PlatformDY.qqUrl = "https://qq.xyxapi.com/home/jjxpy/index.php?webid=18";
        PlatformDY.ttUrl = "https://fxqq.xyxapi.com/home/?webid=18";
        PlatformDY.version = 1;
        PlatformDY.miniProgramList = [
            "wxab25c21f394059f7",
            "wxdc9df67ccf148dfd",
            "wxcc5f1dba1f408c14",
            "wx3bccea145a3d578d",
            "wx72b3922b76cf8ae2",
            "wx456ada1706d364d5",
            "wxc739584afdc7288e",
            "wxbb0b00982cbd1b4f",
            "wx99854f9305fcbab6"
        ];
        PlatformDY.qqMiniProgramList = [
            "wxab25c21f394059f7",
            "wxdc9df67ccf148dfd",
            "wxcc5f1dba1f408c14",
            "wx3bccea145a3d578d",
            "wx72b3922b76cf8ae2",
            "wx456ada1706d364d5",
            "wxc739584afdc7288e",
            "wxbb0b00982cbd1b4f",
            "wx99854f9305fcbab6"
        ];
        PlatformDY.ttMiniProgramList = [
            "tt82bbf4061d918bed",
            "tte34895f57c628a08",
            "tt73a80515ec8262b2",
            "tta2b2d40f3d98b327",
            "tt6fd51968f0ff74bf",
            "tt8e38f8851112953c",
            "ttb98ccf3126a6a5f4"
        ];
        PlatformDY.nGameID = 0;
        return PlatformDY;
    }());

    var MoreGameOperReqIndex = (function (_super) {
        __extends(MoreGameOperReqIndex, _super);
        function MoreGameOperReqIndex(data) {
            var _this = _super.call(this) || this;
            _this.className_key = "MoreGameOperReqIndex";
            _this.nIndex = data;
            _this.skin = "game/uiView/MoreGameOperReqIndex.json";
            _this.width = 300;
            _this.height = 380;
            return _this;
        }
        MoreGameOperReqIndex.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
            this.initView();
            this.addEvent();
        };
        MoreGameOperReqIndex.prototype.onRemoved = function () {
            this.removeEvent();
        };
        MoreGameOperReqIndex.prototype.setData = function (data) {
            this.nIndex = data;
            this.initView();
        };
        MoreGameOperReqIndex.prototype.initView = function () {
            if (this.nIndex < 0 || this.nIndex >= GameData.getInstance().weCatMiniIconsInfo.length) {
                this.nIndex = GameData.getInstance().weCatMiniIconsInfo.length - 1;
                if (this.nIndex < 0)
                    return;
            }
            this.lableGameName.text = GameData.getInstance().weCatMiniIconsInfo[this.nIndex].name;
            this.imageIcon.skin = GameData.getInstance().weCatMiniIconsInfo[this.nIndex].ad_img;
            var nCount = Utils.random(100000, 200000);
            this.lableCount.text = nCount.toString() + "人正在玩";
            this.stGameIndex = GameData.getInstance().weCatMiniIconsInfo[this.nIndex];
        };
        MoreGameOperReqIndex.prototype.addEvent = function () {
            this.on(Laya.Event.CLICK, this, this.gotoGame);
        };
        MoreGameOperReqIndex.prototype.removeEvent = function () {
            this.off(Laya.Event.CLICK, this, this.gotoGame);
        };
        MoreGameOperReqIndex.prototype.gotoGame = function () {
            if (!DeviceUtil.isWXMiniGame())
                return;
            if (BaseConst.infos.gameInfo.isDY) {
                PlatformDY.clickGame(this.stGameIndex.ad_id);
            }
            var self = this;
            var data = {
                appId: this.stGameIndex.ad_appid,
                path: this.stGameIndex.url,
                success: function () {
                    console.log("navigateToMiniProgram success");
                    if (BaseConst.infos.gameInfo.isDY) {
                        console.log("self.nIndex = ", self.nIndex);
                        PlatformDY.toGame(self.stGameIndex.ad_id);
                    }
                },
                fail: function (e) {
                    console.log("navigateToMiniProgram fail e =", e);
                }
            };
            platform.navigateToMiniProgram(data);
        };
        return MoreGameOperReqIndex;
    }(BaseSceneUISkin));

    var GameStateManager = (function () {
        function GameStateManager() {
            this.nLevelState = EnterGameType.enum_EnterGameType_GameHome;
        }
        GameStateManager.getInstance = function () {
            if (!this.instance) {
                this.instance = new GameStateManager();
            }
            return this.instance;
        };
        Object.defineProperty(GameStateManager.prototype, "levelState", {
            get: function () {
                return this.nLevelState;
            },
            set: function (nState) {
                this.nLevelState = nState;
            },
            enumerable: true,
            configurable: true
        });
        return GameStateManager;
    }());

    var WeCatMoreGameItemOne = (function (_super) {
        __extends(WeCatMoreGameItemOne, _super);
        function WeCatMoreGameItemOne(data) {
            var _this = _super.call(this) || this;
            _this.className_key = "WeCatMoreGameItemOne";
            _this.nIndex = data;
            _this.skin = "game/uiView/WeCatMoreGameItemOne.json";
            _this.width = 200;
            _this.height = 240;
            return _this;
        }
        WeCatMoreGameItemOne.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
            this.addEvent();
            this.initView();
        };
        WeCatMoreGameItemOne.prototype.onRemoved = function () {
            this.removeEvent();
        };
        WeCatMoreGameItemOne.prototype.setData = function (data) {
            this.nIndex = data;
            this.initView();
        };
        WeCatMoreGameItemOne.prototype.initView = function () {
            if (this.nIndex < 0 || this.nIndex >= GameData.getInstance().weCatMiniIconsInfo.length) {
                this.nIndex = GameData.getInstance().weCatMiniIconsInfo.length - 1;
                if (this.nIndex < 0)
                    return;
            }
            this.lableGameName.text = GameData.getInstance().weCatMiniIconsInfo[this.nIndex].name;
            this.imageIcon.skin = GameData.getInstance().weCatMiniIconsInfo[this.nIndex].ad_img;
            this.stGameIndex = GameData.getInstance().weCatMiniIconsInfo[this.nIndex];
        };
        WeCatMoreGameItemOne.prototype.addEvent = function () {
            if (!DeviceUtil.isTTMiniGame()) {
                this.on(Laya.Event.CLICK, this, this.gotoGame);
            }
        };
        WeCatMoreGameItemOne.prototype.removeEvent = function () {
            this.off(Laya.Event.CLICK, this, this.gotoGame);
        };
        WeCatMoreGameItemOne.prototype.gotoGame = function () {
            if (DeviceUtil.isWXMiniGame() || DeviceUtil.isTTMiniGame()) {
                if (BaseConst.infos.gameInfo.isDY) {
                    PlatformDY.clickGame(this.stGameIndex.ad_id);
                }
                var self_1 = this;
                var data = {
                    appId: this.stGameIndex.ad_appid,
                    path: this.stGameIndex.url,
                    success: function () {
                        console.log("navigateToMiniProgram success!");
                        if (BaseConst.infos.gameInfo.isDY) {
                            console.log("self.nIndex = ", self_1.nIndex);
                            PlatformDY.toGame(self_1.stGameIndex.ad_id);
                        }
                    },
                    fail: function (e) {
                        console.log("navigateToMiniProgram fail e =", e);
                        if (DeviceUtil.isWXMiniGame()) {
                            ViewManager.getInstance().showView(MoreGameOperRequestTwo);
                        }
                    }
                };
                platform.navigateToMiniProgram(data);
            }
        };
        return WeCatMoreGameItemOne;
    }(BaseSceneUISkin));

    var MiniEventConst = (function () {
        function MiniEventConst() {
        }
        MiniEventConst.HOME_SHARE = "h_sh";
        MiniEventConst.HOME_LEVEL = "h_l";
        MiniEventConst.HOME_SIGIN = "h_s";
        MiniEventConst.HOME_INVATE = "h_i";
        MiniEventConst.GAME_UP = "g_u";
        MiniEventConst.GAME_TIP = "g_t";
        MiniEventConst.GAME_PLAY_LEVEL = "g_p_l";
        MiniEventConst.GAMEOVER_SHARE = "g_s";
        MiniEventConst.GAMEOVER_GET = "g_g";
        MiniEventConst.GAMEOVER_AGIN = "g_a";
        return MiniEventConst;
    }());

    var FailEntryTwoView = (function (_super) {
        __extends(FailEntryTwoView, _super);
        function FailEntryTwoView() {
            var _this = _super.call(this) || this;
            _this.className_key = "FailEntryTwoView";
            _this.showEnterType = BasePopAnimationEnterType.SCALE_MODE_BACK;
            _this.scrollSizeMax = 50;
            _this.nTimePanel = 5000;
            _this.nGlodAddByWathcVideo = 200;
            _this.bIsRunning = false;
            _this.bRecvAward = false;
            _this.bShareAward = false;
            _this.bOpneBox2 = false;
            _this.skin = 'game/uiView/FailEntryTwoView.json';
            return _this;
        }
        FailEntryTwoView.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
            this.grp_center.width = this.width;
            this.grp_center.height = this.height;
            this.imageWeCatMoreGame.height = (this.height - this.imageWeCatMoreGame.y - (1920 - this.imageWeCatMoreGame.y - this.imageWeCatMoreGame.height));
            this.panelWeCatMoreGame.height = this.imageWeCatMoreGame.height - 110;
            this.bOpneBox2 = false;
        };
        FailEntryTwoView.prototype.onAddStage = function () {
            ViewChangeManager.getInstance().CommonView.addBtEvent();
            MiniManeger.instance.showInterstitialAd();
            this.initView();
            this.addEvent();
            MiniManeger.instance.showBannerAd();
            this.bOpneBox2 = false;
        };
        FailEntryTwoView.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.removeEvent();
            this.bIsRunning = false;
            this.bRecvAward = false;
            Laya.Tween.clearAll(this.imageBtShare);
            Laya.timer.clearAll(this);
        };
        FailEntryTwoView.prototype.addEvent = function () {
            this.imageBtRestart.on(Laya.Event.CLICK, this, this.failEntryTwoReStartGame);
            this.imageBtToHome.on(Laya.Event.CLICK, this, this.returnToGameHome);
            this.imageBtShare.on(Laya.Event.CLICK, this, this.failSharGame);
            this.imageRecv.on(Laya.Event.CLICK, this, this.onWatchVideoRecvAward);
            EventMgr.getInstance().addEvent(GameEvent.EVENT_FLAY_GLOD, this, this.flayGlodFileShare);
            if (DeviceUtil.isTTMiniGame()) {
                this.panelWeCatMoreGame.on(Laya.Event.CLICK, this, this.onShowMoreGame);
            }
        };
        FailEntryTwoView.prototype.removeEvent = function () {
            this.imageBtRestart.off(Laya.Event.CLICK, this, this.failEntryTwoReStartGame);
            this.imageBtToHome.off(Laya.Event.CLICK, this, this.returnToGameHome);
            this.imageBtShare.off(Laya.Event.CLICK, this, this.failSharGame);
            this.imageRecv.off(Laya.Event.CLICK, this, this.onWatchVideoRecvAward);
            EventMgr.getInstance().removeEvent(GameEvent.EVENT_FLAY_GLOD, this, this.flayGlodFileShare);
            if (DeviceUtil.isTTMiniGame()) {
                this.panelWeCatMoreGame.off(Laya.Event.CLICK, this, this.onShowMoreGame);
            }
        };
        FailEntryTwoView.prototype.failSharGame = function () {
            MiniManeger.instance.reportMonitorSome(MiniEventConst.GAMEOVER_SHARE, 1);
            SoundManager.getInstance().playEffect("button", 1);
            var self = this;
            if (DeviceUtil.isTTMiniGame()) {
                if (this.bShareAward) {
                    TipsManager.getInstance().showDefaultTips("已经领过奖励了哦");
                    return;
                }
                this.removeEvent();
                var info = platform.getSystemInfoSync();
                if (info.appName.toUpperCase() == 'DOUYIN') {
                    MiniManeger.instance.bFlagDouYin = true;
                    MiniManeger.instance.shareAppMessage({
                        sucFun: function () {
                            console.log("发布录制视频成功");
                            self.addEvent();
                            self.bShareAward = true;
                            TipsManager.getInstance().showDefaultTips('分享成功');
                            if (MiniManeger.instance.onShareVideoSuccess) {
                                return;
                            }
                            var nGlodCount = 50;
                            var stGameConfig = ConfigManager.getInstance().getGameConfigDataByID(18);
                            if (stGameConfig) {
                                nGlodCount = parseInt(stGameConfig.strValue);
                            }
                            PlayerDataManager.getInstance().AddGoods(GoodsType.enum_GoodsType_Glod, nGlodCount);
                            MiniManeger.instance.onShareVideoSuccess = true;
                            Laya.timer.once(1000, self, function () {
                                self.flayGlodFileShare();
                            });
                        },
                        failFun: function () {
                            self.addEvent();
                            console.log("发布录制视频失败");
                            TipsManager.getInstance().showDefaultTips('分享失败');
                        }
                    });
                }
                else {
                    MiniManeger.instance.onShareVideo({
                        successFun: function () {
                            console.log("发布录制视频成功");
                            self.addEvent();
                            self.bShareAward = true;
                            if (MiniManeger.instance.onShareVideoSuccess) {
                                return;
                            }
                            var nGlodCount = 50;
                            var stGameConfig = ConfigManager.getInstance().getGameConfigDataByID(18);
                            if (stGameConfig) {
                                nGlodCount = parseInt(stGameConfig.strValue);
                            }
                            PlayerDataManager.getInstance().AddGoods(GoodsType.enum_GoodsType_Glod, nGlodCount);
                            MiniManeger.instance.onShareVideoSuccess = true;
                            self.flayGlodFileShare();
                        },
                        failFun: function () {
                            console.log("发布录制视频失败");
                            self.addEvent();
                        }
                    });
                }
            }
            else {
                if (DeviceUtil.isWXMiniGame() && BaseConst.infos.gameInfo.isDY) {
                    MiniManeger.instance.shareAppMessage({
                        sucFun: function () {
                            ViewManager.getInstance().showView(MoreGameOperRequestTwo);
                        },
                        failFun: function () {
                            ViewManager.getInstance().showView(MoreGameOperRequestTwo);
                        }
                    });
                }
                else {
                    MiniManeger.instance.shareAppMessage();
                }
            }
        };
        FailEntryTwoView.prototype.failEntryTwoReStartGame = function () {
            var _this = this;
            MiniManeger.instance.reportMonitorSome(MiniEventConst.GAMEOVER_AGIN, 1);
            SoundManager.getInstance().playEffect("button", 1);
            var nSpCost = 1;
            var stGameConfig = ConfigManager.getInstance().getGameConfigDataByID(8);
            if (stGameConfig) {
                nSpCost = parseInt(stGameConfig.strValue);
            }
            var b = PlayerDataManager.getInstance().CheckGoods(GoodsType.enum_GoodsType_Sp, nSpCost);
            if (!b) {
                TipsManager.getInstance().showDefaultTips("体力不足");
                ViewChangeManager.getInstance().showBufferLoadingView();
                ResUtil.getIntance().loadGroups(["adsp"], function () { return __awaiter(_this, void 0, void 0, function () {
                    return __generator(this, function (_a) {
                        ViewManager.getInstance().showView(AddPsView);
                        ViewChangeManager.getInstance().hideBufferLoadingView();
                        return [2];
                    });
                }); });
                return;
            }
            PlayerDataManager.getInstance().subGoods(GoodsType.enum_GoodsType_Sp, nSpCost);
            ViewChangeManager.getInstance().restartGame(true);
            this.removeSelf();
        };
        FailEntryTwoView.prototype.returnToGameHome = function () {
            SoundManager.getInstance().playEffect("button", 1);
            if (BaseConst.infos.gameInfo.isDY) {
                MoreGameOperRequestTwo.toHome = true;
                ViewManager.getInstance().showView(MoreGameOperRequestTwo);
            }
            else {
                GameStateManager.getInstance().levelState = EnterGameType.enum_EnterGameType_GameHome;
                ViewChangeManager.getInstance().CurLevelBase.returnToGameHome();
            }
            this.removeSelf();
        };
        FailEntryTwoView.prototype.initPanel = function () {
            this.panelWeCatMoreGame.vScrollBarSkin = "";
            this.panelWeCatMoreGame.elasticEnabled = true;
            this.panelWeCatMoreGame.vScrollBar.elasticDistance = 200;
            this.panelWeCatMoreGame.vScrollBar.elasticBackTime = 100;
        };
        FailEntryTwoView.prototype.initView = function () {
            MiniManeger.instance.onShareVideoSuccess = false;
            this.initPlView();
            this.initPanel();
            this.proceMoreGame();
            this.bIsRunning = true;
            this.bRecvAward = false;
            this.bShareAward = false;
            var stGameConfig = ConfigManager.getInstance().getGameConfigDataByID(7);
            if (stGameConfig) {
                this.nGlodAddByWathcVideo = parseInt(stGameConfig.strValue);
            }
            BitmapLabelUtils.setLabel(this.spCount, this.nGlodAddByWathcVideo.toString(), "resource/assets/img/common/level_number1/level_number1_", 0, ".png", "left");
            var nCost = 1;
            stGameConfig = ConfigManager.getInstance().getGameConfigDataByID(8);
            if (stGameConfig) {
                nCost = parseInt(stGameConfig.strValue);
            }
            BitmapLabelUtils.setLabel(this.spCost, nCost.toString(), "resource/assets/img/common/level_number1/level_number1_", 0, ".png", "left");
            this.startimageBtShareAni();
        };
        FailEntryTwoView.prototype.startimageBtShareAni = function () {
            var _this = this;
            if (!this.bIsRunning) {
                return;
            }
            Laya.Tween.clearAll(this.imageBtShare);
            Laya.Tween.to(this.imageBtShare, { scaleX: 1.1, scaleY: 1.1 }, 300, Laya.Ease.sineOut, Laya.Handler.create(this, function (args) {
                Laya.Tween.to(_this.imageBtShare, { scaleX: 1, scaleY: 1 }, 300, Laya.Ease.sineOut, Laya.Handler.create(_this, function (args) {
                    Laya.timer.once(0, _this, _this.startimageBtShareAni);
                }));
            }));
        };
        FailEntryTwoView.prototype.onWatchVideoRecvAward = function () {
            var _this = this;
            if (this.bRecvAward) {
                TipsManager.getInstance().showDefaultTips("已经领过奖励了哦");
                return;
            }
            MiniManeger.instance.reportMonitorSome(MiniEventConst.GAMEOVER_GET, 1);
            this.imageRecv.off(Laya.Event.CLICK, this, this.onWatchVideoRecvAward);
            MiniManeger.instance.playViderAd({
                successFun: function () {
                    _this.addGlodReal();
                    _this.imageRecv.on(Laya.Event.CLICK, _this, _this.onWatchVideoRecvAward);
                },
                failFun: function () {
                    _this.imageRecv.on(Laya.Event.CLICK, _this, _this.onWatchVideoRecvAward);
                },
                errorFun: function () {
                    _this.imageRecv.on(Laya.Event.CLICK, _this, _this.onWatchVideoRecvAward);
                }
            });
        };
        FailEntryTwoView.prototype.addGlodReal = function () {
            this.bRecvAward = true;
            PlayerDataManager.getInstance().AddGoods(GoodsType.enum_GoodsType_Glod, this.nGlodAddByWathcVideo);
            this.flayGlodRecv();
        };
        FailEntryTwoView.prototype.initPlView = function () {
            if (DeviceUtil.isTTMiniGame()) {
                this.imageShareName.skin = "resource/assets/img/ui/success/failure_word_8.png";
                this.imageShareIcon.skin = "resource/assets/img/common/succeed_icon_3.png";
                this.imageShareName.y = 15;
                this.shareGlodCount.visible = true;
                this.ttGoodsType.visible = true;
                this.ttSpecial.visible = true;
                var nGlodCount = 50;
                var stGameConfig = ConfigManager.getInstance().getGameConfigDataByID(18);
                if (stGameConfig) {
                    nGlodCount = parseInt(stGameConfig.strValue);
                }
                BitmapLabelUtils.setLabel(this.shareGlodCount, nGlodCount.toString(), "resource/assets/img/common/level_number1/level_number1_", 0, ".png", "left");
            }
            else {
                this.imageShareName.skin = "resource/assets/img/ui/success/failure_word_2.png";
                this.imageShareIcon.skin = "resource/assets/img/common/common_icon_3.png";
                this.shareGlodCount.visible = false;
                this.ttGoodsType.visible = false;
                this.ttSpecial.visible = false;
                this.imageShareName.y = 38;
            }
        };
        FailEntryTwoView.prototype.flayGlodFileShare = function () {
            console.log("flayGlodFileShare");
            var pPoint = new Laya.Point();
            pPoint.x = this.ttGoodsType.x;
            pPoint.y = this.ttGoodsType.y;
            var stParent = this.ttGoodsType.parent;
            pPoint = stParent.localToGlobal(pPoint);
            AnimationManager.instance.flayGlod(pPoint.x, pPoint.y, 341, 105);
            console.log("pPoint.x = ", pPoint.x, "pPoint.y = ", pPoint.y);
        };
        FailEntryTwoView.prototype.flayGlodRecv = function () {
            console.log("flayGlodRecv");
            var pPoint = new Laya.Point();
            pPoint.x = this.imageGoodsType.x;
            pPoint.y = this.imageGoodsType.y;
            var stParent = this.imageGoodsType.parent;
            pPoint = stParent.localToGlobal(pPoint);
            AnimationManager.instance.flayGlod(pPoint.x, pPoint.y, 341, 105);
        };
        FailEntryTwoView.prototype.proceMoreGame = function () {
            if (DeviceUtil.isWXMiniGame() || DeviceUtil.isTTMiniGame()) {
                this.refreshWeCatMoreGame();
                this.imageWeCatMoreGame.visible = true;
            }
        };
        FailEntryTwoView.prototype.refreshWeCatMoreGame = function () {
            this.panelWeCatMoreGame;
            var nXStart = 70;
            var nYStart = 47;
            var aryInfo = [];
            var nCount = 3;
            aryInfo = this.getRandomIndex();
            var nLen = 8;
            if (DeviceUtil.isWXMiniGame()) {
                nLen = aryInfo.length;
            }
            else {
                nLen = 9;
                nLen = nLen < aryInfo.length ? nLen : aryInfo.length;
            }
            for (var i = 0; i < nLen; ++i) {
                var pWeCatMoreGameItemOne = this.panelWeCatMoreGame.getChildAt(i);
                if (pWeCatMoreGameItemOne) {
                    pWeCatMoreGameItemOne.setData(aryInfo[i]);
                }
                else {
                    pWeCatMoreGameItemOne = new WeCatMoreGameItemOne(aryInfo[i]);
                    var nAddX = Math.floor(i % nCount);
                    var nYAdd = Math.floor(i / nCount);
                    pWeCatMoreGameItemOne.x = nXStart + pWeCatMoreGameItemOne.width * nAddX + 70 * nAddX;
                    pWeCatMoreGameItemOne.y = nYStart + pWeCatMoreGameItemOne.height * nYAdd + 10 * nYAdd;
                    this.panelWeCatMoreGame.addChild(pWeCatMoreGameItemOne);
                    this.scrollSizeMax = 120 * (nYAdd + 1);
                    this.nTimePanel = 5000;
                }
            }
            if (BaseConst.infos.gameInfo.isDY && DeviceUtil.isWXMiniGame()) {
                PlatformDY.refreshGameList();
            }
            this.panelScrollAni();
        };
        FailEntryTwoView.prototype.getRandomIndex = function () {
            if (GameData.getInstance().weCatMiniIconsInfo.length - 1 < 0) {
                return [];
            }
            var nRandom = Utils.random(0, GameData.getInstance().weCatMiniIconsInfo.length - 1);
            var nCount = GameData.getInstance().weCatMiniIconsInfo.length % 3;
            if (nCount > 0) {
                nCount = 3 - nCount;
            }
            nCount = GameData.getInstance().weCatMiniIconsInfo.length + nCount;
            var aryInfo = [];
            for (var i = 0; i < nCount; ++i) {
                aryInfo.push(nRandom);
                nRandom += 1;
                if (nRandom >= GameData.getInstance().weCatMiniIconsInfo.length) {
                    nRandom = 0;
                }
            }
            return aryInfo;
        };
        FailEntryTwoView.prototype.onShowMoreGame = function () {
            MiniManeger.instance.showMoreGamesModal();
        };
        FailEntryTwoView.prototype.panelScrollAni = function () {
            var _this = this;
            Laya.Tween.clearAll(this.panelWeCatMoreGame.vScrollBar);
            Laya.timer.clearAll(this.panelScrollAni);
            Laya.Tween.to(this.panelWeCatMoreGame.vScrollBar, { value: this.scrollSizeMax }, this.nTimePanel, null, Laya.Handler.create(this, function (args) {
                Laya.Tween.to(_this.panelWeCatMoreGame.vScrollBar, { value: 0 }, _this.nTimePanel, null, Laya.Handler.create(_this, function (args) {
                    _this.scrollSizeMax = _this.panelWeCatMoreGame.vScrollBar.max;
                    Laya.timer.once(0, _this, _this.panelScrollAni);
                }));
            }));
        };
        return FailEntryTwoView;
    }(BaseSceneUISkinPopView));

    var MoreGameOperRequest = (function (_super) {
        __extends(MoreGameOperRequest, _super);
        function MoreGameOperRequest() {
            var _this = _super.call(this) || this;
            _this.className_key = "MoreGameOperRequest";
            _this.scrollSizeMax = 50;
            _this.nTimePanel = 5000;
            _this.skin = "game/uiView/MoreGameOperRequest.json";
            _this.nRandomIndxe = 0;
            return _this;
        }
        MoreGameOperRequest.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
            this.moreGamePanel.height = Laya.stage.height - (1920 - 1640);
            this.initView();
            this.addEvent();
        };
        MoreGameOperRequest.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
            MiniManeger.instance.hideBanner();
            if (this.isCreate) {
                this.initView();
                this.addEvent();
            }
        };
        MoreGameOperRequest.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.removeEvent();
            ViewChangeManager.getInstance().CommonView.visible = true;
        };
        MoreGameOperRequest.prototype.addEvent = function () {
            this.imageBtReturn.on(Laya.Event.CLICK, this, this.onBack);
            this.imageBtConGame.on(Laya.Event.CLICK, this, this.goToGame);
        };
        MoreGameOperRequest.prototype.removeEvent = function () {
            this.imageBtReturn.off(Laya.Event.CLICK, this, this.onBack);
            this.imageBtConGame.off(Laya.Event.CLICK, this, this.goToGame);
        };
        MoreGameOperRequest.prototype.initPanel = function () {
            this.moreGamePanel.vScrollBarSkin = '';
            this.moreGamePanel.elasticEnabled = true;
            this.moreGamePanel.vScrollBar.elasticDistance = 200;
            this.moreGamePanel.vScrollBar.elasticBackTime = 100;
        };
        MoreGameOperRequest.prototype.initView = function () {
            ViewChangeManager.getInstance().CommonView.visible = false;
            this.initPanel();
            var nXStart = 25;
            var nYStart = 20;
            var nCount = 3;
            var aryInfo = [];
            aryInfo = this.getRandomIndex();
            for (var i = 0; i < aryInfo.length; ++i) {
                var pWeCatMoreGameItemOne = this.moreGamePanel.getChildAt(i);
                if (pWeCatMoreGameItemOne) {
                    pWeCatMoreGameItemOne.setData(aryInfo[i]);
                }
                else {
                    pWeCatMoreGameItemOne = new MoreGameOperReqIndex(aryInfo[i]);
                    var nAddX = Math.floor(i % nCount);
                    var nYAdd = Math.floor(i / nCount);
                    pWeCatMoreGameItemOne.x = nXStart + 300 * nAddX + 70 * nAddX;
                    pWeCatMoreGameItemOne.y = nYStart + 380 * nYAdd + 10 * nYAdd;
                    this.moreGamePanel.addChild(pWeCatMoreGameItemOne);
                    this.nTimePanel = (nYAdd + 1) * 1000;
                }
            }
            this.panelScrollAni();
            if (BaseConst.infos.gameInfo.isDY) {
                PlatformDY.refreshGameList();
            }
        };
        MoreGameOperRequest.prototype.onBack = function () {
            this.onClickOper();
        };
        MoreGameOperRequest.prototype.goToGame = function () {
            this.onClickOper();
        };
        MoreGameOperRequest.prototype.getRandomIndex = function () {
            if (GameData.getInstance().weCatMiniIconsInfo.length - 1 < 0) {
                return [];
            }
            var nRandom = Utils.random(0, GameData.getInstance().weCatMiniIconsInfo.length - 1);
            var nCount = GameData.getInstance().weCatMiniIconsInfo.length % 3;
            if (nCount > 0) {
                nCount = 3 - nCount;
            }
            nCount = GameData.getInstance().weCatMiniIconsInfo.length + nCount;
            var aryInfo = [];
            for (var i = 0; i < nCount; ++i) {
                aryInfo.push(nRandom);
                nRandom += 1;
                if (nRandom >= GameData.getInstance().weCatMiniIconsInfo.length) {
                    nRandom = 0;
                }
            }
            return aryInfo;
        };
        MoreGameOperRequest.prototype.panelScrollAni = function () {
            var _this = this;
            Laya.Tween.clearAll(this.moreGamePanel.vScrollBar);
            Laya.timer.clearAll(this.panelScrollAni);
            console.log("max = ", this.moreGamePanel.vScrollBar.max, "min = ", this.moreGamePanel.vScrollBar.min);
            Laya.Tween.to(this.moreGamePanel.vScrollBar, { value: this.scrollSizeMax }, this.nTimePanel, null, Laya.Handler.create(this, function (args) {
                Laya.Tween.to(_this.moreGamePanel.vScrollBar, { value: 0 }, _this.nTimePanel, null, Laya.Handler.create(_this, function (args) {
                    _this.scrollSizeMax = _this.moreGamePanel.vScrollBar.max;
                    Laya.timer.once(0, _this, _this.panelScrollAni);
                }));
            }));
        };
        MoreGameOperRequest.prototype.onClickOper = function () {
            var _this = this;
            if (MoreGameOperRequest.bGotoNextGame) {
                var nSpCost = 1;
                var stGameConfig = ConfigManager.getInstance().getGameConfigDataByID(8);
                if (stGameConfig) {
                    nSpCost = parseInt(stGameConfig.strValue);
                }
                var b = PlayerDataManager.getInstance().CheckGoods(GoodsType.enum_GoodsType_Sp, nSpCost);
                if (!b) {
                    TipsManager.getInstance().showDefaultTips("体力不足");
                    ViewChangeManager.getInstance().showBufferLoadingView();
                    ResUtil.getIntance().loadGroups(["adsp"], function () { return __awaiter(_this, void 0, void 0, function () {
                        return __generator(this, function (_a) {
                            ViewManager.getInstance().showView(AddPsView);
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            return [2];
                        });
                    }); });
                    return;
                }
                if (DeviceUtil.isWXMiniGame()) {
                    if (!MiniManeger.instance.bPushMsgShowFlagTen && PlayerDataManager.getInstance().getCurLevelToChallenge() + 1 == 10) {
                        MiniManeger.instance.wxPushMsg();
                        MiniManeger.instance.bPushMsgShowFlagTen = true;
                    }
                }
                PlayerDataManager.getInstance().subGoods(GoodsType.enum_GoodsType_Sp, nSpCost);
                ViewChangeManager.getInstance().goToNextLevel();
            }
            else {
                if (MoreGameOperRequest.bOperFlag) {
                    if (MoreGameOperRequest.bSuccess) {
                        if (BaseConst.infos.gameInfo.openPsAward == 1 && ConfigManager.getInstance().getTreasureByCurLevel() == 1) {
                            ViewManager.getInstance().showView(SuccessfulEntryOneView);
                        }
                        else {
                            ViewManager.getInstance().showView(SuccessfulEntryThreeView);
                        }
                    }
                    else {
                        ViewManager.getInstance().showView(FailEntryTwoView);
                    }
                }
            }
            if (MoreGameOperRequest.toHome) {
                ViewChangeManager.getInstance().CurLevelBase.closeGameView();
                PlayerDataManager.getInstance().setCurLevel(PlayerDataManager.getInstance().getCurLevelMax());
                GameStateManager.getInstance().levelState = EnterGameType.enum_EnterGameType_GameHome;
                LevelManager.getInstance().createLevelScene(PlayerDataManager.getInstance().getCurLevelToChallenge());
            }
            this.removeSelf();
            MoreGameOperRequest.bOperFlag = false;
            MoreGameOperRequest.bSuccess = false;
            MoreGameOperRequest.bGotoNextGame = false;
        };
        MoreGameOperRequest.bOperFlag = false;
        MoreGameOperRequest.bSuccess = false;
        MoreGameOperRequest.toHome = false;
        MoreGameOperRequest.bGotoNextGame = false;
        return MoreGameOperRequest;
    }(BaseSceneUISkinPopView));

    var SuccessfulEntryThreeView = (function (_super) {
        __extends(SuccessfulEntryThreeView, _super);
        function SuccessfulEntryThreeView() {
            var _this = _super.call(this) || this;
            _this.className_key = "SuccessfulEntryThreeView";
            _this.showEnterType = BasePopAnimationEnterType.SCALE_MODE_BACK;
            _this.isShowBox = false;
            _this.scrollSizeMax = 50;
            _this.nTimePanel = 5000;
            _this.nGlodAdd = 50;
            _this.nGlodRadio = 4;
            _this.bIsRunning = false;
            _this.bRecvAward = false;
            _this.bOpneBox2 = false;
            _this.skin = 'game/uiView/SuccessfulEntryThreeView.json';
            return _this;
        }
        SuccessfulEntryThreeView.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
            this.grp_center.width = this.width;
            this.grp_center.height = this.height;
            this.imageWeCatMoreGame.height = (this.height - this.imageWeCatMoreGame.y - (1920 - this.imageWeCatMoreGame.y - this.imageWeCatMoreGame.height));
            this.panelWeCatMoreGame.height = this.imageWeCatMoreGame.height - 110;
            this.initView();
            this.addEvent();
        };
        SuccessfulEntryThreeView.prototype.onAddStage = function () {
            ViewChangeManager.getInstance().CommonView.addBtEvent();
            this.initView();
            this.addEvent();
            this.isShowBox = false;
            MiniManeger.instance.showBannerAd();
            MiniManeger.instance.showInterstitialAd();
        };
        SuccessfulEntryThreeView.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.removeEvent();
            this.bIsRunning = false;
            Laya.Tween.clearAll(this.imageBtShare);
            Laya.timer.clearAll(this);
            if (this.aniReal) {
                this.aniReal.stop();
                this.aniReal.removeSelf();
            }
        };
        SuccessfulEntryThreeView.prototype.initPanel = function () {
            this.panelWeCatMoreGame.vScrollBarSkin = "";
            this.panelWeCatMoreGame.elasticEnabled = true;
            this.panelWeCatMoreGame.vScrollBar.elasticDistance = 200;
            this.panelWeCatMoreGame.vScrollBar.elasticBackTime = 100;
        };
        SuccessfulEntryThreeView.prototype.initView = function () {
            this.bOpneBox2 = false;
            this.initPanel();
            this.proceMoreGame();
            MiniManeger.instance.onShareVideoSuccess = false;
            MiniManeger.instance.StopVideo();
            this.initPlView();
            SoundManager.getInstance().playEffect("win", 1);
            this.bRecvAward = false;
            if (!this.aniReal) {
                this.createSkeleton("resource/assets/img/ani/celebrate/celebrate.sk");
            }
            else {
                this.aniReal.play(0, false);
                this.grp_center.addChild(this.aniReal);
            }
            var nFlag = 1;
            var stGameConfig = ConfigManager.getInstance().getGameConfigDataByID(17);
            if (stGameConfig) {
                nFlag = parseInt(stGameConfig.strValue);
            }
            if (nFlag == 1) {
                this.spDouble.visible = true;
            }
            else {
                this.spDouble.visible = false;
            }
            this.bIsRunning = true;
            var pGameConfig = ConfigManager.getInstance().getGameConfigDataByID(12);
            if (pGameConfig) {
                this.nGlodAdd = parseInt(pGameConfig.strValue);
            }
            pGameConfig = ConfigManager.getInstance().getGameConfigDataByID(13);
            if (pGameConfig) {
                this.nGlodRadio = parseInt(pGameConfig.strValue);
                this.lableDesc.text = pGameConfig.strDesc;
            }
            BitmapLabelUtils.setLabel(this.spCost, this.nGlodRadio.toString(), "resource/assets/img/common/level_number1/level_number1_", 0, ".png", "left");
            var nCost = 1;
            pGameConfig = ConfigManager.getInstance().getGameConfigDataByID(8);
            if (pGameConfig) {
                nCost = parseInt(pGameConfig.strValue);
            }
            BitmapLabelUtils.setLabel(this.spCostPs, nCost.toString(), "resource/assets/img/common/level_number1/level_number1_", 0, ".png", "left");
            var bAddMore = this.nGlodAdd * this.nGlodRadio;
            BitmapLabelUtils.setLabel(this.spCountAddMore, bAddMore.toString(), "resource/assets/img/common/level_number1/level_number1_", 0, ".png", "left");
            if (this.spDouble.visible) {
                var nReal = this.nGlodAdd * this.nGlodRadio;
                BitmapLabelUtils.setLabel(this.spGlodAdd, nReal.toString(), "resource/assets/img/ui/success/succeed_number1/succeed_number1_", 0, ".png", "left");
            }
            else {
                BitmapLabelUtils.setLabel(this.spGlodAdd, this.nGlodAdd.toString(), "resource/assets/img/ui/success/succeed_number1/succeed_number1_", 0, ".png", "left");
            }
            this.startSuccessImageBtShareAni();
        };
        SuccessfulEntryThreeView.prototype.addEvent = function () {
            this.btLable.on(Laya.Event.CLICK, this, this.successfulEntryThreeNextLevel);
            this.imageBtToHome.on(Laya.Event.CLICK, this, this.returnToGameHome);
            this.imageBtShare.on(Laya.Event.CLICK, this, this.successShareGame);
            this.imageBtRestart.on(Laya.Event.CLICK, this, this.successReStart);
            this.imageRecv.on(Laya.Event.CLICK, this, this.successRecvAward);
            this.btDouble.on(Laya.Event.CLICK, this, this.onDoubleGlod);
            if (DeviceUtil.isTTMiniGame()) {
                this.panelWeCatMoreGame.on(Laya.Event.CLICK, this, this.onShowMoreGame);
            }
        };
        SuccessfulEntryThreeView.prototype.removeEvent = function () {
            this.btLable.off(Laya.Event.CLICK, this, this.successfulEntryThreeNextLevel);
            this.imageBtToHome.off(Laya.Event.CLICK, this, this.returnToGameHome);
            this.imageBtShare.off(Laya.Event.CLICK, this, this.successShareGame);
            this.imageBtRestart.off(Laya.Event.CLICK, this, this.successReStart);
            this.imageRecv.off(Laya.Event.CLICK, this, this.successRecvAward);
            this.btDouble.off(Laya.Event.CLICK, this, this.onDoubleGlod);
            if (DeviceUtil.isTTMiniGame()) {
                this.panelWeCatMoreGame.off(Laya.Event.CLICK, this, this.onShowMoreGame);
            }
        };
        SuccessfulEntryThreeView.prototype.onDoubleGlod = function () {
            SoundManager.getInstance().playEffect("button", 1);
            this.spDouble.visible = !this.spDouble.visible;
            if (this.spDouble.visible) {
                var nReal = this.nGlodAdd * this.nGlodRadio;
                BitmapLabelUtils.setLabel(this.spGlodAdd, nReal.toString(), "resource/assets/img/ui/success/succeed_number1/succeed_number1_", 0, ".png", "left");
            }
            else {
                BitmapLabelUtils.setLabel(this.spGlodAdd, this.nGlodAdd.toString(), "resource/assets/img/ui/success/succeed_number1/succeed_number1_", 0, ".png", "left");
            }
        };
        SuccessfulEntryThreeView.prototype.successShareGame = function () {
            SoundManager.getInstance().playEffect("button", 1);
            MiniManeger.instance.bFlagDouYin = false;
            if (DeviceUtil.isWXMiniGame() && BaseConst.infos.gameInfo.isDY) {
                MiniManeger.instance.shareAppMessage({
                    sucFun: function () {
                        ViewManager.getInstance().showView(MoreGameOperRequestTwo);
                    },
                    failFun: function () {
                        ViewManager.getInstance().showView(MoreGameOperRequestTwo);
                    }
                });
            }
            else {
                MiniManeger.instance.shareAppMessage();
            }
        };
        SuccessfulEntryThreeView.prototype.successReStart = function () {
            var _this = this;
            SoundManager.getInstance().playEffect("button", 1);
            var nSpCost = 1;
            var stGameConfig = ConfigManager.getInstance().getGameConfigDataByID(8);
            if (stGameConfig) {
                nSpCost = parseInt(stGameConfig.strValue);
            }
            var b = PlayerDataManager.getInstance().CheckGoods(GoodsType.enum_GoodsType_Sp, nSpCost);
            if (!b) {
                TipsManager.getInstance().showDefaultTips("体力不足");
                ViewChangeManager.getInstance().showBufferLoadingView();
                ResUtil.getIntance().loadGroups(["adsp"], function () { return __awaiter(_this, void 0, void 0, function () {
                    return __generator(this, function (_a) {
                        ViewManager.getInstance().showView(AddPsView);
                        ViewChangeManager.getInstance().hideBufferLoadingView();
                        return [2];
                    });
                }); });
                return;
            }
            PlayerDataManager.getInstance().subGoods(GoodsType.enum_GoodsType_Sp, nSpCost);
            ViewChangeManager.getInstance().restartGame(true);
            this.removeSelf();
        };
        SuccessfulEntryThreeView.prototype.successRecvAward = function () {
            var _this = this;
            var self = this;
            SoundManager.getInstance().playEffect("button", 1);
            if (DeviceUtil.isQQMiniGame() && !self.isShowBox && Math.random() < BaseConst.infos.gameInfo.succShowBox) {
                MiniManeger.instance.showBoxAd(function () {
                    self.isShowBox = true;
                });
                return;
            }
            if (this.bRecvAward) {
                this.successfulEntryThreeNextLevel();
                return;
            }
            if (this.spDouble.visible) {
                this.imageRecv.off(Laya.Event.CLICK, this, this.successRecvAward);
                MiniManeger.instance.playViderAd({
                    successFun: function () {
                        _this.sendAwardAfterWatchVideo();
                        _this.imageRecv.on(Laya.Event.CLICK, _this, _this.successRecvAward);
                    },
                    failFun: function () {
                        _this.imageRecv.on(Laya.Event.CLICK, _this, _this.successRecvAward);
                    },
                    errorFun: function () {
                        _this.imageRecv.on(Laya.Event.CLICK, _this, _this.successRecvAward);
                    }
                });
            }
            else {
                this.nGlodRadio = 1;
                this.sendAwardAfterWatchVideo();
            }
        };
        SuccessfulEntryThreeView.prototype.sendAwardAfterWatchVideo = function () {
            this.bRecvAward = true;
            this.flayGlodSuccess();
            var nGlodAddTemp = this.nGlodAdd * this.nGlodRadio;
            PlayerDataManager.getInstance().AddGoods(GoodsType.enum_GoodsType_Glod, nGlodAddTemp);
            this.successfulEntryThreeNextLevel();
        };
        SuccessfulEntryThreeView.prototype.successfulEntryThreeNextLevel = function () {
            var _this = this;
            var nSpCost = 1;
            var stGameConfig = ConfigManager.getInstance().getGameConfigDataByID(8);
            if (stGameConfig) {
                nSpCost = parseInt(stGameConfig.strValue);
            }
            var b = PlayerDataManager.getInstance().CheckGoods(GoodsType.enum_GoodsType_Sp, nSpCost);
            if (!b) {
                TipsManager.getInstance().showDefaultTips("体力不足");
                ViewChangeManager.getInstance().showBufferLoadingView();
                ResUtil.getIntance().loadGroups(["adsp"], function () { return __awaiter(_this, void 0, void 0, function () {
                    return __generator(this, function (_a) {
                        AddPsView.bShowMoreGame = true;
                        ViewManager.getInstance().showView(AddPsView);
                        ViewChangeManager.getInstance().hideBufferLoadingView();
                        return [2];
                    });
                }); });
                return;
            }
            else {
                this.removeEvent();
                if (DeviceUtil.isWXMiniGame()) {
                    if (!this.bRecvAward) {
                        Laya.timer.once(1000, this, function () {
                            MoreGameOperRequest.bGotoNextGame = true;
                            ViewManager.getInstance().showView(MoreGameOperRequest);
                            _this.removeSelf();
                        });
                    }
                    else {
                        MoreGameOperRequest.bGotoNextGame = true;
                        ViewManager.getInstance().showView(MoreGameOperRequest);
                        this.removeSelf();
                    }
                }
                else {
                    PlayerDataManager.getInstance().subGoods(GoodsType.enum_GoodsType_Sp, nSpCost);
                    ViewChangeManager.getInstance().goToNextLevel();
                    this.removeSelf();
                }
            }
        };
        SuccessfulEntryThreeView.prototype.returnToGameHome = function () {
            SoundManager.getInstance().playEffect("button", 1);
            if (BaseConst.infos.gameInfo.isDY) {
                MoreGameOperRequestTwo.toHome = true;
                ViewManager.getInstance().showView(MoreGameOperRequestTwo);
                this.removeSelf();
                return;
            }
            ViewChangeManager.getInstance().CurLevelBase.closeGameView();
            PlayerDataManager.getInstance().setCurLevel(PlayerDataManager.getInstance().getCurLevelMax());
            GameStateManager.getInstance().levelState = EnterGameType.enum_EnterGameType_GameHome;
            LevelManager.getInstance().createLevelScene(PlayerDataManager.getInstance().getCurLevelToChallenge());
            this.removeSelf();
        };
        SuccessfulEntryThreeView.prototype.startSuccessImageBtShareAni = function () {
            var _this = this;
            if (!this.bIsRunning) {
                return;
            }
            Laya.Tween.clearAll(this.imageBtShare);
            Laya.Tween.to(this.imageBtShare, { scaleX: 1.1, scaleY: 1.1 }, 300, Laya.Ease.sineOut, Laya.Handler.create(this, function (args) {
                Laya.Tween.to(_this.imageBtShare, { scaleX: 1, scaleY: 1 }, 300, Laya.Ease.sineOut, Laya.Handler.create(_this, function (args) {
                    Laya.timer.once(0, _this, _this.startSuccessImageBtShareAni);
                }));
            }));
        };
        SuccessfulEntryThreeView.prototype.flayGlodSuccess = function () {
            var stPoint = new Laya.Point();
            stPoint.x = this.imageGoodsTypeUp.x;
            stPoint.y = this.imageGoodsTypeUp.y;
            var stBoxParent = this.imageGoodsTypeUp.parent;
            stPoint = stBoxParent.localToGlobal(stPoint);
            AnimationManager.instance.flayGlod(stPoint.x, stPoint.y, 341, 105);
        };
        SuccessfulEntryThreeView.prototype.createSkeleton = function (url) {
            return __awaiter(this, void 0, void 0, function () {
                var _this = this;
                return __generator(this, function (_a) {
                    return [2, new Promise(function (resolve) {
                            AnimationManager.instance.showSkeletonAnimation(url, function (boomAnimation) {
                                _this.aniReal = boomAnimation;
                                _this.aniReal.player.playbackRate = 1;
                                _this.aniReal.autoSize = true;
                                _this.aniReal.scale(1, 1);
                                _this.aniReal.play(0, false);
                                _this.aniReal.x = _this.grp_center.width / 2;
                                _this.aniReal.y = _this.grp_center.height / 2;
                                _this.grp_center.addChild(_this.aniReal);
                                resolve(boomAnimation);
                            }, 1);
                        })];
                });
            });
        };
        SuccessfulEntryThreeView.prototype.initPlView = function () {
            if (DeviceUtil.isTTMiniGame()) {
                this.imageShareGameName.skin = "resource/assets/img/ui/success/failure_word_2.png";
                this.imageShareIcon.skin = "resource/assets/img/common/common_icon_3.png";
                this.shareGlodCount.visible = false;
                this.ttGoodsType.visible = false;
                this.ttSpecial.visible = false;
                this.imageShareGameName.y = 38;
            }
            else {
                this.imageShareGameName.skin = "resource/assets/img/ui/success/failure_word_2.png";
                this.imageShareIcon.skin = "resource/assets/img/common/common_icon_3.png";
                this.shareGlodCount.visible = false;
                this.ttGoodsType.visible = false;
                this.ttSpecial.visible = false;
                this.imageShareGameName.y = 38;
            }
        };
        SuccessfulEntryThreeView.prototype.flayGlodRecv = function () {
            console.log("flayGlodRecv");
            var pPoint = new Laya.Point();
            pPoint.x = this.ttGoodsType.x;
            pPoint.y = this.ttGoodsType.y;
            var stParent = this.ttGoodsType.parent;
            pPoint = stParent.localToGlobal(pPoint);
            AnimationManager.instance.flayGlod(pPoint.x, pPoint.y, 341, 105);
        };
        SuccessfulEntryThreeView.prototype.proceMoreGame = function () {
            if (DeviceUtil.isWXMiniGame() || DeviceUtil.isTTMiniGame()) {
                this.refreshWeCatMoreGame();
                this.imageWeCatMoreGame.visible = true;
            }
        };
        SuccessfulEntryThreeView.prototype.refreshWeCatMoreGame = function () {
            this.panelWeCatMoreGame;
            var nXStart = 53;
            var nYStart = 47;
            var aryInfo = [];
            var nCount = 3;
            aryInfo = this.getRandomIndex();
            var nLen = 8;
            if (DeviceUtil.isWXMiniGame()) {
                nLen = aryInfo.length;
            }
            else {
                nLen = 9;
                nLen = nLen < aryInfo.length ? nLen : aryInfo.length;
            }
            for (var i = 0; i < nLen; ++i) {
                var pWeCatMoreGameItemOne = this.panelWeCatMoreGame.getChildAt(i);
                if (pWeCatMoreGameItemOne) {
                    pWeCatMoreGameItemOne.setData(aryInfo[i]);
                }
                else {
                    pWeCatMoreGameItemOne = new WeCatMoreGameItemOne(aryInfo[i]);
                    var nAddX = Math.floor(i % nCount);
                    var nYAdd = Math.floor(i / nCount);
                    pWeCatMoreGameItemOne.x = nXStart + pWeCatMoreGameItemOne.width * nAddX + 70 * nAddX;
                    pWeCatMoreGameItemOne.y = nYStart + pWeCatMoreGameItemOne.height * nYAdd + 10 * nYAdd;
                    this.panelWeCatMoreGame.addChild(pWeCatMoreGameItemOne);
                    this.scrollSizeMax = 180 * (nYAdd + 1);
                    this.nTimePanel = (nYAdd + 1) * 1000;
                }
            }
            if (BaseConst.infos.gameInfo.isDY && DeviceUtil.isWXMiniGame()) {
                PlatformDY.refreshGameList();
            }
            this.panelScrollAni();
        };
        SuccessfulEntryThreeView.prototype.getRandomIndex = function () {
            if (GameData.getInstance().weCatMiniIconsInfo.length - 1 < 0) {
                return [];
            }
            var nRandom = Utils.random(0, GameData.getInstance().weCatMiniIconsInfo.length - 1);
            var nCount = GameData.getInstance().weCatMiniIconsInfo.length % 3;
            if (nCount > 0) {
                nCount = 3 - nCount;
            }
            nCount = GameData.getInstance().weCatMiniIconsInfo.length + nCount;
            var aryInfo = [];
            for (var i = 0; i < nCount; ++i) {
                aryInfo.push(nRandom);
                nRandom += 1;
                if (nRandom >= GameData.getInstance().weCatMiniIconsInfo.length) {
                    nRandom = 0;
                }
            }
            return aryInfo;
        };
        SuccessfulEntryThreeView.prototype.onShowMoreGame = function () {
            MiniManeger.instance.showMoreGamesModal();
        };
        SuccessfulEntryThreeView.prototype.panelScrollAni = function () {
            var _this = this;
            Laya.Tween.clearAll(this.panelWeCatMoreGame.vScrollBar);
            Laya.timer.clearAll(this.panelScrollAni);
            Laya.Tween.to(this.panelWeCatMoreGame.vScrollBar, { value: this.scrollSizeMax }, this.nTimePanel, null, Laya.Handler.create(this, function (args) {
                Laya.Tween.to(_this.panelWeCatMoreGame.vScrollBar, { value: 0 }, _this.nTimePanel, null, Laya.Handler.create(_this, function (args) {
                    _this.scrollSizeMax = _this.panelWeCatMoreGame.vScrollBar.max;
                    Laya.timer.once(0, _this, _this.panelScrollAni);
                }));
            }));
        };
        return SuccessfulEntryThreeView;
    }(BaseSceneUISkinPopView));

    var SuccessfulEntryOneView = (function (_super) {
        __extends(SuccessfulEntryOneView, _super);
        function SuccessfulEntryOneView() {
            var _this = _super.call(this) || this;
            _this.className_key = "SuccessfulEntryOneView";
            _this.showEnterType = BasePopAnimationEnterType.SCALE_MODE_BACK;
            _this.nTimeDown = 5;
            _this.nCountMax = 5;
            _this.nPsAdd = 1;
            _this.nAddPerOne = 0;
            _this.nCurCount = 0;
            _this.bTimeOver = false;
            _this.bAniRunning = false;
            _this.bFirst = true;
            _this.nTimeOverTemp = 0;
            _this.nLastClickTime = 0;
            _this.skin = "game/uiView/SuccessfulEntryOneView.json";
            return _this;
        }
        SuccessfulEntryOneView.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        SuccessfulEntryOneView.prototype.onAddStage = function () {
            MiniManeger.instance.showInterstitialAd();
            ViewChangeManager.getInstance().CommonView.visible = false;
            this.initView();
            this.addEvent();
            this.imageBt.bottom = 0;
            this.moveBtnTween = null;
            MiniManeger.instance.hideBanner();
        };
        SuccessfulEntryOneView.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.removeEvent();
            this.bFirst = false;
            this.bAniRunning = false;
            Laya.Tween.clearAll(this.imageHand);
            Laya.timer.clearAll(this);
            ViewChangeManager.getInstance().CommonView.visible = true;
        };
        SuccessfulEntryOneView.prototype.initView = function () {
            SoundManager.getInstance().playEffect("win", 1);
            this.nTimeDown = 5;
            this.nCountMax = 5;
            this.nPsAdd = 1;
            this.nAddPerOne = 0;
            this.nCurCount = 0;
            this.bTimeOver = false;
            this.bAniRunning = true;
            this.bFirst = true;
            var stGameConfig = ConfigManager.getInstance().getGameConfigDataByID(9);
            if (stGameConfig) {
                this.nTimeDown = parseInt(stGameConfig.strValue);
            }
            BitmapLabelUtils.setLabel(this.spTimeDown, this.nTimeDown.toString(), "resource/assets/img/ui/success/succeed_number2/succeed_number2_", 0, ".png", "center");
            stGameConfig = ConfigManager.getInstance().getGameConfigDataByID(10);
            if (stGameConfig) {
                this.nCountMax = parseInt(stGameConfig.strValue);
            }
            stGameConfig = ConfigManager.getInstance().getGameConfigDataByID(11);
            if (stGameConfig) {
                this.nPsAdd = parseInt(stGameConfig.strValue);
            }
            stGameConfig = ConfigManager.getInstance().getGameConfigDataByID(14);
            if (stGameConfig) {
                this.nTimeOverTemp = parseInt(stGameConfig.strValue);
            }
            this.nAddPerOne = Math.floor(870 / this.nCountMax);
            this.imageParValue.width = 0;
            this.openTimeDown();
            this.openHandAni();
        };
        SuccessfulEntryOneView.prototype.addEvent = function () {
            this.imageBt.on(Laya.Event.CLICK, this, this.imageBtClickRecvAward);
        };
        SuccessfulEntryOneView.prototype.removeEvent = function () {
            this.imageBt.off(Laya.Event.CLICK, this, this.imageBtClickRecvAward);
        };
        SuccessfulEntryOneView.prototype.imageBtClickRecvAward = function () {
            SoundManager.getInstance().playEffect("button", 1);
            if (this.bTimeOver) {
                return;
            }
            this.nCurCount += 1;
            var nWithCur = this.nCurCount * this.nAddPerOne;
            this.imageParValue.width = nWithCur;
            if (this.nCurCount >= this.nCountMax) {
                Laya.timer.clear(this, this.timeDownView);
                this.procLogicOver();
            }
            if (this.nCurCount > 7) {
                MiniManeger.instance.showBannerAd();
                if (!this.moveBtnTween) {
                    this.moveBtnTween = Laya.Tween.to(this.imageBt, { bottom: 250 }, 500);
                }
            }
            this.nLastClickTime = GameLogicProcessingManager.GetCurTime();
        };
        SuccessfulEntryOneView.prototype.openTimeDown = function () {
            BitmapLabelUtils.setLabel(this.spTimeDown, this.nTimeDown.toString(), "resource/assets/img/ui/success/succeed_number2/succeed_number2_", 0, ".png", "center");
            Laya.timer.loop(1000, this, this.timeDownView);
            Laya.timer.loop(this.nTimeOverTemp, this, this.subCount);
        };
        SuccessfulEntryOneView.prototype.subCount = function () {
            this.nCurCount -= 1;
            this.nCurCount = this.nCurCount < 0 ? 0 : this.nCurCount;
            var nWithCur = this.nCurCount * this.nAddPerOne;
            this.imageParValue.width = nWithCur;
        };
        SuccessfulEntryOneView.prototype.timeDownView = function () {
            this.nTimeDown -= 1;
            var nTemp = this.nTimeDown;
            nTemp = nTemp < 0 ? 0 : nTemp;
            BitmapLabelUtils.setLabel(this.spTimeDown, nTemp.toString(), "resource/assets/img/ui/success/succeed_number2/succeed_number2_", 0, ".png", "center");
            if (this.nTimeDown < 0) {
                this.bTimeOver = true;
                this.procLogicOver();
            }
        };
        SuccessfulEntryOneView.prototype.procLogicOver = function () {
            Laya.timer.clear(this, this.timeDownView);
            if (this.bTimeOver) {
                TipsManager.getInstance().showDefaultTips("领取失败");
                ViewManager.getInstance().showView(SuccessfulEntryThreeView);
                this.removeSelf();
                return;
            }
            if (this.nCurCount >= this.nCountMax) {
                PlayerDataManager.getInstance().AddGoods(GoodsType.enum_GoodsType_Sp, this.nPsAdd);
                TipsManager.getInstance().showDefaultTips("体力+" + this.nPsAdd.toString());
                ViewManager.getInstance().showView(SuccessfulEntryThreeView);
                this.removeSelf();
            }
        };
        SuccessfulEntryOneView.prototype.openHandAni = function () {
            var _this = this;
            if (!this.bAniRunning) {
                return;
            }
            var yTemp = this.imageHand.y;
            Laya.Tween.clearAll(this.imageHand);
            Laya.Tween.to(this.imageHand, { y: yTemp - 25 }, 300, null, Laya.Handler.create(this, function (args) {
                Laya.Tween.to(_this.imageHand, { y: yTemp }, 300, null, Laya.Handler.create(_this, function (args) {
                    Laya.timer.once(0, _this, _this.openHandAni);
                }));
            }));
        };
        return SuccessfulEntryOneView;
    }(BaseSceneUISkinPopView));

    var MoreGameOperRequestTwo = (function (_super) {
        __extends(MoreGameOperRequestTwo, _super);
        function MoreGameOperRequestTwo() {
            var _this = _super.call(this) || this;
            _this.className_key = "MoreGameOperRequestTwo";
            _this.scrollSizeMax = 50;
            _this.nTimePanel = 5000;
            _this.skin = "game/uiView/MoreGameOperRequestTwo.json";
            _this.nRandomIndxe = 0;
            _this.aryCatMiniIconsInfoTemp = [];
            return _this;
        }
        MoreGameOperRequestTwo.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
            this.moreGamePanel.height = Laya.stage.height - (1920 - 1440);
            this.initView();
            this.addEvent();
        };
        MoreGameOperRequestTwo.prototype.onAddStage = function () {
            var _this = this;
            _super.prototype.onAddStage.call(this);
            MiniManeger.instance.hideBanner();
            if (this.isCreate) {
                this.initView();
                this.addEvent();
                this.imageBtReturn.visible = false;
                Laya.timer.once(3000, this, function () {
                    _this.imageBtReturn.visible = true;
                });
                MoreGameOperRequestTwo.isOpen = true;
            }
        };
        MoreGameOperRequestTwo.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.removeEvent();
            ViewChangeManager.getInstance().CommonView.visible = true;
            MoreGameOperRequestTwo.isOpen = false;
        };
        MoreGameOperRequestTwo.prototype.addEvent = function () {
            this.imageBtReturn.on(Laya.Event.CLICK, this, this.onBack);
            this.imageBtConGame.on(Laya.Event.CLICK, this, this.goToGame);
        };
        MoreGameOperRequestTwo.prototype.removeEvent = function () {
            this.imageBtReturn.off(Laya.Event.CLICK, this, this.onBack);
            this.imageBtConGame.off(Laya.Event.CLICK, this, this.goToGame);
        };
        MoreGameOperRequestTwo.prototype.initPanel = function () {
            this.moreGamePanel.vScrollBarSkin = '';
            this.moreGamePanel.elasticEnabled = true;
            this.moreGamePanel.vScrollBar.elasticDistance = 200;
            this.moreGamePanel.vScrollBar.elasticBackTime = 100;
        };
        MoreGameOperRequestTwo.prototype.initView = function () {
            this.aryCatMiniIconsInfoTemp = [];
            this.aryCatMiniIconsInfoTemp = GameData.getInstance().weCatMiniIconsInfo;
            ViewChangeManager.getInstance().CommonView.visible = false;
            this.initPanel();
            var nXStart = 25;
            var nYStart = 20;
            var nCount = 3;
            var aryInfo = [];
            aryInfo = this.getRandomIndex();
            for (var i = 0; i < aryInfo.length; ++i) {
                var pWeCatMoreGameItemOne = this.moreGamePanel.getChildAt(i);
                if (pWeCatMoreGameItemOne) {
                    pWeCatMoreGameItemOne.setData(aryInfo[i]);
                }
                else {
                    pWeCatMoreGameItemOne = new MoreGameOperReqIndex(aryInfo[i]);
                    var nAddX = Math.floor(i % nCount);
                    var nYAdd = Math.floor(i / nCount);
                    pWeCatMoreGameItemOne.x = nXStart + 300 * nAddX + 70 * nAddX;
                    pWeCatMoreGameItemOne.y = nYStart + 380 * nYAdd + 10 * nYAdd;
                    this.moreGamePanel.addChild(pWeCatMoreGameItemOne);
                    this.nTimePanel = (nYAdd + 1) * 1000;
                }
            }
            this.panelScrollAni();
            var self = this;
            if (!self.guessLike && DeviceUtil.isWXMiniGame() && BaseConst.infos.gameInfo.openPsAward == 1) {
                MiniManeger.instance.createGuessLike(self).then(function (guessLike) {
                    console.log("show guessLike");
                    if (!guessLike) {
                        console.log("show guessLike error！");
                        return;
                    }
                    self.guessLike = guessLike;
                    self.guessLike.x = (Laya.stage.width - self.guessLike.width) / 2;
                    self.guessLike.y = 44;
                });
            }
            if (BaseConst.infos.gameInfo.isDY) {
                PlatformDY.refreshGameList();
            }
        };
        MoreGameOperRequestTwo.prototype.onBack = function () {
            this.onClickOper();
        };
        MoreGameOperRequestTwo.prototype.goToGame = function () {
            if (this.aryCatMiniIconsInfoTemp.length <= 0) {
                return;
            }
            this.nRandomIndxe = Utils.random(0, this.aryCatMiniIconsInfoTemp.length - 1);
            if (BaseConst.infos.gameInfo.isDY) {
                PlatformDY.clickGame(this.aryCatMiniIconsInfoTemp[this.nRandomIndxe].ad_id);
            }
            var self = this;
            var data = {
                appId: this.aryCatMiniIconsInfoTemp[self.nRandomIndxe].ad_appid,
                path: this.aryCatMiniIconsInfoTemp[self.nRandomIndxe].url,
                success: function () {
                    console.log("navigateToMiniProgram success");
                    if (BaseConst.infos.gameInfo.isDY) {
                        console.log("self.nIndex = ", self.nRandomIndxe);
                        PlatformDY.toGame(this.aryCatMiniIconsInfoTemp[self.nRandomIndxe].ad_id);
                    }
                },
                fail: function (e) {
                    console.log("navigateToMiniProgram fail e =", e);
                }
            };
            platform.navigateToMiniProgram(data);
        };
        MoreGameOperRequestTwo.prototype.getRandomIndex = function () {
            if (GameData.getInstance().weCatMiniIconsInfo.length - 1 < 0) {
                return [];
            }
            var nRandom = Utils.random(0, GameData.getInstance().weCatMiniIconsInfo.length - 1);
            var nCount = GameData.getInstance().weCatMiniIconsInfo.length % 3;
            if (nCount > 0) {
                nCount = 3 - nCount;
            }
            nCount = GameData.getInstance().weCatMiniIconsInfo.length + nCount;
            var aryInfo = [];
            for (var i = 0; i < nCount; ++i) {
                aryInfo.push(nRandom);
                nRandom += 1;
                if (nRandom >= GameData.getInstance().weCatMiniIconsInfo.length) {
                    nRandom = 0;
                }
            }
            return aryInfo;
        };
        MoreGameOperRequestTwo.prototype.panelScrollAni = function () {
            var _this = this;
            Laya.Tween.clearAll(this.moreGamePanel.vScrollBar);
            Laya.timer.clearAll(this.panelScrollAni);
            console.log("max = ", this.moreGamePanel.vScrollBar.max, "min = ", this.moreGamePanel.vScrollBar.min);
            Laya.Tween.to(this.moreGamePanel.vScrollBar, { value: this.scrollSizeMax }, this.nTimePanel, null, Laya.Handler.create(this, function (args) {
                Laya.Tween.to(_this.moreGamePanel.vScrollBar, { value: 0 }, _this.nTimePanel, null, Laya.Handler.create(_this, function (args) {
                    _this.scrollSizeMax = _this.moreGamePanel.vScrollBar.max;
                    Laya.timer.once(0, _this, _this.panelScrollAni);
                }));
            }));
        };
        MoreGameOperRequestTwo.prototype.onClickOper = function () {
            var _this = this;
            if (MoreGameOperRequestTwo.bGotoNextGame) {
                var nSpCost = 1;
                var stGameConfig = ConfigManager.getInstance().getGameConfigDataByID(8);
                if (stGameConfig) {
                    nSpCost = parseInt(stGameConfig.strValue);
                }
                var b = PlayerDataManager.getInstance().CheckGoods(GoodsType.enum_GoodsType_Sp, nSpCost);
                if (!b) {
                    TipsManager.getInstance().showDefaultTips("体力不足");
                    ViewChangeManager.getInstance().showBufferLoadingView();
                    ResUtil.getIntance().loadGroups(["adsp"], function () { return __awaiter(_this, void 0, void 0, function () {
                        return __generator(this, function (_a) {
                            ViewManager.getInstance().showView(AddPsView);
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            return [2];
                        });
                    }); });
                    return;
                }
                PlayerDataManager.getInstance().subGoods(GoodsType.enum_GoodsType_Sp, nSpCost);
                ViewChangeManager.getInstance().goToNextLevel();
            }
            else {
                if (MoreGameOperRequestTwo.bOperFlag) {
                    if (MoreGameOperRequestTwo.bSuccess) {
                        if (BaseConst.infos.gameInfo.openPsAward == 1 && ConfigManager.getInstance().getTreasureByCurLevel() == 1) {
                            ViewManager.getInstance().showView(SuccessfulEntryOneView);
                        }
                        else {
                            ViewManager.getInstance().showView(SuccessfulEntryThreeView);
                        }
                    }
                    else {
                        ViewManager.getInstance().showView(FailEntryTwoView);
                    }
                }
            }
            if (MoreGameOperRequestTwo.toHome) {
                ViewChangeManager.getInstance().CurLevelBase.closeGameView();
                PlayerDataManager.getInstance().setCurLevel(PlayerDataManager.getInstance().getCurLevelMax());
                GameStateManager.getInstance().levelState = EnterGameType.enum_EnterGameType_GameHome;
                LevelManager.getInstance().createLevelScene(PlayerDataManager.getInstance().getCurLevelToChallenge());
            }
            this.removeSelf();
            MoreGameOperRequestTwo.bOperFlag = false;
            MoreGameOperRequestTwo.bSuccess = false;
            MoreGameOperRequestTwo.bGotoNextGame = false;
            MoreGameOperRequestTwo.toHome = false;
        };
        MoreGameOperRequestTwo.bOperFlag = false;
        MoreGameOperRequestTwo.bSuccess = false;
        MoreGameOperRequestTwo.toHome = false;
        MoreGameOperRequestTwo.bGotoNextGame = false;
        MoreGameOperRequestTwo.isOpen = false;
        return MoreGameOperRequestTwo;
    }(BaseSceneUISkinPopView));

    var GuessLikeItem = (function (_super) {
        __extends(GuessLikeItem, _super);
        function GuessLikeItem(skin, itemData) {
            var _this = _super.call(this) || this;
            _this.className_key = "GuessLikeItem";
            _this.itemData_ = itemData;
            _this.skin = skin;
            return _this;
        }
        GuessLikeItem.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
            this.on(Laya.Event.CLICK, this, this.click);
            this.dataChange(this.itemData_);
        };
        GuessLikeItem.prototype.onEnabled = function () {
        };
        GuessLikeItem.prototype.dataChange = function (data) {
            this.exposure();
            this.itemData_ = data;
            this.icon_.skin = data.img;
            if (this.iconMask_) {
                this.icon_.mask = this.iconMask_;
                this.icon_.mask.visible = false;
            }
            if (this.name_txt) {
                if (data.title) {
                    this.name_txt.text = data.title;
                }
                if (data.name) {
                    this.name_txt.text = data.name;
                }
            }
        };
        GuessLikeItem.prototype.exposure = function () {
            if (DeviceUtil.isOPPOMiniGame()) {
                return;
            }
        };
        GuessLikeItem.prototype.click = function () {
            var itemData_ = this.itemData_;
            var data = {
                appId: itemData_.appid,
                path: itemData_.url,
                success: function () {
                    console.log("navigateToMiniProgram success");
                    if (BaseConst.infos.gameInfo.isDY) {
                        PlatformDY.toGame(this.itemData_.id);
                    }
                },
                fail: function (e) {
                    console.log("navigateToMiniProgram fail e =", e);
                    if (DeviceUtil.isWXMiniGame() && !MoreGameOperRequestTwo.isOpen) {
                        ViewManager.getInstance().showView(MoreGameOperRequestTwo);
                    }
                }
            };
            platform.navigateToMiniProgram(data);
        };
        return GuessLikeItem;
    }(BaseSceneUISkin));

    var GuessLike = (function (_super) {
        __extends(GuessLike, _super);
        function GuessLike(skin, subItemSkin, listdata_, itemW) {
            var _this = _super.call(this) || this;
            _this.className_key = "GuessLike";
            _this.listdata = [];
            _this.isTouch = false;
            _this.index = 0;
            _this.len = 0;
            _this.subItemSkin = subItemSkin;
            listdata_ && (_this.listdata = listdata_);
            _this.itemW = itemW;
            _this.skin = skin;
            return _this;
        }
        GuessLike.prototype.childrenCreated = function () {
            this.width = 1026;
            this.height = 330;
            this.panelList.hScrollBarSkin = "";
            this.panelList.hScrollBar.touchScrollEnable = false;
            this.initList();
        };
        GuessLike.prototype.initList = function () {
            for (var i = 0, len = this.listdata.length; i < len; i++) {
                var item = new GuessLikeItem(this.subItemSkin, this.listdata[i]);
                this.boxView.addChild(item);
                item.x = this.itemW * (i - 1);
            }
            this.index = -1;
            this.len = this.listdata.length;
            this.boxView.x = 0;
            this.onEnable();
            this.panelList.on(Laya.Event.MOUSE_DOWN, this, this.mouseDown);
        };
        GuessLike.prototype.onEnable = function () {
            if (this.isCreate) {
                this.panelList.frameLoop(1, this, this.frameChange);
            }
        };
        GuessLike.prototype.onEnabled = function () {
            this.btn_moreGame && this.btn_moreGame.on(Laya.Event.CLICK, this, this.onMoreGame);
        };
        GuessLike.prototype.onMoreGame = function () {
            this.onMoreGameCall && this.onMoreGameCall();
        };
        GuessLike.prototype.onDisable = function () {
            if (this.isCreate) {
                this.panelList.clearTimer(this, this.frameChange);
                this.btn_moreGame && this.btn_moreGame.off(Laya.Event.CLICK, this, this.onMoreGame);
            }
        };
        GuessLike.prototype.mouseDown = function (evt) {
            this.isTouch = true;
            this.clickX = evt.stageX;
            this.starX = this.boxView.x;
            Laya.stage.on(Laya.Event.MOUSE_MOVE, this, this.mouseMove);
            Laya.stage.on(Laya.Event.MOUSE_UP, this, this.mouseOutUp);
        };
        GuessLike.prototype.frameChange = function () {
            var self = this;
            if (!self.isTouch) {
                self.boxView.x -= 1;
            }
            var curX = self.boxView.x;
            if (curX > (self.index + 1) * self.itemW) {
                self.index++;
                var last = self.boxView.removeChildAt(self.boxView.numChildren - 1);
                var first = self.boxView.getChildAt(0);
                last.x = first.x - self.itemW;
                self.boxView.addChildAt(last, 0);
                last.exposure();
                return;
            }
            if (curX < (self.index - 1) * self.itemW) {
                self.index--;
                var last = self.boxView.getChildAt(self.boxView.numChildren - 1);
                var first = self.boxView.removeChildAt(0);
                first.x = last.x + self.itemW;
                self.boxView.addChild(first);
                first.exposure();
                return;
            }
        };
        GuessLike.prototype.mouseMove = function (evt) {
            this.boxView.x = this.starX + (evt.stageX - this.clickX);
        };
        GuessLike.prototype.mouseOutUp = function () {
            this.isTouch = false;
            Laya.stage.off(Laya.Event.MOUSE_MOVE, this, this.mouseMove);
            Laya.stage.off(Laya.Event.MOUSE_UP, this, this.mouseOutUp);
        };
        return GuessLike;
    }(BaseSceneUISkin));

    var MiniManeger = (function () {
        function MiniManeger() {
            this.hideTime = 0;
            this.showTime = 0;
            this.defaultMssage = {
                "title": "休闲解密游戏，开动你的小脑筋帮助女孩逃离魔爪！",
                "imageUrl": "https://package.32yx.com/ecy_game_small/laya/girl/Share/500x400-1.jpg?v=" + 1.0,
                "query": ""
            };
            this.shareInfo = [
                {
                    "title": "烧脑推理，一键过关！",
                    "imageUrl": "https://package.32yx.com/ecy_game_small/laya/girl/Share/500x400-2.jpg?v=" + 1.0,
                    "query": ""
                },
                {
                    "title": "休闲解密游戏，开动你的小脑筋帮助女孩逃离魔爪！",
                    "imageUrl": "https://package.32yx.com/ecy_game_small/laya/girl/Share/500x400-1.jpg?v=" + 1.0,
                    "query": ""
                },
                {
                    "title": "机会只有一次！救救女孩！",
                    "imageUrl": "https://package.32yx.com/ecy_game_small/laya/girl/Share/500x400-3.jpg?v=" + 1.0,
                    "query": ""
                }
            ];
            this.shareInfoDouYin = [
                {
                    "channel": "video",
                    "title": "烧脑推理，一键过关！",
                    "desc": "烧脑推理，一键过关",
                    "imageUrl": "",
                    "query": "",
                    "extra": {
                        "videoPath": "",
                        "videoTopics": ["阿罗斯营救", "烧脑推理，一键过关"]
                    }
                },
                {
                    "channel": "video",
                    "title": "休闲解密游戏，开动你的小脑筋帮助女孩逃离魔爪？",
                    "desc": "休闲解密游戏，开动你的小脑筋帮助女孩逃离魔爪？",
                    "imageUrl": "",
                    "query": "",
                    "extra": {
                        "videoPath": "",
                        "videoTopics": ["阿罗斯营救", "休闲解密游戏，开动你的小脑筋帮助女孩逃离魔爪"]
                    }
                },
                {
                    "channel": "video",
                    "title": "机会只有一次！救救女孩！",
                    "desc": "机会只有一次！救救女孩！",
                    "imageUrl": "",
                    "query": "",
                    "extra": {
                        "videoPath": "",
                        "videoTopics": ["阿罗斯营救", "机会只有一次！救救女孩！"]
                    }
                }
            ];
            this.bFlagDouYin = false;
            this.sucTime = 0;
            this.canShowBanner = true;
            this.nRecordTime = 60;
            this.nRecordTimeReal = 0;
            this.onShareVideoSuccess = false;
            this.bPushMsgShowFlagTen = false;
            this.bPushMsgShowFlagChooseLevel = false;
            this.initVideoInfo();
        }
        Object.defineProperty(MiniManeger, "instance", {
            get: function () {
                if (this.ins == null) {
                    this.ins = new MiniManeger();
                }
                return this.ins;
            },
            enumerable: true,
            configurable: true
        });
        MiniManeger.prototype.initMiniGame = function () {
            var _this = this;
            var launchObj = platform.getLaunchOptionsSync();
            if (launchObj) {
                console.log('launchObj>>>>>>>>>>>>>>', launchObj);
            }
            this.getUpdateManager();
            platform.setKeepScreenOn();
            platform.updateShareMenu();
            platform.showShareMenu();
            platform.onShareAppMessage(function () {
                return _this.defaultMssage;
            });
            this.systemInfo = platform.getSystemInfoSync();
            console.log("systemInfo >> ", this.systemInfo);
        };
        MiniManeger.prototype.getUpdateManager = function () {
        };
        MiniManeger.prototype.onAudioInterruptionBegin = function (call) {
        };
        MiniManeger.prototype.onAudioInterruptionEnd = function (call) {
        };
        MiniManeger.prototype.getUserInfo = function () {
            return __awaiter(this, void 0, void 0, function () {
                return __generator(this, function (_a) {
                    return [2, new Promise(function (resolve) {
                            resolve(null);
                        })];
                });
            });
        };
        MiniManeger.prototype.initUserTemp = function () {
            return __awaiter(this, void 0, void 0, function () {
                var info, strOpenIdOther, strOpenIdOther;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0: return [4, this.getUserInfo()];
                        case 1:
                            info = _a.sent();
                            if (!(info == null)) return [3, 3];
                            return [4, this.userButtonSize(0, 1, 0)];
                        case 2:
                            info = _a.sent();
                            strOpenIdOther = GameData.getInstance().enterGameInfo.query["openid"];
                            console.log("strOpenIdOther = ", strOpenIdOther);
                            if (strOpenIdOther && strOpenIdOther != "") {
                                platform.createUserInfoButton(function (data) {
                                    GameData.getInstance().userInfo.nick = data.userInfo.nickName;
                                    GameData.getInstance().userInfo.avatarUrl = data.userInfo.avatarUrl;
                                    if (!BaseConst.infos.gameInfo.isDY) {
                                        InviteManager.getInstance().judgeInvite();
                                        console.log("createUserInfoButton 用户信息 : ", GameData.getInstance().userInfo);
                                    }
                                    info = data;
                                });
                            }
                            return [3, 4];
                        case 3:
                            GameData.getInstance().userInfo.nick = info.userInfo.nickName;
                            GameData.getInstance().userInfo.avatarUrl = info.userInfo.avatarUrl;
                            strOpenIdOther = GameData.getInstance().enterGameInfo.query["openid"];
                            console.log("strOpenIdOther = ", strOpenIdOther);
                            if (strOpenIdOther && strOpenIdOther != "") {
                                InviteManager.getInstance().judgeInvite();
                                console.log("createUserInfoButton 用户信息 judgeInvite: ", GameData.getInstance().userInfo);
                            }
                            _a.label = 4;
                        case 4:
                            MiniManeger.instance.defaultMssage.query = "openid=" + GameData.getInstance().userInfo.openId;
                            platform.onShareAppMessage(function () {
                                return MiniManeger.instance.defaultMssage;
                            });
                            return [2, info];
                    }
                });
            });
        };
        MiniManeger.prototype.userButtonSize = function (percentTop, pectendSize, percentLeft) {
            var resInfo = platform.getSystemInfoSync();
            var left = resInfo['windowWidth'] * percentLeft;
            var top = resInfo['windowHeight'] * percentTop;
            var wid = resInfo['windowWidth'] * pectendSize;
            var height = resInfo['windowHeight'] * pectendSize;
        };
        MiniManeger.prototype.onShow = function (callBack) {
            var _this = this;
            platform.onShow(function () {
                callBack && callBack();
                if (!DeviceUtil.isTTMiniGame()) {
                    _this.showTime = new Date().getTime();
                    if (_this.showTime - _this.hideTime >= _this.sucTime) {
                        _this.shareSucful && _this.shareSucful.call(_this.thisObj);
                    }
                    else {
                        _this.shareFailful && _this.shareFailful.call(_this.thisObj);
                    }
                }
                _this.shareSucful = null;
                _this.shareFailful = null;
                _this.thisObj = null;
            });
        };
        MiniManeger.prototype.onHide = function (callBack) {
            var _this = this;
            platform.onHide(function () {
                callBack && callBack();
                _this.hideTime = new Date().getTime();
            });
        };
        MiniManeger.prototype.showMoreGame = function (data) {
            return __awaiter(this, void 0, void 0, function () {
                var _this = this;
                return __generator(this, function (_a) {
                    return [2, new Promise(function (resolve) { return __awaiter(_this, void 0, void 0, function () {
                            return __generator(this, function (_a) {
                                return [2];
                            });
                        }); })];
                });
            });
        };
        MiniManeger.prototype.getShareInfo = function (query) {
            var shareInfo = this.shareInfo;
            var info = shareInfo[Math.floor(Math.random() * shareInfo.length)];
            if (query) {
                var openId = GameData.getInstance().userInfo.openId;
                query['openid'] = openId;
            }
            info.query = Utils.querStr(query);
            return info;
        };
        MiniManeger.prototype.testShareVideo = function () {
            var obj = {
                channel: "video",
                title: "测试分享视频",
                desc: "测试描述",
                imageUrl: "",
                templateId: "",
                query: "",
                extra: {
                    videoPath: "ttfile://temp/test.mp4",
                    videoTopics: ["话题11", "话题21"]
                },
                success: function () {
                    console.log("分享视频成功");
                },
                fail: function (e) {
                    console.log("分享视频失败");
                }
            };
            obj.extra.videoPath = this.strVideoPatch;
            platform.shareAppMessage(obj);
        };
        MiniManeger.prototype.getShareInfoDouYin = function (query) {
            var shareInfo = this.shareInfoDouYin;
            var info = shareInfo[Math.floor(Math.random() * shareInfo.length)];
            if (query) {
                var openId = GameData.getInstance().userInfo.openId;
                query['openid'] = openId;
            }
            info.query = Utils.querStr(query);
            info.extra.videoPath = this.strVideoPatch;
            return info;
        };
        MiniManeger.prototype.shareAppMessage = function (data) {
            if (data == null) {
                data = {};
            }
            if (!data.message) {
                data.message = this.getShareInfo({});
            }
            if (DeviceUtil.isTTMiniGame()) {
                var info = platform.getSystemInfoSync();
                if (info.appName.toUpperCase() == 'DOUYIN' && this.bFlagDouYin) {
                    data.message = this.getShareInfoDouYin({});
                    console.log("data.message = ", data.message);
                }
                if (data.sucFun) {
                    data.sucFun && (data.message.success = data.sucFun);
                }
                else {
                    data.message.success = function () {
                        TipsManager.getInstance().showDefaultTips('分享成功');
                    };
                }
                if (data.failFun) {
                    data.failFun && (data.message.fail = data.failFun);
                }
                else {
                    data.message.fail = function () {
                        TipsManager.getInstance().showDefaultTips('分享失败');
                    };
                }
                platform.shareAppMessage(data.message);
                return;
            }
            this.shareSucful = data.sucFun;
            this.shareFailful = function () {
                TipsManager.getInstance().showDefaultTips('分享失败');
                data.failFun && data.failFun();
            };
            this.thisObj = data.thisObj;
            this.sucTime = data.time || 3000;
            if (DeviceUtil.isWXMiniGame() || DeviceUtil.isQQMiniGame()) {
                platform.shareAppMessage(data.message);
            }
        };
        MiniManeger.prototype.playViderAd = function (data) {
            if (!DeviceUtil.isMiniGame()) {
                data.successFun && data.successFun();
                return;
            }
            var videoId = GameData.getInstance().videoId;
            if (data.isLongVideo) {
                videoId = GameData.getInstance().longVideoId;
            }
            if (videoId.length <= 0) {
                TipsManager.getInstance().showDefaultTips('开发中');
                data.errorFun && data.errorFun();
                return;
            }
            ViewChangeManager.getInstance().showBufferLoadingView();
            var adId = videoId[Math.floor(Math.random() * videoId.length)];
            platform.createRewardedVideoAd(adId, function (res) {
                if (res.isEnded) {
                    data.successFun && data.successFun();
                    if (!DeviceUtil.isTTMiniGame()) {
                        SoundManager.getInstance().playBgMusic();
                    }
                    console.log(" video normal！");
                }
                else {
                    data.failFun && data.failFun();
                    if (!DeviceUtil.isTTMiniGame()) {
                        SoundManager.getInstance().playBgMusic();
                    }
                    console.log(" video not finish！");
                }
                ViewChangeManager.getInstance().hideBufferLoadingView();
            }, function () {
                ViewChangeManager.getInstance().hideBufferLoadingView();
                TipsManager.getInstance().showDefaultTips('网络错误');
                data.errorFun && data.errorFun();
                if (!DeviceUtil.isTTMiniGame()) {
                    SoundManager.getInstance().playBgMusic();
                }
            });
        };
        MiniManeger.prototype.showBannerAd = function (offset) {
            if (!DeviceUtil.isMiniGame()) {
                return;
            }
            if (DeviceUtil.isTTMiniGame()) {
                var info = platform.getSystemInfoSync();
                if (info.appName.toUpperCase() == 'DOUYIN') {
                    return;
                }
            }
            this.canShowBanner = true;
            var bannerId = GameData.getInstance().bannerId;
            if (bannerId.length <= 0) {
                console.log("bannerId.length <= 0");
                return;
            }
            var adId = bannerId[Math.floor(Math.random() * bannerId.length)];
            if (this.bannerAd == null) {
                var bannerAd = platform.createBannerAd(adId);
                this.bannerAd = bannerAd;
                if (bannerAd == null)
                    return;
                bannerAd.show();
            }
            this.bannerAd.show();
            if (!this.canShowBanner) {
                this.bannerAd.hide();
            }
            if (offset) {
                this.bannerAd.style.left = offset.w - this.bannerAd.style.realWidth / 2 + 0.1;
                this.bannerAd.style.top = offset.h - this.bannerAd.style.realHeight + 0.1;
                offset.callback && offset.callback();
            }
        };
        MiniManeger.prototype.hideBanner = function () {
            if (DeviceUtil.isTTMiniGame()) {
                var info = platform.getSystemInfoSync();
                if (info.appName.toUpperCase() == 'DOUYIN') {
                    return;
                }
            }
            if (this.bannerAd != null) {
                this.bannerAd.hide();
            }
            this.canShowBanner = false;
        };
        MiniManeger.prototype.adaptImgToClientRect = function (collec_img, stage) {
            if (DeviceUtil.isWXMiniGame()) {
                var systemInfo = platform.getSystemInfoSync();
                var screenHeight = systemInfo['screenHeight'];
                var screenWidth = systemInfo['screenWidth'];
                var rect = platform.getMenuButtonBoundingClientRect();
                collec_img.top = stage.height * (rect['top'] / screenHeight);
                collec_img.right = stage.width * (1 - rect['right'] / screenWidth) + collec_img.width;
            }
        };
        MiniManeger.prototype.sendDataToWxOpen = function (data) {
            Laya.MiniAdpter.window.wx.postMessage(data);
        };
        MiniManeger.prototype.removeOpenData = function (data) {
            var wxOpenData = data.parent.getChildByName('wxOpenData');
            this.sendDataToWxOpen({ cmd: 'close', data: null });
            if (wxOpenData) {
                wxOpenData.removeSelf();
                wxOpenData.destroy();
                wxOpenData = null;
            }
        };
        MiniManeger.prototype.addOpenWxData = function (data) {
            var shareData = MiniManeger.instance.getShareInfo({ id: GameData.getInstance().userInfo.openId });
            this.sendDataToWxOpen({ cmd: 'share', data: JSON.stringify(shareData) });
            var wxOpenData = data.parent.getChildByName('wxOpenData');
            if (wxOpenData) {
                wxOpenData.removeSelf();
                wxOpenData.destroy();
                wxOpenData = null;
            }
            wxOpenData = new Laya.WXOpenDataViewer();
            wxOpenData.name = 'wxOpenData';
            wxOpenData.x = data.x || 0;
            wxOpenData.y = data.y || 0;
            wxOpenData.width = data.width;
            wxOpenData.height = data.height;
            if (data.isCenter) {
                wxOpenData.centerX = 0;
                wxOpenData.centerY = 0;
            }
            else {
                if (data.left != null) {
                    wxOpenData.left = data.left;
                }
                if (data.right != null) {
                    wxOpenData.right = data.right;
                }
                if (data.top != null) {
                    wxOpenData.top = data.top;
                }
                if (data.bottom != null) {
                    wxOpenData.bottom = data.bottom;
                }
            }
            if (data.parent) {
                data.parent.addChild(wxOpenData);
            }
            return wxOpenData;
        };
        MiniManeger.prototype.initBoxAd = function () {
            var _this = this;
            if (!this.tempBoxAD) {
                this.tempBoxAD = platform.createAppBox(GameData.getInstance().boxId[0]);
                this.tempBoxAD.load().then(function (res) {
                    console.log("boxAd load");
                    console.log(res);
                }).catch(function (err) {
                    console.log("boxAd load err");
                    console.log(err);
                });
                this.tempBoxAD.onClose(function () {
                    _this.imgRect && _this.imgRect.removeSelf();
                    _this.onCloseBoxAD && _this.onCloseBoxAD();
                });
            }
        };
        MiniManeger.prototype.showBoxAd = function (onCloseCall) {
            return __awaiter(this, void 0, void 0, function () {
                var _this = this;
                return __generator(this, function (_a) {
                    this.onCloseBoxAD = onCloseCall;
                    if (DeviceUtil.isQQMiniGame()) {
                        if (!this.imgRect) {
                            this.imgRect = new Laya.Image(ResUtil.getIntance().getOriginUrlPath(ResUtil.getIntance().getResInfoByName("game_panel_db_png").url));
                            this.imgRect.sizeGrid = "3,3,2,2";
                            this.imgRect.width = Laya.stage.width;
                            this.imgRect.height = Laya.stage.height;
                        }
                        Laya.stage.addChild(this.imgRect);
                        if (this.tempBoxAD) {
                            this.tempBoxAD.show().then(function (res) {
                                console.log("boxAd show");
                                console.log(res);
                            }).catch(function (err) {
                                console.log("boxAd show err");
                                console.log(err);
                                _this.imgRect && _this.imgRect.removeSelf();
                                _this.onCloseBoxAD && _this.onCloseBoxAD();
                            });
                        }
                    }
                    return [2];
                });
            });
        };
        MiniManeger.prototype.initVideoInfo = function () {
            var _this = this;
            if (!DeviceUtil.isTTMiniGame()) {
                return;
            }
            this.recorder = platform.getGameRecorderManager();
            this.recorder.onStart(function (res) {
                console.log("onStart -> ", res);
            });
            this.recorder.onStop(function (res) {
                _this.strVideoPatch = res.videoPath;
                if (_this.nRecordTimeReal < 3000)
                    _this.strVideoPatch = null;
                console.log("onStop ->", _this.strVideoPatch);
                MiniManeger.instance.saveCallF && MiniManeger.instance.saveCallF();
            });
        };
        MiniManeger.prototype.StartRecorderVideo = function () {
            var _this = this;
            if (!DeviceUtil.isTTMiniGame()) {
                return;
            }
            this.nRecordTimeReal = 0;
            this.strVideoPatch = "";
            Laya.timer.once(200, this, function () {
                platform.getGameRecorderManager().start({ duration: _this.nRecordTime });
            });
            Laya.timer.loop(1000, this, this.timeStopVideo);
            console.log("开始录制视频");
        };
        MiniManeger.prototype.timeStopVideo = function () {
            this.nRecordTimeReal += 1000;
            if (this.nRecordTimeReal >= this.nRecordTime * 1000) {
                this.StopVideo();
            }
        };
        MiniManeger.prototype.StopVideo = function () {
            if (!DeviceUtil.isTTMiniGame()) {
                return;
            }
            EventMgr.getInstance().sendEvent(GameEvent.CHANGE_VIDEO_IMAGE);
            platform.getGameRecorderManager().stop();
            Laya.timer.clear(this, this.timeStopVideo);
            console.log("停止录制视频  this.nRecordTimeReal=", this.nRecordTimeReal);
        };
        MiniManeger.prototype.shareGameVideo = function (data) {
            if (!this.strVideoPatch || this.strVideoPatch.length == 0) {
                TipsManager.getInstance().showDefaultTips("暂未录制视频哦!");
                return;
            }
            if (this.nRecordTimeReal <= 3000) {
                TipsManager.getInstance().showDefaultTips("录制视频失败");
                data.failFun && data.failFun();
                return;
            }
            if (!DeviceUtil.isTTMiniGame()) {
                return;
            }
            console.log("分享游戏视频--");
            var obj = {};
            obj.title = "阿罗斯营救";
            obj.query = "openId=" + GameData.getInstance().userInfo.openId + "&nick=" + GameData.getInstance().userInfo.nick;
            obj.videoPath = this.strVideoPatch;
            obj.success = function () {
                console.log("视频分享成功！");
                TipsManager.getInstance().showDefaultTips("发布录制视频成功");
                data.successFun && data.successFun();
            };
            obj.fail = function (res) {
                console.log("视频分享失败！", res);
                data.failFun && data.failFun();
                TipsManager.getInstance().showDefaultTips("发布录制视频失败");
            };
            platform.shareVideo(obj);
        };
        MiniManeger.prototype.onShareVideo = function (data) {
            this.shareGameVideo(data);
        };
        MiniManeger.prototype.showInterstitialAd = function () {
            if (DeviceUtil.isTTMiniGame()) {
                var info = platform.getSystemInfoSync();
                if (info.appName.toUpperCase() == 'DOUYIN') {
                    return;
                }
                platform.createInterstitialAd({ adUnitId: "h7n4g8mhqfp1h56aim" });
                console.log("to show createInterstitialAd!");
            }
        };
        MiniManeger.prototype.showMoreGamesModal = function () {
            var appLaunchOptions = [];
            for (var i = 0, len = GameData.getInstance().weCatMiniIconsInfo.length; i < len; i++) {
                appLaunchOptions.push({
                    appId: GameData.getInstance().weCatMiniIconsInfo[i].ad_appid,
                    query: "",
                    extraData: {}
                });
            }
            platform.showMoreGamesModal({
                appLaunchOptions: appLaunchOptions,
                success: function (res) {
                    console.log("success", res.errMsg);
                },
                fail: function (res) {
                    console.log("fail", res.errMsg);
                },
                complete: function (res) {
                    console.log("complete", res.errMsg);
                }
            });
        };
        MiniManeger.prototype.createGuessLike = function (parent) {
            return __awaiter(this, void 0, void 0, function () {
                var _this = this;
                return __generator(this, function (_a) {
                    return [2, new Promise(function (resolve) { return __awaiter(_this, void 0, void 0, function () {
                            var data, guessLike;
                            return __generator(this, function (_a) {
                                switch (_a.label) {
                                    case 0:
                                        data = PlatformDY.gameListInfos;
                                        if (!(data == null)) return [3, 2];
                                        return [4, PlatformDY.getGameList()];
                                    case 1:
                                        data = _a.sent();
                                        _a.label = 2;
                                    case 2:
                                        if (data == null) {
                                            resolve(null);
                                            return [2];
                                        }
                                        guessLike = null;
                                        if (data.length <= 0) {
                                            resolve(guessLike);
                                            return [2];
                                        }
                                        console.log("data(GuessLike) ->", data);
                                        guessLike = parent.getChildByName('GuessLike');
                                        if (guessLike == null) {
                                            guessLike = new GuessLike("game/uiView/GuessLike.json", "game/uiView/GuessLikeItem.json", data, 220);
                                            parent.addChild(guessLike);
                                        }
                                        guessLike.name = 'GuessLike';
                                        guessLike.mouseThrough = true;
                                        guessLike.x = (Laya.stage.width - guessLike.width) / 2;
                                        guessLike.y = Laya.stage.height - guessLike.height;
                                        resolve(guessLike);
                                        return [2];
                                }
                            });
                        }); })];
                });
            });
        };
        MiniManeger.prototype.reportMonitorSome = function (name, value) {
        };
        MiniManeger.prototype.wxPushMsg = function () {
            if (this.bPushMsgShowFlagTen && this.bPushMsgShowFlagChooseLevel) {
                return;
            }
            if (DeviceUtil.isWXMiniGame()) {
                wx.requestSubscribeMessage({
                    tmplIds: ["lLzwoD67W2rWzLRHR-gSd2mHbKukPycirB99W8pe9e0"],
                    success: function (res) {
                        console.log(res);
                        var str = res["lLzwoD67W2rWzLRHR-gSd2mHbKukPycirB99W8pe9e0"];
                        console.log("str = ", str);
                        if (str == "accept") {
                            MiniManeger.saveOpenID();
                        }
                    }, fail: function (e) {
                        console.log("1", e);
                    }
                });
            }
        };
        MiniManeger.saveOpenID = function () {
            var gameId = GameData.getInstance().gameId;
            var openId = GameData.getInstance().strOpenIDWx;
            var strPl = "WeCat";
            var msg = {};
            msg.msg_type = "26";
            msg.msg_data = {
                "gameid": gameId,
                "openid": openId,
                "platform": strPl
            };
            HttpMgr.getInstance().sendHttp(MiniManeger.URLPUSHMSG, msg, MiniManeger.saveOpenIDSuccess, MiniManeger.saveOpenIDFaild);
        };
        MiniManeger.saveOpenIDSuccess = function (data) {
            var code = data["error_code"];
            if (code == "0") {
                console.warn("saveOpenID Success!");
            }
            else {
                console.warn("saveOpenID Faild!");
            }
        };
        MiniManeger.saveOpenIDFaild = function () {
        };
        MiniManeger.URLPUSHMSG = "https://littlegame.32yx.com/SaveOpenID.fcgi";
        return MiniManeger;
    }());

    var AddPsView = (function (_super) {
        __extends(AddPsView, _super);
        function AddPsView() {
            var _this = _super.call(this) || this;
            _this.className_key = "AddPsView";
            _this.showEnterType = BasePopAnimationEnterType.SCALE_MODE_BACK;
            _this.skin = "game/uiView/AddSpView.json";
            return _this;
        }
        AddPsView.prototype.createChildren = function () {
            _super.prototype.createChildren.call(this);
        };
        AddPsView.prototype.onAddStage = function () {
            MiniManeger.instance.showInterstitialAd();
            ViewChangeManager.getInstance().CommonView.removeBtEvent();
            this.initView();
            this.addEvent();
            MiniManeger.instance.showBannerAd();
        };
        AddPsView.prototype.onRemoved = function () {
            this.removeEvent();
        };
        AddPsView.prototype.initView = function () {
            var _this = this;
            this.nPsAdd = 5;
            var stGameConfig = ConfigManager.getInstance().getGameConfigDataByID(3);
            if (stGameConfig) {
                this.nPsAdd = parseInt(stGameConfig.strValue);
            }
            BitmapLabelUtils.setLabel(this.spNum, this.nPsAdd.toString(), "resource/assets/img/common/level_number1/level_number1_", 0, ".png", "left");
            this.btLable.visible = false;
            Laya.timer.once(2000, this, function () {
                _this.btLable.visible = true;
            });
        };
        AddPsView.prototype.addEvent = function () {
            this.imageBtGet.on(Laya.Event.CLICK, this, this.addPsWatchVideo);
            this.btLable.on(Laya.Event.CLICK, this, this.onClose);
        };
        AddPsView.prototype.removeEvent = function () {
            this.imageBtGet.on(Laya.Event.CLICK, this, this.addPsWatchVideo);
            this.btLable.off(Laya.Event.CLICK, this, this.onClose);
        };
        AddPsView.prototype.addPsWatchVideo = function () {
            var _this = this;
            SoundManager.getInstance().playEffect("button", 1);
            this.imageBtGet.off(Laya.Event.CLICK, this, this.addPsWatchVideo);
            MiniManeger.instance.playViderAd({
                successFun: function () {
                    _this.imageBtGet.on(Laya.Event.CLICK, _this, _this.addPsWatchVideo);
                    ViewChangeManager.getInstance().CommonView.addBtEvent();
                    _this.addPsFun();
                },
                failFun: function () {
                    _this.imageBtGet.on(Laya.Event.CLICK, _this, _this.addPsWatchVideo);
                },
                errorFun: function () {
                    _this.imageBtGet.on(Laya.Event.CLICK, _this, _this.addPsWatchVideo);
                }
            });
        };
        AddPsView.prototype.addPsFun = function () {
            PlayerDataManager.getInstance().AddGoods(GoodsType.enum_GoodsType_Sp, this.nPsAdd);
            AddPsView.bShowMoreGame = false;
            this.removeSelf();
        };
        AddPsView.prototype.onClose = function () {
            SoundManager.getInstance().playEffect("button", 1);
            ViewChangeManager.getInstance().CommonView.addBtEvent();
            AddPsView.bShowMoreGame = false;
            this.removeSelf();
        };
        AddPsView.bShowMoreGame = false;
        return AddPsView;
    }(BaseSceneUISkinPopView));

    var CommonView = (function (_super) {
        __extends(CommonView, _super);
        function CommonView() {
            var _this = _super.call(this) || this;
            _this.className_key = "CommonView";
            _this.skin = "game/uiView/CommonView.json";
            _this.width = 600;
            _this.height = 200;
            return _this;
        }
        CommonView.prototype.onAddStage = function () {
            if (!this.isCreate) {
                return;
            }
            this.refreshSPValue();
            this.refreshGoldValue();
            this.refreshTimeView();
            this.addEventUpdateView();
        };
        CommonView.prototype.onRemoved = function () {
            this.removeEnentUpdateView();
        };
        CommonView.prototype.addEventUpdateView = function () {
            this.sp.on(Laya.Event.CLICK, this, this.openAddSp);
            EventMgr.getInstance().addEvent(GameEvent.ON_PS_CHANGE, this, this.refreshSPValue);
            EventMgr.getInstance().addEvent(GameEvent.ON_GLOD_CHANGE, this, this.refreshGoldValue);
            EventMgr.getInstance().addEvent(GameEvent.ON_SP_UPDOWN_TIME, this, this.refreshTimeLableInfo);
        };
        CommonView.prototype.addBtEvent = function () {
            this.imageBtAttSp.visible = true;
            this.sp && this.sp.on(Laya.Event.CLICK, this, this.openAddSp);
        };
        CommonView.prototype.removeBtEvent = function () {
            this.imageBtAttSp.visible = false;
            this.sp && this.sp.off(Laya.Event.CLICK, this, this.openAddSp);
        };
        CommonView.prototype.removeEnentUpdateView = function () {
            this.sp.off(Laya.Event.CLICK, this, this.openAddSp);
            EventMgr.getInstance().removeEvent(GameEvent.ON_PS_CHANGE, this, this.refreshSPValue);
            EventMgr.getInstance().removeEvent(GameEvent.ON_GLOD_CHANGE, this, this.refreshGoldValue);
            EventMgr.getInstance().removeEvent(GameEvent.ON_SP_UPDOWN_TIME, this, this.refreshTimeLableInfo);
        };
        CommonView.prototype.openAddSp = function () {
            var _this = this;
            SoundManager.getInstance().playEffect("button", 1);
            ViewChangeManager.getInstance().showBufferLoadingView();
            ResUtil.getIntance().loadGroups(["adsp"], function () { return __awaiter(_this, void 0, void 0, function () {
                return __generator(this, function (_a) {
                    ViewManager.getInstance().showView(AddPsView);
                    ViewChangeManager.getInstance().hideBufferLoadingView();
                    return [2];
                });
            }); });
        };
        CommonView.prototype.refreshSPValue = function () {
            if (!this.isCreate) {
                return;
            }
            BitmapLabelUtils.setLabel(this.spNum, PlayerDataManager.getInstance().stPlayerDataBase.nPS.toString(), "resource/assets/img/ui/gamehome/maininterface_number1/maininterface_number1_", 0, ".png", "center");
            this.refreshTimeView();
        };
        CommonView.prototype.refreshGoldValue = function () {
            if (!this.isCreate) {
                return;
            }
            BitmapLabelUtils.setLabel(this.glodNum, PlayerDataManager.getInstance().stPlayerDataBase.nGlodCount.toString(), "resource/assets/img/common/level_number1/level_number1_", 0, ".png", "left");
        };
        CommonView.prototype.refreshTimeView = function () {
            var nSpTimeMax = 5;
            var stGameData = ConfigManager.getInstance().getGameConfigDataByID(1);
            if (stGameData) {
                nSpTimeMax = parseInt(stGameData.strValue);
            }
            if (nSpTimeMax <= PlayerDataManager.getInstance().stPlayerDataBase.nPS) {
                this.imageSpFull.visible = true;
                this.stLableTime.visible = false;
                this.stLableTime.text = "";
            }
            else {
                this.imageSpFull.visible = false;
                this.stLableTime.visible = true;
            }
        };
        CommonView.prototype.refreshTimeLableInfo = function () {
            this.imageSpFull.visible = false;
            this.stLableTime.visible = true;
            this.stLableTime.text = PlayerDataManager.getInstance().getSpLastTime();
        };
        return CommonView;
    }(BaseSceneUISkin));

    var GameBufferLoading = (function (_super) {
        __extends(GameBufferLoading, _super);
        function GameBufferLoading() {
            var _this = _super.call(this) || this;
            _this.className_key = "GameBufferLoading";
            _this.bg_img_res = "game_panel_db_png";
            _this.width = Laya.stage.width;
            _this.height = Laya.stage.height;
            _this.init();
            return _this;
        }
        GameBufferLoading.prototype.init = function () {
            if (!this.bg_img) {
                this.bg_img = new Laya.Image(ResUtil.getIntance().getOriginUrlPath(ResUtil.getIntance().getResInfoByName(this.bg_img_res).url));
                this.bg_img.sizeGrid = "3,3,2,2";
                this.bg_img.width = this.width;
                this.bg_img.height = this.height;
                this.bg_img.alpha = 0.7;
                this.addChild(this.bg_img);
                this.mouseEnabled = true;
                this.bg_img.mouseEnabled = true;
                this.bg_img.mouseThrough = false;
            }
            if (!this.img_circle) {
                this.img_circle = new Laya.Image();
                this.img_circle.skin = "resource/assets/img/loading_circle.png";
                this.img_circle.anchorX = this.img_circle.anchorY = 0.5;
                this.img_circle.centerX = this.img_circle.centerY = 0;
                this.addChild(this.img_circle);
            }
        };
        GameBufferLoading.prototype.setLabelInfo = function (info) {
        };
        GameBufferLoading.prototype.onShow = function () {
            if (this.img_circle) {
                this.img_circle.rotation = 0;
                Laya.Tween.to(this.img_circle, { rotation: 360 }, 500, null, Laya.Handler.create(this, this.onShow));
            }
        };
        GameBufferLoading.prototype.onHidd = function () {
            if (this.img_circle) {
                Laya.Tween.clearAll(this.img_circle);
            }
        };
        return GameBufferLoading;
    }(Laya.Sprite));

    var ViewChangeManager = (function () {
        function ViewChangeManager() {
        }
        ViewChangeManager.getInstance = function () {
            if (!this.instance) {
                this.instance = new ViewChangeManager();
            }
            return this.instance;
        };
        Object.defineProperty(ViewChangeManager.prototype, "CommonView", {
            get: function () {
                if (!this.pCommonView) {
                    this.pCommonView = new CommonView();
                    this.pCommonView.x = 0;
                    this.pCommonView.y = 0;
                }
                return this.pCommonView;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ViewChangeManager.prototype, "CurLevelBase", {
            get: function () {
                return this.pCurLevelBase;
            },
            set: function (pCurLevelBase) {
                this.pCurLevelBase = pCurLevelBase;
            },
            enumerable: true,
            configurable: true
        });
        ViewChangeManager.prototype.showCommonView = function () {
            Laya.stage.addChild(this.CommonView);
        };
        ViewChangeManager.prototype.gotoLevel = function (nCurLevel) {
            PlayerDataManager.getInstance().setCurLevel(nCurLevel - 1);
            GameStateManager.getInstance().levelState = EnterGameType.enum_EnterGameType_ChooseLevel;
            LevelManager.getInstance().createLevelScene(nCurLevel);
        };
        ViewChangeManager.prototype.goToNextLevel = function () {
            MiniManeger.instance.StopVideo();
            this.pCurLevelBase.closeGameView();
            GameStateManager.getInstance().levelState = EnterGameType.enum_EnterGameType_Next;
            PlayerDataManager.getInstance().addLevel();
            LevelManager.getInstance().createLevelScene(PlayerDataManager.getInstance().getCurLevelToChallenge());
        };
        ViewChangeManager.prototype.restartGame = function (bAll) {
            if (bAll === void 0) { bAll = true; }
            GameStateManager.getInstance().levelState = EnterGameType.enum_EnterGameType_ReStart;
            this.pCurLevelBase.restartGame(bAll);
        };
        ViewChangeManager.prototype.rigestBufferLoadingView = function () {
            BufferLoadingManger.getInstance().registerOneBuffer("gamebuffer", new GameBufferLoading());
        };
        ViewChangeManager.prototype.showBufferLoadingView = function () {
            BufferLoadingManger.getInstance().showBuffer("gamebuffer");
        };
        ViewChangeManager.prototype.hideBufferLoadingView = function () {
            BufferLoadingManger.getInstance().hiddBuffer("gamebuffer");
        };
        ViewChangeManager.prototype.startGame = function () {
            if (!BaseConst.infos.gameInfo.isDY) {
                return;
            }
            if (!DeviceUtil.isWXMiniGame() && !DeviceUtil.isQQMiniGame() && !DeviceUtil.isTTMiniGame())
                return;
            PlatformDY.startGame();
        };
        ViewChangeManager.prototype.endGame = function () {
            if (!BaseConst.infos.gameInfo.isDY) {
                return;
            }
            if (!DeviceUtil.isWXMiniGame() && !DeviceUtil.isQQMiniGame() && !DeviceUtil.isTTMiniGame())
                return;
            PlatformDY.endGame({ id: PlatformDY.nGameID, level: PlayerDataManager.getInstance().getCurLevelToChallenge() });
        };
        ViewChangeManager.bGameOpen = false;
        return ViewChangeManager;
    }());

    var LevelViewItem = (function (_super) {
        __extends(LevelViewItem, _super);
        function LevelViewItem(data_) {
            var _this = _super.call(this) || this;
            _this.className_key = "LevelViewItem";
            _this.nCurLeve = data_;
            _this.width = 285;
            _this.height = 316;
            _this.pivotX = 285 / 2;
            _this.pivotY = 316 / 2;
            _this.skin = "game/uiView/LevelIndexView.json";
            return _this;
        }
        LevelViewItem.prototype.onEnable = function () {
            this.on(Laya.Event.CLICK, this, this.enterLevel);
        };
        LevelViewItem.prototype.onDisable = function () {
            this.off(Laya.Event.CLICK, this, this.enterLevel);
            Laya.Tween.clearAll(this);
            Laya.timer.clearAll(this.openLevelItemAni);
        };
        LevelViewItem.prototype.createChildren = function () {
            _super.prototype.createChildren.call(this);
        };
        LevelViewItem.prototype.childrenCreated = function () {
            this.refreshView();
        };
        LevelViewItem.prototype.refreshView = function () {
            this.spG.visible = false;
            this.bAni = false;
            BitmapLabelUtils.setLabel(this.levelNum, this.nCurLeve.toString(), "resource/assets/img/common/level_number1/level_number1_", 0, ".png", "center");
            if (this.nCurLeve <= PlayerDataManager.getInstance().getCurLevelMax()) {
                this.spG.visible = true;
                this.spBg.loadImage("resource/assets/img/ui/levelview/level_baseboard_1.png");
            }
            else if (this.nCurLeve == PlayerDataManager.getInstance().getLevelToChangeMaxLevel()) {
                this.spBg.loadImage("resource/assets/img/ui/levelview/level_baseboard_2.png");
                this.bAni = true;
            }
            else {
                this.spBg.loadImage("resource/assets/img/ui/levelview/level_baseboard_3.png");
            }
            this.openLevelItemAni();
        };
        LevelViewItem.prototype.setData = function (data_) {
            this.nCurLeve = data_;
            this.refreshView();
        };
        LevelViewItem.prototype.enterLevel = function () {
            var _this = this;
            SoundManager.getInstance().playEffect("button", 1);
            if (this.nCurLeve > PlayerDataManager.getInstance().getLevelToChangeMaxLevel()) {
                TipsManager.getInstance().showDefaultTips("未解锁");
                return;
            }
            if (DeviceUtil.isWXMiniGame()) {
                if (!MiniManeger.instance.bPushMsgShowFlagChooseLevel) {
                    MiniManeger.instance.wxPushMsg();
                    MiniManeger.instance.bPushMsgShowFlagChooseLevel = true;
                }
            }
            var nSpCost = 1;
            var stGameConfig = ConfigManager.getInstance().getGameConfigDataByID(8);
            if (stGameConfig) {
                nSpCost = parseInt(stGameConfig.strValue);
            }
            var b = PlayerDataManager.getInstance().CheckGoods(GoodsType.enum_GoodsType_Sp, nSpCost);
            if (!b) {
                TipsManager.getInstance().showDefaultTips("体力不足");
                ViewChangeManager.getInstance().showBufferLoadingView();
                ResUtil.getIntance().loadGroups(["adsp"], function () { return __awaiter(_this, void 0, void 0, function () {
                    return __generator(this, function (_a) {
                        ViewManager.getInstance().showView(AddPsView);
                        ViewChangeManager.getInstance().hideBufferLoadingView();
                        return [2];
                    });
                }); });
                return;
            }
            PlayerDataManager.getInstance().subGoods(GoodsType.enum_GoodsType_Sp, nSpCost);
            ViewChangeManager.getInstance().gotoLevel(this.nCurLeve);
            this.pParentView.closeViewWhenGoToLevel();
        };
        LevelViewItem.prototype.setParentView = function (pParentView) {
            this.pParentView = pParentView;
        };
        LevelViewItem.prototype.openLevelItemAni = function () {
            var _this = this;
            if (this.nCurLeve == PlayerDataManager.getInstance().getLevelToChangeMaxLevel() && this.bAni) {
                Laya.Tween.clearAll(this);
                Laya.Tween.to(this, { scaleX: 1.1, scaleY: 1.1 }, 300, Laya.Ease.sineOut, Laya.Handler.create(this, function (args) {
                    Laya.Tween.to(_this, { scaleX: 1, scaleY: 1 }, 300, Laya.Ease.sineOut, Laya.Handler.create(_this, function (args) {
                        Laya.timer.once(0, _this, _this.openLevelItemAni);
                    }));
                }));
            }
            else {
                Laya.Tween.clearAll(this);
                Laya.timer.clearAll(this.openLevelItemAni);
            }
        };
        return LevelViewItem;
    }(BaseSceneUISkin));

    var LevelView = (function (_super) {
        __extends(LevelView, _super);
        function LevelView() {
            var _this = _super.call(this) || this;
            _this.className_key = "LevelView";
            _this.skin = "game/uiView/LevelView.json";
            return _this;
        }
        LevelView.prototype.createChildren = function () {
            _super.prototype.createChildren.call(this);
        };
        LevelView.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
            this.levelPanel.vScrollBarSkin = "";
            this.levelPanel.elasticEnabled = true;
            this.levelPanel.vScrollBar.elasticDistance = 130;
        };
        LevelView.prototype.onAddStage = function () {
            MiniManeger.instance.showInterstitialAd();
            ViewChangeManager.getInstance().CommonView.visible = false;
            this.initView();
            this.addEvent();
            MiniManeger.instance.showBannerAd();
        };
        LevelView.prototype.onRemoved = function () {
            this.removeEvent();
        };
        LevelView.prototype.addEvent = function () {
            this.imageBtHome.on(Laya.Event.CLICK, this, this.levelViewReturnToHome);
        };
        LevelView.prototype.removeEvent = function () {
            this.imageBtHome.off(Laya.Event.CLICK, this, this.levelViewReturnToHome);
        };
        LevelView.prototype.initView = function () {
            var xStart = 69 + 285 / 2;
            var xAdd = 44 + 285;
            var yStart = 316 / 2;
            var yAdd = 316 + 35;
            for (var i = 0, len = PlayerDataManager.getInstance().nMaxLevelCount; i < len; i++) {
                var item = this.levelBox.getChildAt(i);
                if (item) {
                    item.setData(i + 1);
                }
                else {
                    item = new LevelViewItem(i + 1);
                    item.width = item.height = 210;
                    item.x = (i % 3) * xAdd + xStart;
                    item.y = Math.floor(i / 3) * yAdd + yStart;
                    this.levelBox.addChild(item);
                }
                item.setParentView(this);
            }
        };
        LevelView.prototype.levelViewReturnToHome = function () {
            SoundManager.getInstance().playEffect("button", 1);
            ViewChangeManager.getInstance().CommonView.visible = true;
            this.removeSelf();
        };
        LevelView.prototype.closeViewWhenGoToLevel = function () {
            ViewChangeManager.getInstance().CommonView.visible = true;
            this.removeSelf();
            LevelView.pHomeView.removeSelf();
        };
        return LevelView;
    }(BaseSceneUISkinPopView));

    var SignView = (function (_super) {
        __extends(SignView, _super);
        function SignView() {
            var _this = _super.call(this) || this;
            _this.className_key = "SignView";
            _this.showEnterType = BasePopAnimationEnterType.SCALE_MODE_BACK;
            _this.bIsRunning = false;
            _this.skin = "game/uiView/SignView.json";
            return _this;
        }
        SignView.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
            this.initView();
        };
        SignView.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
            this.addEvent();
            this.initView();
            MiniManeger.instance.showBannerAd();
        };
        SignView.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.removeEvent();
            this.bIsRunning = false;
            Laya.Tween.clearAll(this.imageBtSign);
            Laya.timer.clearAll(this);
        };
        SignView.prototype.initView = function () {
            this.nCurTime = 0;
            this.bDouble = false;
            this.bIsRunning = true;
            this.refreshSignData();
            this.refreshSignView();
            this.refreshSignRecvBt();
            this.initDouble();
        };
        SignView.prototype.addEvent = function () {
            this.imageBtSign.on(Laya.Event.CLICK, this, this.onClick);
            this.spBtClose.on(Laya.Event.CLICK, this, this.onClick);
            this.boxDouble.on(Laya.Event.CLICK, this, this.onClick);
        };
        SignView.prototype.removeEvent = function () {
            this.imageBtSign.off(Laya.Event.CLICK, this, this.onClick);
            this.spBtClose.off(Laya.Event.CLICK, this, this.onClick);
            this.boxDouble.off(Laya.Event.CLICK, this, this.onClick);
        };
        SignView.prototype.onClick = function (evt) {
            SoundManager.getInstance().playEffect("button", 1);
            switch (evt.currentTarget) {
                case this.spBtClose:
                    this.removeSelf();
                    break;
                case this.imageBtSign:
                    this.onSigned();
                    break;
                case this.boxDouble:
                    this.onSignedDouble();
                    break;
            }
        };
        SignView.prototype.onSignedDouble = function () {
            this.spDouble.visible = !this.spDouble.visible;
            this.bDouble = this.spDouble.visible;
        };
        SignView.prototype.refreshSignData = function () {
            this.nCurTime = GameLogicProcessingManager.GetCurTime();
            if (Utils.judgeIsOnTheSameDay(PlayerDataManager.getInstance().stPlayerDataBase.nSignTimeLast, this.nCurTime)) {
                this.btDouble.visible = false;
                return;
            }
            if (PlayerDataManager.getInstance().stPlayerDataBase.nSignIndex >= 7) {
                PlayerDataManager.getInstance().stPlayerDataBase.nSignIndex = 0;
            }
        };
        SignView.prototype.refreshSignView = function () {
            var arySignData = ConfigManager.getInstance().getSignDataAll();
            var nLen = arySignData.length;
            var stImageTemp = null;
            var stSpriteGoods = null;
            for (var i = 0; i < nLen; ++i) {
                stImageTemp = this.boxItem.getChildAt(i);
                if (stImageTemp) {
                    if (i < 6) {
                        stSpriteGoods = stImageTemp.getChildAt(2);
                        if (stSpriteGoods) {
                            if (arySignData[i].nType == 1) {
                                stSpriteGoods.loadImage("resource/assets/img/common/maininterface_icon_7.png");
                            }
                            else if (arySignData[i].nType == 2) {
                                stSpriteGoods.loadImage("resource/assets/img/common/maininterface_icon_6.png");
                            }
                        }
                        var stBox = stImageTemp.getChildByName("boxWorld");
                        if (stBox) {
                            var spNum = stBox.getChildByName("spWorld");
                            if (spNum) {
                                BitmapLabelUtils.setLabel(spNum, arySignData[i].nCount.toString(), "resource/assets/img/common/level_number1/level_number1_", 0, ".png", "left");
                            }
                        }
                    }
                    else {
                        BitmapLabelUtils.setLabel(this.spWorldLeft, arySignData[i].nCount.toString(), "resource/assets/img/common/level_number1/level_number1_", 0, ".png", "left");
                        BitmapLabelUtils.setLabel(this.spWorldRight, arySignData[i].nCount7.toString(), "resource/assets/img/common/level_number1/level_number1_", 0, ".png", "left");
                    }
                    var spSigned = stImageTemp.getChildByName("spSigned");
                    if (spSigned) {
                        if (i < PlayerDataManager.getInstance().stPlayerDataBase.nSignIndex) {
                            spSigned.visible = true;
                        }
                        else {
                            spSigned.visible = false;
                        }
                    }
                }
            }
        };
        SignView.prototype.initDouble = function () {
            var nFlag = 1;
            var stGameConfig = ConfigManager.getInstance().getGameConfigDataByID(17);
            if (stGameConfig) {
                nFlag = parseInt(stGameConfig.strValue);
            }
            if (nFlag == 1) {
                this.spDouble.visible = true;
            }
            else {
                this.spDouble.visible = false;
            }
            if (DeviceUtil.isQQMiniGame()) {
                if (Math.random() < BaseConst.infos.gameInfo.siginC) {
                    this.spDouble.visible = true;
                }
                else {
                    this.spDouble.visible = false;
                }
            }
            this.bDouble = this.spDouble.visible;
        };
        SignView.prototype.refreshSignRecvBt = function () {
            this.nCurTime = GameLogicProcessingManager.GetCurTime();
            this.boxDouble.visible = true;
            this.btDouble.visible = true;
            this.spTomorrow.visible = true;
            this.imageBtSign.visible = true;
            if (Utils.judgeIsOnTheSameDay(PlayerDataManager.getInstance().stPlayerDataBase.nSignTimeLast, this.nCurTime)) {
                this.boxDouble.visible = false;
                this.btDouble.visible = false;
                this.imageBtSign.visible = false;
            }
            else {
                this.spTomorrow.visible = false;
                this.startSignImageBtShareAni();
            }
        };
        SignView.prototype.onSigned = function () {
            if (this.bDouble) {
                this.imageBtSign.off(Laya.Event.CLICK, this, this.onClick);
                var self_1 = this;
                MiniManeger.instance.playViderAd({
                    successFun: function () {
                        self_1.procSignedData();
                        self_1.imageBtSign.on(Laya.Event.CLICK, self_1, self_1.onClick);
                    },
                    failFun: function () {
                        self_1.imageBtSign.on(Laya.Event.CLICK, self_1, self_1.onClick);
                    },
                    errorFun: function () {
                        self_1.imageBtSign.on(Laya.Event.CLICK, self_1, self_1.onClick);
                    }
                });
            }
            else {
                this.procSignedData();
            }
        };
        SignView.prototype.procSignedData = function () {
            var stSignData = ConfigManager.getInstance().getSignDataBySignID(PlayerDataManager.getInstance().stPlayerDataBase.nSignIndex);
            if (stSignData) {
                var nValue = stSignData.nCount;
                if (this.bDouble) {
                    nValue *= 2;
                }
                PlayerDataManager.getInstance().AddGoods(stSignData.nType, nValue);
                if (stSignData.nType == GoodsType.enum_GoodsType_Sp) {
                    TipsManager.getInstance().showDefaultTips("体力+" + nValue.toString());
                }
                if (PlayerDataManager.getInstance().stPlayerDataBase.nSignIndex == 6) {
                    var nValue_1 = stSignData.nCount7;
                    if (this.bDouble) {
                        nValue_1 *= 2;
                    }
                    PlayerDataManager.getInstance().AddGoods(stSignData.nType7, nValue_1);
                }
            }
            PlayerDataManager.getInstance().stPlayerDataBase.nSignIndex += 1;
            PlayerDataManager.getInstance().stPlayerDataBase.nSignTimeLast = GameLogicProcessingManager.GetCurTime();
            PlayerDataManager.getInstance().SaveData();
            this.refreshSignView();
            this.refreshSignRecvBt();
        };
        SignView.prototype.startSignImageBtShareAni = function () {
            var _this = this;
            if (!this.bIsRunning && this.imageBtSign.visible) {
                return;
            }
            Laya.Tween.clearAll(this.imageBtSign);
            Laya.Tween.to(this.imageBtSign, { scaleX: 1.1, scaleY: 1.1 }, 300, Laya.Ease.sineOut, Laya.Handler.create(this, function (args) {
                Laya.Tween.to(_this.imageBtSign, { scaleX: 1, scaleY: 1 }, 300, Laya.Ease.sineOut, Laya.Handler.create(_this, function (args) {
                    Laya.timer.once(0, _this, _this.startSignImageBtShareAni);
                }));
            }));
        };
        return SignView;
    }(BaseSceneUISkinPopView));

    var InviteItem = (function (_super) {
        __extends(InviteItem, _super);
        function InviteItem(_data) {
            var _this = _super.call(this) || this;
            _this.className_key = "InviteItem";
            _this.data = _data;
            _this.skin = "game/uiView/InviteFriendsIndexView.json";
            return _this;
        }
        InviteItem.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        InviteItem.prototype.adaptationStage = function () {
            this.size(735, 128);
        };
        InviteItem.prototype.onAddStage = function () {
            if (this.isCreate) {
                this.initView();
                this.addEvent();
            }
        };
        InviteItem.prototype.addEvent = function () {
            this.img_get.on(Laya.Event.CLICK, this, this.onGet);
            this.img_null.on(Laya.Event.CLICK, this, this.onInvite);
        };
        InviteItem.prototype.setData = function (data) {
            this.data = data;
            if (this.isCreate) {
                this.initView();
            }
        };
        InviteItem.prototype.initView = function () {
            return __awaiter(this, void 0, void 0, function () {
                var data;
                return __generator(this, function (_a) {
                    if (!this.data)
                        return [2];
                    data = this.data;
                    this.img_get.visible = this.img_no.visible = false;
                    BitmapLabelUtils.setLabel(this.img_index, data.id + "", "resource/assets/img/ui/invite/invite_number1/invite_number1_", -10, ".png", "center");
                    if (data.head && data.head != "") {
                        this.img_head.skin = data.head;
                    }
                    else {
                        this.img_head.skin = "";
                    }
                    BitmapLabelUtils.setLabel(this.img_award, data.reward + "", "resource/assets/img/common/level_number1/level_number1_", 0);
                    if (data.lingqued) {
                        this.img_get.visible = true;
                        this.img_get.mouseEnabled = false;
                        this.img_get.skin = "resource/assets/img/ui/invite/invite_button_2.png";
                        this.img_null.visible = false;
                        this.img_head.visible = true;
                    }
                    else {
                        if (data.canLingqu) {
                            this.img_get.visible = true;
                            this.img_get.mouseEnabled = true;
                            this.img_get.skin = "resource/assets/img/ui/invite/invite_button_1.png";
                            this.img_null.visible = false;
                            this.img_head.visible = true;
                        }
                        else {
                            this.img_no.visible = true;
                            this.img_null.visible = true;
                            this.img_head.visible = false;
                        }
                    }
                    return [2];
                });
            });
        };
        InviteItem.prototype.onGet = function () {
            SoundManager.getInstance().playEffect("button", 1);
            PlayerDataManager.getInstance().AddGoods(GoodsType.enum_GoodsType_Sp, this.data.reward);
            PlayerDataManager.getInstance().stPlayerDataBase.inviteId.push(this.data.id);
            PlayerDataManager.getInstance().SaveData();
            EventMgr.getInstance().sendEvent(GameEvent.REFRESH_INVITE);
        };
        InviteItem.prototype.onInvite = function () {
        };
        InviteItem.prototype.removeEvent = function () {
            this.img_get.off(Laya.Event.CLICK, this, this.onGet);
            this.img_null.off(Laya.Event.CLICK, this, this.onInvite);
        };
        InviteItem.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.data = null;
            this.removeEvent();
        };
        return InviteItem;
    }(BaseSceneUISkin));

    var InviteView = (function (_super) {
        __extends(InviteView, _super);
        function InviteView() {
            var _this = _super.call(this) || this;
            _this.className_key = "InviteView";
            _this.showEnterType = BasePopAnimationEnterType.SCALE_MODE_BACK_MORE;
            _this.skin = "game/uiView/InviteFriendsView.json";
            return _this;
        }
        InviteView.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
            this.boxInva.removeChildren();
            this.panelInva.vScrollBarSkin = "";
            this.panelInva.elasticEnabled = true;
            this.panelInva.vScrollBar.elasticDistance = 100;
            this.panelInva.vScrollBar.elasticBackTime = 100;
        };
        InviteView.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
            if (this.isCreate) {
                this.initView();
                this.addEvent();
            }
            MiniManeger.instance.showBannerAd();
        };
        InviteView.prototype.addEvent = function () {
            this.btn_close.on(Laya.Event.CLICK, this, this.onClose);
            this.imageBtInvite.on(Laya.Event.CLICK, this, this.onInvite);
            EventMgr.getInstance().addEvent(GameEvent.REFRESH_INVITE, this, this.refreshUI);
        };
        InviteView.prototype.initView = function () {
            this.getInvitePlayer();
        };
        InviteView.prototype.getInvitePlayer = function () {
            var _this = this;
            InviteManager.getInstance().selectInfo(function (code) {
                if (code == '0') {
                    _this.refreshUI();
                }
            }, this);
        };
        InviteView.prototype.refreshUI = function () {
            var dataArr = InviteManager.getInstance().getInviteAwardData();
            console.log("InviteView >>>>>>> refreshUI", dataArr);
            for (var i = 0, len = dataArr.length; i < len; i++) {
                var item = this.boxInva.getChildAt(i);
                if (item) {
                    item.setData(dataArr[i]);
                }
                else {
                    item = new InviteItem(dataArr[i]);
                    item.x = 0;
                    item.y = (128 + 20) * i;
                    this.boxInva.addChild(item);
                }
            }
        };
        InviteView.prototype.onInvite = function () {
            SoundManager.getInstance().playEffect("button", 1);
            MiniManeger.instance.bFlagDouYin = false;
            MiniManeger.instance.shareAppMessage();
        };
        InviteView.prototype.onClose = function () {
            this.removeEvent();
            SoundManager.getInstance().playEffect("button", 1);
            this.removeUs();
        };
        InviteView.prototype.removeEvent = function () {
            this.btn_close.off(Laya.Event.CLICK, this, this.onClose);
            this.imageBtInvite.off(Laya.Event.CLICK, this, this.onInvite);
            EventMgr.getInstance().removeEvent(GameEvent.REFRESH_INVITE, this, this.refreshUI);
        };
        InviteView.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.removeEvent();
        };
        return InviteView;
    }(BaseSceneUISkinPopView));

    var SkinItemView = (function (_super) {
        __extends(SkinItemView, _super);
        function SkinItemView(data_) {
            var _this = _super.call(this) || this;
            _this.className_key = "SkinItemView";
            _this.nSkinIndex = data_;
            _this.width = 233;
            _this.height = 312;
            _this.skin = "game/uiView/SkinItemView.json";
            return _this;
        }
        SkinItemView.prototype.onEnable = function () {
            _super.prototype.onEnable.call(this);
            this.initView();
        };
        SkinItemView.prototype.onDisable = function () {
            _super.prototype.onDisable.call(this);
            this.removeEvent();
        };
        SkinItemView.prototype.setData = function (data_) {
            this.nSkinIndex = data_;
            this.initView();
        };
        SkinItemView.prototype.createChildren = function () {
            _super.prototype.createChildren.call(this);
        };
        SkinItemView.prototype.childrenCreated = function () {
        };
        SkinItemView.prototype.initView = function () {
            this.changeSkinBg(this.nSkinIndex);
            this.changeSkin(this.nSkinIndex);
        };
        SkinItemView.prototype.changeSkinBg = function (nSkinID) {
            var nState = PlayerDataManager.getInstance().checkSkinState(nSkinID);
            this.imageBg.skin = "resource/assets/img/ui/skin/skin_baseboard_" + nState.toString() + ".png";
        };
        SkinItemView.prototype.changeSkin = function (nSkinID) {
            this.imageSkinReal.skin = "resource/assets/img/ui/skin/skin_icon_" + nSkinID.toString() + ".png";
        };
        SkinItemView.prototype.addEvent = function () {
            this.on(Laya.Event.CLICK, this, this.onClick);
        };
        SkinItemView.prototype.removeEvent = function () {
            this.off(Laya.Event.CLICK, this, this.onClick);
        };
        SkinItemView.prototype.onClick = function () {
        };
        return SkinItemView;
    }(BaseSceneUISkin));

    var SkinView = (function (_super) {
        __extends(SkinView, _super);
        function SkinView() {
            var _this = _super.call(this) || this;
            _this.className_key = "SkinView";
            _this.skin = "game/uiView/SkinView.json";
            return _this;
        }
        SkinView.prototype.createChildren = function () {
            _super.prototype.createChildren.call(this);
        };
        SkinView.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        SkinView.prototype.onAddStage = function () {
            this.initView();
            this.addEvent();
        };
        SkinView.prototype.onRemoved = function () {
            this.removeEvent();
        };
        SkinView.prototype.initView = function () {
            for (var i = 0; i < 4; ++i) {
                var stSkinItemView = this.boxSkins.getChildAt(i);
                if (stSkinItemView) {
                    stSkinItemView.setData(i % 2 + 1);
                }
                else {
                    stSkinItemView = new SkinItemView(i % 2 + 1);
                    this.boxSkins.addChild(stSkinItemView);
                }
            }
        };
        SkinView.prototype.addEvent = function () {
            this.imageBtToHome.on(Laya.Event.CLICK, this, this.onClick);
            this.imageBtWatchViceo.on(Laya.Event.CLICK, this, this.onClick);
        };
        SkinView.prototype.removeEvent = function () {
            this.imageBtToHome.off(Laya.Event.CLICK, this, this.onClick);
            this.imageBtWatchViceo.off(Laya.Event.CLICK, this, this.onClick);
        };
        SkinView.prototype.onClick = function (evt) {
            switch (evt.currentTarget) {
                case this.imageBtToHome:
                    this.removeSelf();
                    break;
                case this.imageBtWatchViceo:
                    this.onWatchVideoGetSkin();
                    break;
            }
        };
        SkinView.prototype.onWatchVideoGetSkin = function () {
        };
        return SkinView;
    }(BaseSceneUISkinPopView));

    var GameHomeView = (function (_super) {
        __extends(GameHomeView, _super);
        function GameHomeView() {
            var _this = _super.call(this) || this;
            _this.className_key = "GameHomeView";
            _this.skin = "game/GameHomeView.json";
            _this.bIsRunning = false;
            _this.bWeCatShow = false;
            return _this;
        }
        GameHomeView.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
            this.btn_more.visible = false;
            if (DeviceUtil.isQQMiniGame() || DeviceUtil.isTTMiniGame()) {
                this.btn_more.visible = true;
                this.more_games.visible = this.back_btn.visible = false;
            }
            if (DeviceUtil.isWXMiniGame()) {
                this.imageWeCatMoreGame.visible = true;
                this.more_games.visible = this.back_btn.visible = true;
                this.getChildByName("imageHead").skin = "resource/assets/preloading/loading_logo_wx.png";
            }
        };
        GameHomeView.prototype.onAddStage = function () {
            MiniManeger.instance.showBannerAd();
            this.bIsRunning = true;
            this.startGameAni();
            this.initView();
        };
        GameHomeView.prototype.onRemoved = function () {
            this.bIsRunning = false;
            _super.prototype.onRemoved.call(this);
            this.removeEvent();
            Laya.Tween.clearAll(this.imageBtStartGame);
        };
        GameHomeView.prototype.addEvent = function () {
            this.imageBtStartGame.on(Laya.Event.CLICK, this, this.gameHomeStartGame);
            this.btn_more.on(Laya.Event.CLICK, this, this.onMoreGame);
            this.imageBtChoseLevel.on(Laya.Event.CLICK, this, this.openLevelView);
            this.imageBtSign.on(Laya.Event.CLICK, this, this.openSignView);
            this.imageBtShare.on(Laya.Event.CLICK, this, this.onGameHomeShare);
            this.imageBtInvital.on(Laya.Event.CLICK, this, this.onInvite);
            this.imageBtFreeSkin.on(Laya.Event.CLICK, this, this.onGetFreeSkin);
            this.imageWeCatMoreGame.on(Laya.Event.CLICK, this, this.weCatViewOper);
            this.more_games.on(Laya.Event.CLICK, this, this.wxShowMoreGame);
            this.back_btn.on(Laya.Event.CLICK, this, this.wxShowMoreGame);
        };
        GameHomeView.prototype.onMoreGame = function () {
            if (DeviceUtil.isQQMiniGame()) {
                MiniManeger.instance.showBoxAd();
            }
            else if (DeviceUtil.isTTMiniGame()) {
                MiniManeger.instance.showMoreGamesModal();
            }
        };
        GameHomeView.prototype.wxShowMoreGame = function () {
            ViewManager.getInstance().showView(MoreGameOperRequestTwo);
        };
        GameHomeView.prototype.removeEvent = function () {
            this.imageBtStartGame.off(Laya.Event.CLICK, this, this.gameHomeStartGame);
            this.btn_more.off(Laya.Event.CLICK, this, this.onMoreGame);
            this.imageBtChoseLevel.off(Laya.Event.CLICK, this, this.openLevelView);
            this.imageBtSign.off(Laya.Event.CLICK, this, this.openSignView);
            this.imageBtShare.off(Laya.Event.CLICK, this, this.onGameHomeShare);
            this.imageBtInvital.off(Laya.Event.CLICK, this, this.onInvite);
            this.imageBtFreeSkin.off(Laya.Event.CLICK, this, this.onGetFreeSkin);
            this.imageWeCatMoreGame.off(Laya.Event.CLICK, this, this.weCatViewOper);
            this.more_games.off(Laya.Event.CLICK, this, this.wxShowMoreGame);
            this.back_btn.off(Laya.Event.CLICK, this, this.wxShowMoreGame);
        };
        GameHomeView.prototype.gameHomeStartGame = function () {
            var _this = this;
            SoundManager.getInstance().playEffect("button", 1);
            var nSpCost = 1;
            var stGameConfig = ConfigManager.getInstance().getGameConfigDataByID(8);
            if (stGameConfig) {
                nSpCost = parseInt(stGameConfig.strValue);
            }
            var b = PlayerDataManager.getInstance().CheckGoods(GoodsType.enum_GoodsType_Sp, nSpCost);
            if (!b) {
                TipsManager.getInstance().showDefaultTips("体力不足");
                ViewChangeManager.getInstance().showBufferLoadingView();
                ResUtil.getIntance().loadGroups(["adsp"], function () { return __awaiter(_this, void 0, void 0, function () {
                    return __generator(this, function (_a) {
                        ViewManager.getInstance().showView(AddPsView);
                        ViewChangeManager.getInstance().hideBufferLoadingView();
                        return [2];
                    });
                }); });
                return;
            }
            PlayerDataManager.getInstance().subGoods(GoodsType.enum_GoodsType_Sp, nSpCost);
            if (DeviceUtil.isTTMiniGame()) {
                MiniManeger.instance.hideBanner();
            }
            ViewChangeManager.getInstance().CurLevelBase.startGame();
            this.removeSelf();
        };
        GameHomeView.prototype.initView = function () {
            this.PlInitView();
            this.showSignView();
            BitmapLabelUtils.setLabel(this.spLevelNum, PlayerDataManager.getInstance().getLevelToChangeMaxLevel().toString(), "resource/assets/img/ui/gamehome/maininterface_number1/maininterface_number1_", 0, ".png", "center");
        };
        GameHomeView.prototype.openLevelView = function () {
            var _this = this;
            MiniManeger.instance.reportMonitorSome(MiniEventConst.HOME_LEVEL, 1);
            SoundManager.getInstance().playEffect("button", 1);
            ViewChangeManager.getInstance().showBufferLoadingView();
            ResUtil.getIntance().loadGroups(["levelview"], function () { return __awaiter(_this, void 0, void 0, function () {
                return __generator(this, function (_a) {
                    LevelView.pHomeView = this;
                    ViewManager.getInstance().showView(LevelView);
                    ViewChangeManager.getInstance().hideBufferLoadingView();
                    return [2];
                });
            }); });
        };
        GameHomeView.prototype.openSignView = function () {
            var _this = this;
            MiniManeger.instance.reportMonitorSome(MiniEventConst.HOME_SIGIN, 1);
            SoundManager.getInstance().playEffect("button", 1);
            ViewChangeManager.getInstance().showBufferLoadingView();
            ResUtil.getIntance().loadGroups(["sign"], function () { return __awaiter(_this, void 0, void 0, function () {
                return __generator(this, function (_a) {
                    ViewManager.getInstance().showView(SignView);
                    ViewChangeManager.getInstance().hideBufferLoadingView();
                    return [2];
                });
            }); });
        };
        GameHomeView.prototype.onGameHomeShare = function () {
            MiniManeger.instance.reportMonitorSome(MiniEventConst.HOME_SHARE, 1);
            SoundManager.getInstance().playEffect("button", 1);
            MiniManeger.instance.bFlagDouYin = false;
            MiniManeger.instance.shareAppMessage();
        };
        GameHomeView.prototype.onInvite = function () {
            var _this = this;
            MiniManeger.instance.reportMonitorSome(MiniEventConst.HOME_INVATE, 1);
            SoundManager.getInstance().playEffect("button", 1);
            ViewChangeManager.getInstance().showBufferLoadingView();
            ResUtil.getIntance().loadGroups(["invite"], function () { return __awaiter(_this, void 0, void 0, function () {
                return __generator(this, function (_a) {
                    ViewManager.getInstance().showView(InviteView);
                    ViewChangeManager.getInstance().hideBufferLoadingView();
                    return [2];
                });
            }); });
        };
        GameHomeView.prototype.startGameAni = function () {
            var _this = this;
            if (!this.bIsRunning) {
                return;
            }
            Laya.Tween.clearAll(this.imageBtStartGame);
            Laya.Tween.to(this.imageBtStartGame, { scaleX: 1.1, scaleY: 1.1 }, 300, Laya.Ease.sineOut, Laya.Handler.create(this, function (args) {
                Laya.Tween.to(_this.imageBtStartGame, { scaleX: 1, scaleY: 1 }, 300, Laya.Ease.sineOut, Laya.Handler.create(_this, function (args) {
                    Laya.timer.once(0, _this, _this.startGameAni);
                }));
            }));
        };
        GameHomeView.prototype.PlInitView = function () {
            if (DeviceUtil.isTTMiniGame()) {
                this.imageBtInvital.visible = false;
                this.boxFun.width = 650;
            }
        };
        GameHomeView.prototype.showSignView = function () {
            var _this = this;
            if (PlayerDataManager.getInstance().isSign()) {
                ViewChangeManager.getInstance().showBufferLoadingView();
                ResUtil.getIntance().loadGroups(["sign"], function () { return __awaiter(_this, void 0, void 0, function () {
                    return __generator(this, function (_a) {
                        ViewManager.getInstance().showView(SignView);
                        ViewChangeManager.getInstance().hideBufferLoadingView();
                        this.addEvent();
                        return [2];
                    });
                }); });
            }
            else {
                this.addEvent();
            }
        };
        GameHomeView.prototype.onGetFreeSkin = function () {
            ViewManager.getInstance().showView(SkinView);
        };
        GameHomeView.prototype.weCatViewOper = function () {
            ViewManager.getInstance().showView(MoreGameOperRequestTwo);
        };
        return GameHomeView;
    }(BaseSceneUISkin));

    var GameView = (function (_super) {
        __extends(GameView, _super);
        function GameView() {
            var _this = _super.call(this) || this;
            _this.className_key = "GameView";
            _this.bg_img_res = null;
            _this.chooseLeft = null;
            _this.bHanderAniShow = false;
            _this.bIsRunning = false;
            _this.bLevelOver = false;
            _this.skin = "game/GameView.json";
            return _this;
        }
        GameView.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
            var self = this;
            if (!self.guessLike && DeviceUtil.isWXMiniGame() && BaseConst.infos.gameInfo.openPsAward == 1) {
                MiniManeger.instance.createGuessLike(self).then(function (guessLike) {
                    if (!guessLike) {
                        return;
                    }
                    self.guessLike = guessLike;
                    self.guessLike.x = (Laya.stage.width - self.guessLike.width) / 2;
                    self.guessLike.y = Laya.stage.height - 340;
                });
            }
        };
        GameView.prototype.onAddStage = function () {
            MiniManeger.instance.showInterstitialAd();
            EventMgr.getInstance().addEvent(GameEvent.CHANGE_VIDEO_IMAGE, this, this.stopVideoImage);
            this.initView();
            this.addEvent();
            if (DeviceUtil.isTTMiniGame()) {
                MiniManeger.instance.hideBanner();
            }
            else if (DeviceUtil.isQQMiniGame()) {
                MiniManeger.instance.showBannerAd();
            }
            else if (DeviceUtil.isWXMiniGame()) {
                MiniManeger.instance.hideBanner();
            }
        };
        GameView.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.removeEvent();
            this.bIsRunning = false;
            Laya.Tween.clearAll(this.imageBtTip);
            Laya.timer.clearAll(this);
        };
        GameView.prototype.initView = function () {
            this.initPlView();
            this.bLevelOver = false;
            this.bIsRunning = true;
            this.refreshChoose();
            this.startimageBtTipAni();
            this.imageBtTip.visible = false;
            this.imageBtGotoNextLevel.visible = false;
        };
        GameView.prototype.refreshChoose = function () {
            this.box_choose.visible = false;
            this.initViewInfo();
        };
        GameView.prototype.addEvent = function () {
            this.imageBtToHome.on(Laya.Event.CLICK, this, this.returnToGameHome);
            this.imageBtTip.on(Laya.Event.CLICK, this, this.onGameViewShareGame);
            this.imageBtRestart.on(Laya.Event.CLICK, this, this.gameViewRestartGame);
            this.imageBtGotoNextLevel.on(Laya.Event.CLICK, this, this.onGameViewWatchVideoNextLevel);
        };
        GameView.prototype.removeEvent = function () {
            this.imageBtToHome.off(Laya.Event.CLICK, this, this.returnToGameHome);
            this.icon_chooseLeft.off(Laya.Event.MOUSE_DOWN, this, this.onClick);
            this.icon_chooseRight.off(Laya.Event.MOUSE_DOWN, this, this.onClick);
            this.imageBtTip.off(Laya.Event.CLICK, this, this.onGameViewShareGame);
            this.imageBtRestart.off(Laya.Event.CLICK, this, this.gameViewRestartGame);
            this.imageBtGotoNextLevel.off(Laya.Event.CLICK, this, this.onGameViewWatchVideoNextLevel);
            EventMgr.getInstance().removeEvent(GameEvent.CHANGE_VIDEO_IMAGE, this, this.stopVideoImage);
        };
        GameView.prototype.onGameViewWatchVideoNextLevel = function () {
            var _this = this;
            MiniManeger.instance.reportMonitorSome(MiniEventConst.GAME_UP, 1);
            SoundManager.getInstance().playEffect("button", 1);
            this.imageBtGotoNextLevel.off(Laya.Event.CLICK, this, this.onGameViewWatchVideoNextLevel);
            MiniManeger.instance.playViderAd({
                successFun: function () {
                    _this.onGameViewNextLevel();
                    _this.imageBtGotoNextLevel.on(Laya.Event.CLICK, _this, _this.onGameViewWatchVideoNextLevel);
                },
                failFun: function () {
                    _this.imageBtGotoNextLevel.on(Laya.Event.CLICK, _this, _this.onGameViewWatchVideoNextLevel);
                },
                errorFun: function () {
                    _this.imageBtGotoNextLevel.on(Laya.Event.CLICK, _this, _this.onGameViewWatchVideoNextLevel);
                }
            });
        };
        GameView.prototype.onGameViewNextLevel = function () {
            if (this.bLevelOver) {
                return;
            }
            ViewChangeManager.getInstance().goToNextLevel();
        };
        GameView.prototype.gameViewRestartGame = function () {
            SoundManager.getInstance().playEffect("button", 1);
            if (this.bLevelOver) {
                return;
            }
            ViewChangeManager.getInstance().restartGame(true);
        };
        GameView.prototype.returnToGameHome = function () {
            SoundManager.getInstance().playEffect("button", 1);
            GameStateManager.getInstance().levelState = EnterGameType.enum_EnterGameType_GameHome;
            ViewChangeManager.getInstance().CurLevelBase.returnToGameHome();
            this.removeSelf();
        };
        GameView.prototype.onClick = function (evt) {
            SoundManager.getInstance().playEffect("button", 1);
            var tar = evt.currentTarget;
            var data = this.viewData_.data;
            var icon_name = '';
            switch (evt.currentTarget) {
                case this.icon_chooseLeft:
                    icon_name = data.chooseLeftName;
                    this.chooseLeft = 'left';
                    this.icon_chooseRight.off(Laya.Event.MOUSE_DOWN, this, this.onClick);
                    break;
                case this.icon_chooseRight:
                    icon_name = data.chooseRightName;
                    this.chooseLeft = 'right';
                    this.icon_chooseLeft.off(Laya.Event.MOUSE_DOWN, this, this.onClick);
                    break;
            }
            this.viewData_.callBack(icon_name == data.rightName, icon_name);
            tar.skin = 'resource/assets/img/level/baseboard2.png';
            this.imageBtTip.visible = false;
            this.imageBtGotoNextLevel.visible = false;
        };
        GameView.prototype.showResultIcon = function (isRight) {
            var _this = this;
            this.createChooseAnswer(isRight);
            if (isRight) {
                SoundManager.getInstance().playEffect("right", 1);
                Laya.timer.once(1000, this, function () {
                    _this.hideChoseView();
                });
            }
            else {
                SoundManager.getInstance().playEffect("wrong", 1);
            }
        };
        GameView.prototype.createChooseAnswer = function (isRight) {
            var tar;
            var skin = 'resource/assets/img/choose/gameinterface_icon_4.png';
            if (!isRight) {
                skin = 'resource/assets/img/choose/gameinterface_icon_5.png';
            }
            if (this.chooseLeft == 'left') {
                tar = this.icon_left;
            }
            else {
                tar = this.icon_right;
            }
            var img = new Laya.Image();
            img.skin = skin;
            img.centerX = img.centerY = 0;
            tar.addChild(img);
        };
        GameView.prototype.showChoseView = function (data) {
            this.imageBtTip.visible = true;
            this.imageBtGotoNextLevel.visible = true;
            this.initViewInfo();
            this.viewData_ = data;
            this.box_choose.visible = true;
            this.refreshViewChose();
            this.icon_chooseLeft.once(Laya.Event.MOUSE_DOWN, this, this.onClick);
            this.icon_chooseRight.once(Laya.Event.MOUSE_DOWN, this, this.onClick);
        };
        GameView.prototype.hideChoseView = function () {
            this.imageBtTip.visible = false;
            this.imageBtGotoNextLevel.visible = false;
            Laya.Tween.to(this.box_choose, { scaleX: 0, scaleY: 0 }, 500, Laya.Ease.backIn);
            this.box_choose.visible = false;
            this.icon_chooseLeft.off(Laya.Event.MOUSE_DOWN, this, this.onClick);
            this.icon_chooseRight.off(Laya.Event.MOUSE_DOWN, this, this.onClick);
            this.initViewInfo();
        };
        GameView.prototype.refreshViewChose = function () {
            this.box_choose.scale(0.2, 0.2);
            Laya.Tween.to(this.box_choose, { scaleX: 1, scaleY: 1 }, 500, Laya.Ease.backIn);
            this.icon_chooseRight.skin = 'resource/assets/img/level/baseboard1.png';
            this.icon_left.removeChildren();
            this.icon_chooseRight.removeChildren();
            this.icon_right.removeChildren();
            this.icon_chooseLeft.skin = 'resource/assets/img/level/baseboard1.png';
            this.icon_chooseLeft.removeChildren();
            this.icon_left.skin = 'resource/assets/img/choose/' + this.viewData_.data.icon_chooseLeft + '.png';
            this.icon_right.skin = 'resource/assets/img/choose/' + this.viewData_.data.icon_chooseRight + '.png';
        };
        GameView.prototype.removeSelf = function () {
            return _super.prototype.removeSelf.call(this);
        };
        GameView.prototype.refreshUpIndeInfo = function (nIndexCur, nIndexMax) {
            var nIndexTemp = 0;
            var nCur = PlayerDataManager.getInstance().stPlayerDataBase.nCurLevel;
            nCur = nCur >= PlayerDataManager.getInstance().nMaxLevelCount ? PlayerDataManager.getInstance().getCurLevelMax() - 1 : nCur;
            BitmapLabelUtils.setLabel(this.spLevelLeft, (nCur + 1).toString(), "resource/assets/img/ui/game/gameinterface_number1/gameinterface_number1_", 0, ".png", "center");
            BitmapLabelUtils.setLabel(this.spLevelRight, (nCur + 2).toString(), "resource/assets/img/ui/game/gameinterface_number1/gameinterface_number1_", 0, ".png", "center");
            var nCount = this.hBoxIndex.numChildren;
            for (var i = 0; i < nCount; ++i) {
                var stImageInfo = this.hBoxIndex.getChildAt(i);
                if (stImageInfo) {
                    if (i < nIndexMax) {
                        stImageInfo.visible = true;
                    }
                    else {
                        stImageInfo.visible = false;
                    }
                    var pImageFinish = stImageInfo.getChildAt(0);
                    if (pImageFinish) {
                        if (i < nIndexCur) {
                            pImageFinish.visible = true;
                            ++nIndexTemp;
                        }
                        else {
                            pImageFinish.visible = false;
                        }
                    }
                }
            }
            if (nIndexTemp >= nIndexMax) {
                this.bLevelOver = true;
            }
            this.boxLevelInfo.width = 108 + 20 + this.hBoxIndex.width + 20 + 108;
        };
        GameView.prototype.onGameViewShareGame = function () {
            MiniManeger.instance.reportMonitorSome(MiniEventConst.GAME_TIP, 1);
            SoundManager.getInstance().playEffect("button", 1);
            if (!this.box_choose.visible && !this.bHanderAniShow) {
                console.log("box choose not show!");
                return;
            }
            var self = this;
            MiniManeger.instance.bFlagDouYin = false;
            MiniManeger.instance.shareAppMessage({
                sucFun: function () {
                    self.onShareGameSuccess();
                }
            });
        };
        GameView.prototype.onShareGameSuccess = function () {
            var data = ViewChangeManager.getInstance().CurLevelBase.getCurChooseInfo();
            var nHandX = 0;
            var nHandY = 0;
            if (!data) {
                return;
            }
            if (data.chooseLeftName == data.rightName) {
                this.icon_chooseRight.skin = 'resource/assets/img/level/baseboard2.png';
                this.icon_chooseRight.off(Laya.Event.MOUSE_DOWN, this, this.onClick);
                nHandX = this.icon_chooseLeft.x + this.icon_chooseLeft.width / 2;
                nHandY = this.icon_chooseLeft.y + this.icon_chooseLeft.height / 2;
            }
            else {
                this.icon_chooseLeft.skin = 'resource/assets/img/level/baseboard2.png';
                nHandX = this.icon_chooseRight.x + this.icon_chooseRight.width / 2;
                nHandY = this.icon_chooseRight.y + this.icon_chooseRight.height / 2;
                this.icon_chooseLeft.off(Laya.Event.MOUSE_DOWN, this, this.onClick);
            }
            this.imageHand.x = nHandX;
            this.imageHand.y = nHandY;
            this.bHanderAniShow = true;
            this.imageHand.visible = true;
            this.handAni();
        };
        GameView.prototype.handAni = function () {
            var _this = this;
            if (!this.bHanderAniShow) {
                return;
            }
            this.imageHand.skin = "resource/assets/img/ui/game/gameinterface_icon_1.png";
            Laya.timer.once(500, this, function () {
                _this.imageHand.skin = "resource/assets/img/ui/game/gameinterface_icon_2.png";
                Laya.timer.once(500, _this, _this.handAni);
            });
        };
        GameView.prototype.initViewInfo = function () {
            this.imageHand.visible = false;
            this.bHanderAniShow = false;
            this.bLevelOver = false;
        };
        GameView.prototype.startimageBtTipAni = function () {
            var _this = this;
            if (!this.bIsRunning) {
                return;
            }
            Laya.Tween.clearAll(this.imageBtTip);
            Laya.Tween.to(this.imageBtTip, { scaleX: 1.1, scaleY: 1.1 }, 300, Laya.Ease.sineOut, Laya.Handler.create(this, function (args) {
                Laya.Tween.to(_this.imageBtTip, { scaleX: 1, scaleY: 1 }, 300, Laya.Ease.sineOut, Laya.Handler.create(_this, function (args) {
                    Laya.timer.once(0, _this, _this.startimageBtTipAni);
                }));
            }));
        };
        GameView.prototype.initPlView = function () {
            if (DeviceUtil.isTTMiniGame()) {
                this.imageTTVideo.visible = true;
            }
        };
        GameView.prototype.startVideoImage = function () {
            this.imageTTVideo.skin = "resource/assets/img/common/gaming_icon_4.png";
        };
        GameView.prototype.stopVideoImage = function () {
            console.log("stopVideoImage");
            this.imageTTVideo.skin = "resource/assets/img/common/gaming_icon_5.png";
        };
        return GameView;
    }(BaseSceneUISkinPopView));

    var FailEntryOneView = (function (_super) {
        __extends(FailEntryOneView, _super);
        function FailEntryOneView() {
            var _this = _super.call(this) || this;
            _this.className_key = "FailEntryOneView";
            _this.showEnterType = BasePopAnimationEnterType.SCALE_MODE_BACK;
            _this.nGlodCost = 200;
            _this.bFlag = false;
            _this.skin = "game/uiView/FailEntryOneView.json";
            return _this;
        }
        FailEntryOneView.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        FailEntryOneView.prototype.onAddStage = function () {
            MiniManeger.instance.showInterstitialAd();
            this.initView();
            this.addEvent();
            MiniManeger.instance.showBannerAd();
        };
        FailEntryOneView.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.removeEvent();
            if (this.aniReal) {
                this.aniReal.stop();
            }
        };
        FailEntryOneView.prototype.initView = function () {
            var _this = this;
            this.bFlag = false;
            this.forExamine();
            this.refreshLable();
            MiniManeger.instance.StopVideo();
            if (!this.aniReal) {
                this.createSkeleton("resource/assets/img/ani/failure/failure.sk");
            }
            else {
                this.aniReal.play(0, true);
            }
            this.refreshReLiveByGlod();
            Laya.timer.once(2000, this, function () {
                _this.btLable.visible = true;
            });
            if (DeviceUtil.isWXMiniGame()) {
                this.img_back.visible = true;
            }
            else {
                this.img_back.visible = false;
            }
        };
        FailEntryOneView.prototype.addEvent = function () {
            this.imageRecv.on(Laya.Event.CLICK, this, this.onCostGlodRelive);
            this.imageBtSign.on(Laya.Event.CLICK, this, this.onWatchVideoToRelive);
            this.btLable.on(Laya.Event.CLICK, this, this.onNoThanks);
            this.img_back.on(Laya.Event.CLICK, this, this.onBack);
        };
        FailEntryOneView.prototype.removeEvent = function () {
            this.imageRecv.off(Laya.Event.CLICK, this, this.onCostGlodRelive);
            this.imageBtSign.off(Laya.Event.CLICK, this, this.onWatchVideoToRelive);
            this.btLable.off(Laya.Event.CLICK, this, this.onNoThanks);
            this.img_back.off(Laya.Event.CLICK, this, this.onBack);
        };
        FailEntryOneView.prototype.onBack = function () {
            MoreGameOperRequestTwo.bOperFlag = true;
            MoreGameOperRequestTwo.bSuccess = false;
            ViewManager.getInstance().showView(MoreGameOperRequestTwo);
            this.removeSelf();
        };
        FailEntryOneView.prototype.onWatchVideoToRelive = function () {
            SoundManager.getInstance().playEffect("button", 1);
            this.imageBtSign.off(Laya.Event.CLICK, this, this.onWatchVideoToRelive);
            var self = this;
            if (ViewChangeManager.getInstance().CurLevelBase) {
                ViewChangeManager.getInstance().CurLevelBase.levelOnHide();
            }
            MiniManeger.instance.playViderAd({
                successFun: function () {
                    Laya.timer.once(100, self, function () {
                        self.onFailRestartGame();
                        if (ViewChangeManager.getInstance().CurLevelBase) {
                            ViewChangeManager.getInstance().CurLevelBase.levelOnShow();
                        }
                    });
                    console.log("onFailRestartGame xxx");
                    self.imageBtSign.on(Laya.Event.CLICK, self, self.onWatchVideoToRelive);
                },
                failFun: function () {
                    self.imageBtSign.on(Laya.Event.CLICK, self, self.onWatchVideoToRelive);
                    if (ViewChangeManager.getInstance().CurLevelBase) {
                        ViewChangeManager.getInstance().CurLevelBase.levelOnShow();
                    }
                },
                errorFun: function () {
                    self.imageBtSign.on(Laya.Event.CLICK, self, self.onWatchVideoToRelive);
                    if (ViewChangeManager.getInstance().CurLevelBase) {
                        ViewChangeManager.getInstance().CurLevelBase.levelOnShow();
                    }
                }
            });
        };
        FailEntryOneView.prototype.onFailRestartGame = function () {
            if (DeviceUtil.isTTMiniGame()) {
                MiniManeger.instance.hideBanner();
            }
            ViewChangeManager.getInstance().restartGame(false);
            this.removeSelf();
        };
        FailEntryOneView.prototype.onCostGlodRelive = function () {
            SoundManager.getInstance().playEffect("button", 1);
            var b = PlayerDataManager.getInstance().CheckGoods(GoodsType.enum_GoodsType_Glod, this.nGlodCost);
            if (!b) {
                return;
            }
            PlayerDataManager.getInstance().subGoods(GoodsType.enum_GoodsType_Glod, this.nGlodCost);
            this.onFailRestartGame();
        };
        FailEntryOneView.prototype.onNoThanks = function () {
            SoundManager.getInstance().playEffect("button", 1);
            if (DeviceUtil.isWXMiniGame()) {
                MoreGameOperRequest.bOperFlag = true;
                MoreGameOperRequest.bSuccess = false;
                ViewManager.getInstance().showView(MoreGameOperRequest);
            }
            else {
                ViewManager.getInstance().showView(FailEntryTwoView);
            }
            this.removeSelf();
        };
        FailEntryOneView.prototype.refreshReLiveByGlod = function () {
            var stGameConfig = ConfigManager.getInstance().getGameConfigDataByID(6);
            if (stGameConfig) {
                this.nGlodCost = parseInt(stGameConfig.strValue);
            }
            var b = PlayerDataManager.getInstance().CheckGoods(GoodsType.enum_GoodsType_Glod, this.nGlodCost);
            if (!b) {
                this.imageRecv.visible = false;
                return;
            }
            this.imageRecv.visible = true;
            BitmapLabelUtils.setLabel(this.spGlod, this.nGlodCost.toString(), "resource/assets/img/common/level_number1/level_number1_", 0, ".png", "left");
        };
        FailEntryOneView.prototype.createSkeleton = function (url) {
            return __awaiter(this, void 0, void 0, function () {
                var _this = this;
                return __generator(this, function (_a) {
                    return [2, new Promise(function (resolve) {
                            AnimationManager.instance.showSkeletonAnimation(url, function (boomAnimation) {
                                _this.aniReal = boomAnimation;
                                _this.aniReal.player.playbackRate = 1;
                                _this.aniReal.autoSize = true;
                                _this.aniReal.scale(1, 1);
                                _this.aniReal.play(0, true);
                                _this.aniReal.x = _this.aniReal.width / 2;
                                _this.aniReal.y = _this.aniReal.height / 2;
                                _this.boxAni.addChild(_this.aniReal);
                                resolve(boomAnimation);
                            }, 1);
                        })];
                });
            });
        };
        FailEntryOneView.prototype.refreshLable = function () {
            var _this = this;
            this.btLable.visible = false;
            Laya.timer.once(3000, this, function () {
                _this.btLable.visible = true;
            });
        };
        FailEntryOneView.prototype.forExamine = function () {
            if (!DeviceUtil.isWXMiniGame()) {
                return;
            }
            if (BaseConst.infos.gameInfo.openPsAward == 1) {
                this.btLable.y = 1400;
                this.imageRecv.bottom = 347;
                this.imageBtSign.bottom = 140;
                this.boxAni.centerY = -100;
            }
            else {
                this.btLable.y = 1310;
                this.imageRecv.bottom = 397;
                this.imageBtSign.bottom = 190;
                this.boxAni.centerY = -150;
            }
        };
        return FailEntryOneView;
    }(BaseSceneUISkinPopView));

    var ShareRecordVideoView = (function (_super) {
        __extends(ShareRecordVideoView, _super);
        function ShareRecordVideoView(data) {
            var _this = _super.call(this, data) || this;
            _this.className_key = "ShareRecordVideoView";
            _this.showEnterType = BasePopAnimationEnterType.SCALE_MODE_BACK_MORE;
            _this.nGlodCount = 50;
            _this.skin = "game/uiView/ShareRecordVideoSkinView.json";
            return _this;
        }
        ShareRecordVideoView.prototype.childrenCreated = function () { };
        ShareRecordVideoView.prototype.onAddStage = function () {
            if (this.isCreate) {
                this.init();
                this.addEvent();
            }
        };
        ShareRecordVideoView.prototype.setData = function (data) {
            _super.prototype.setData.call(this, data);
            if (this.isCreate) {
                this.init();
                this.addEvent();
            }
        };
        ShareRecordVideoView.prototype.init = function () {
            var _this = this;
            console.log("ShareRecordVideoView data ->", this.viewData_);
            ViewChangeManager.getInstance().CommonView.removeBtEvent();
            this.btn_cancel.visible = false;
            var stGameConfig = ConfigManager.getInstance().getGameConfigDataByID(18);
            if (stGameConfig) {
                this.nGlodCount = parseInt(stGameConfig.strValue);
            }
            BitmapLabelUtils.setLabel(this.shareGlodCount, this.nGlodCount.toString(), "resource/assets/img/common/level_number1/level_number1_", 0, ".png", "left");
            Laya.timer.once(2000, this, function () {
                _this.btn_cancel.visible = true;
            });
            MiniManeger.instance.showBannerAd();
        };
        ShareRecordVideoView.prototype.addEvent = function () {
            this.btn_shareVideo.on(Laya.Event.CLICK, this, this.onClick);
            this.btn_cancel.on(Laya.Event.CLICK, this, this.onClick);
        };
        ShareRecordVideoView.prototype.removeEvent = function () {
            this.btn_shareVideo.off(Laya.Event.CLICK, this, this.onClick);
            this.btn_cancel.off(Laya.Event.CLICK, this, this.onClick);
        };
        ShareRecordVideoView.prototype.onClick = function (evt) {
            switch (evt.currentTarget) {
                case this.btn_shareVideo:
                    this.shareVideo();
                    break;
                case this.btn_cancel:
                    this.removeUs();
                    break;
            }
        };
        ShareRecordVideoView.prototype.shareVideo = function () {
            var self = this;
            self.btn_shareVideo.mouseEnabled = self.btn_cancel.mouseEnabled = false;
            if (DeviceUtil.isTTMiniGame()) {
                var info = platform.getSystemInfoSync();
                if (info.appName.toUpperCase() == 'DOUYIN') {
                    MiniManeger.instance.bFlagDouYin = true;
                    MiniManeger.instance.shareAppMessage({
                        sucFun: function () {
                            console.log("发布录制视频成功");
                            TipsManager.getInstance().showDefaultTips('分享成功');
                            if (MiniManeger.instance.onShareVideoSuccess) {
                                return;
                            }
                            PlayerDataManager.getInstance().AddGoods(GoodsType.enum_GoodsType_Glod, self.nGlodCount);
                            self.btn_shareVideo.mouseEnabled = self.btn_cancel.mouseEnabled = true;
                            self.removeUs();
                        },
                        failFun: function () {
                            console.log("发布录制视频失败");
                            TipsManager.getInstance().showDefaultTips('分享失败');
                            self.btn_shareVideo.mouseEnabled = self.btn_cancel.mouseEnabled = true;
                        }
                    });
                }
                else {
                    MiniManeger.instance.shareGameVideo({
                        successFun: function () {
                            PlayerDataManager.getInstance().AddGoods(GoodsType.enum_GoodsType_Glod, self.nGlodCount);
                            self.btn_shareVideo.mouseEnabled = self.btn_cancel.mouseEnabled = true;
                            self.removeUs();
                        }, failFun: function () {
                            self.btn_shareVideo.mouseEnabled = self.btn_cancel.mouseEnabled = true;
                        }, errorFun: function () {
                            self.btn_shareVideo.mouseEnabled = self.btn_cancel.mouseEnabled = true;
                        }
                    });
                }
            }
            else {
                MiniManeger.instance.shareAppMessage();
            }
        };
        ShareRecordVideoView.prototype.removeUs = function () {
            _super.prototype.removeUs.call(this);
        };
        ShareRecordVideoView.prototype.onRemoved = function () {
            this.removeEvent();
            ViewChangeManager.getInstance().CommonView.addBtEvent();
            if (BaseConst.infos.gameInfo.openPsAward == 1 && ConfigManager.getInstance().getTreasureByCurLevel() == 1) {
                ViewManager.getInstance().showView(SuccessfulEntryOneView);
            }
            else {
                ViewManager.getInstance().showView(SuccessfulEntryThreeView);
            }
        };
        return ShareRecordVideoView;
    }(BaseSceneUISkinPopView));

    var SuccessfulEntryOneViewTwo = (function (_super) {
        __extends(SuccessfulEntryOneViewTwo, _super);
        function SuccessfulEntryOneViewTwo() {
            var _this = _super.call(this) || this;
            _this.className_key = "SuccessfulEntryOneViewTwo";
            _this.showEnterType = BasePopAnimationEnterType.SCALE_MODE_BACK;
            _this.skin = "game/uiView/SuccessfulEntryOneViewTwo.json";
            _this.bRecvAward = false;
            return _this;
        }
        SuccessfulEntryOneViewTwo.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        SuccessfulEntryOneViewTwo.prototype.onAddStage = function () {
            MiniManeger.instance.showBannerAd();
            this.initView();
            this.addEvent();
        };
        SuccessfulEntryOneViewTwo.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.removeEvent();
            if (this.aniReal) {
                this.aniReal.stop();
            }
        };
        SuccessfulEntryOneViewTwo.prototype.initView = function () {
            var _this = this;
            this.bRecvAward = false;
            this.btLable.visible = false;
            Laya.timer.once(3000, this, function () {
                _this.btLable.visible = true;
            });
            if (DeviceUtil.isWXMiniGame()) {
                this.img_back.visible = true;
            }
            else {
                this.img_back.visible = false;
            }
            this.startGameAni();
            if (!this.aniReal) {
                this.createSkeleton("resource/assets/img/ani/tiaoyue/tiaoyue.sk");
            }
            else {
                this.aniReal.play(0, true);
            }
        };
        SuccessfulEntryOneViewTwo.prototype.addEvent = function () {
            this.btLable.on(Laya.Event.CLICK, this, this.onNoThinks);
            this.imageBtSign.on(Laya.Event.CLICK, this, this.onWatchVideoRecvAward);
            this.img_back.on(Laya.Event.CLICK, this, this.onBack);
        };
        SuccessfulEntryOneViewTwo.prototype.removeEvent = function () {
            this.btLable.off(Laya.Event.CLICK, this, this.onNoThinks);
            this.imageBtSign.off(Laya.Event.CLICK, this, this.onWatchVideoRecvAward);
            this.img_back.off(Laya.Event.CLICK, this, this.onBack);
        };
        SuccessfulEntryOneViewTwo.prototype.onBack = function () {
            SoundManager.getInstance().playEffect("button", 1);
            MoreGameOperRequestTwo.bOperFlag = true;
            MoreGameOperRequestTwo.bSuccess = true;
            ViewManager.getInstance().showView(MoreGameOperRequestTwo);
            this.removeSelf();
        };
        SuccessfulEntryOneViewTwo.prototype.onNoThinks = function () {
            SoundManager.getInstance().playEffect("button", 1);
            if (DeviceUtil.isWXMiniGame()) {
                MoreGameOperRequest.bOperFlag = true;
                MoreGameOperRequest.bSuccess = true;
                ViewManager.getInstance().showView(MoreGameOperRequest);
            }
            else {
                ViewManager.getInstance().showView(SuccessfulEntryThreeView);
            }
            this.removeSelf();
        };
        SuccessfulEntryOneViewTwo.prototype.onWatchVideoRecvAward = function () {
            var _this = this;
            SoundManager.getInstance().playEffect("button", 1);
            this.imageBtSign.off(Laya.Event.CLICK, this, this.onWatchVideoRecvAward);
            var self = this;
            if (ViewChangeManager.getInstance().CurLevelBase) {
                ViewChangeManager.getInstance().CurLevelBase.levelOnHide();
            }
            MiniManeger.instance.playViderAd({
                successFun: function () {
                    Laya.timer.once(100, self, function () {
                        if (ViewChangeManager.getInstance().CurLevelBase) {
                            ViewChangeManager.getInstance().CurLevelBase.levelOnShow();
                        }
                    });
                    console.log("onFailRestartGame xxx");
                    self.imageBtSign.on(Laya.Event.CLICK, self, self.onWatchVideoRecvAward);
                    PlayerDataManager.getInstance().AddGoods(GoodsType.enum_GoodsType_Sp, 1);
                    ViewManager.getInstance().showView(SuccessfulEntryThreeView);
                    _this.removeSelf();
                },
                failFun: function () {
                    self.imageBtSign.on(Laya.Event.CLICK, self, self.onWatchVideoRecvAward);
                    if (ViewChangeManager.getInstance().CurLevelBase) {
                        ViewChangeManager.getInstance().CurLevelBase.levelOnShow();
                    }
                },
                errorFun: function () {
                    self.imageBtSign.on(Laya.Event.CLICK, self, self.onWatchVideoRecvAward);
                    if (ViewChangeManager.getInstance().CurLevelBase) {
                        ViewChangeManager.getInstance().CurLevelBase.levelOnShow();
                    }
                }
            });
        };
        SuccessfulEntryOneViewTwo.prototype.startGameAni = function () {
            var _this = this;
            Laya.Tween.clearAll(this.imageBtSign);
            Laya.Tween.to(this.imageBtSign, { scaleX: 1.1, scaleY: 1.1 }, 300, Laya.Ease.sineOut, Laya.Handler.create(this, function (args) {
                Laya.Tween.to(_this.imageBtSign, { scaleX: 1, scaleY: 1 }, 300, Laya.Ease.sineOut, Laya.Handler.create(_this, function (args) {
                    Laya.timer.once(0, _this, _this.startGameAni);
                }));
            }));
        };
        SuccessfulEntryOneViewTwo.prototype.createSkeleton = function (url) {
            return __awaiter(this, void 0, void 0, function () {
                var _this = this;
                return __generator(this, function (_a) {
                    return [2, new Promise(function (resolve) {
                            AnimationManager.instance.showSkeletonAnimation(url, function (boomAnimation) {
                                _this.aniReal = boomAnimation;
                                _this.aniReal.player.playbackRate = 1;
                                _this.aniReal.autoSize = true;
                                _this.aniReal.scale(1, 1);
                                _this.aniReal.play(0, true);
                                _this.aniReal.x = _this.aniReal.width + 400;
                                _this.aniReal.y = _this.aniReal.height / 2;
                                _this.boxAni.addChild(_this.aniReal);
                                resolve(boomAnimation);
                            }, 1);
                        })];
                });
            });
        };
        return SuccessfulEntryOneViewTwo;
    }(BaseSceneUISkinPopView));

    var LevelBase = (function (_super) {
        __extends(LevelBase, _super);
        function LevelBase(data_) {
            var _this = _super.call(this) || this;
            _this.className_key = "LevelScene";
            _this.bAniDestory = false;
            _this.index = 0;
            _this.showLabelObj = {};
            _this.showSoundObj = {};
            _this.listPlayedSoundName = [];
            _this.aniArr = [];
            _this.localAniName = null;
            _this.localData = null;
            _this.viewData_ = _this.mapData = data_;
            return _this;
        }
        LevelBase.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelBase.prototype.childrenCreated = function () {
            console.log(this.className_key + " childrenCreated!!");
            this.createLabelIcon();
            this.initView();
            this.addEvent();
        };
        LevelBase.prototype.initPlayerStatus = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _a, _b;
                return __generator(this, function (_c) {
                    switch (_c.label) {
                        case 0:
                            if (!this.mapData.player.status) return [3, 3];
                            _a = (!this.ani_player);
                            if (!_a) return [3, 2];
                            _b = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 1:
                            _a = (_b.ani_player = _c.sent());
                            _c.label = 2;
                        case 2:
                            if (this.box_player.getChildIndex(this.ani_player) == -1) {
                                this.ani_player.x = this.mapData.player.status.x;
                                this.ani_player.y = this.mapData.player.status.y;
                                this.box_player.addChild(this.ani_player);
                                this.ani_player.play(this.mapData.player.status.aniN, this.mapData.player.status.loop);
                            }
                            _c.label = 3;
                        case 3: return [2];
                    }
                });
            });
        };
        LevelBase.prototype.createLabelIcon = function () {
            var skin = 'resource/assets/img/ui/game/gameinterface_baseboard_8.png';
            this.icon_showLabel = new Laya.Image();
            this.icon_showLabel.skin = skin;
            this.icon_showLabel.visible = false;
            this.lableValue = new Laya.Label();
            this.lableValue.centerX = 0;
            this.lableValue.centerY = -25;
            this.lableValue.fontSize = 30;
            this.lableValue.wordWrap = true;
            this.lableValue.width = 250;
            this.icon_showLabel.addChild(this.lableValue);
            this.boxDialog.addChild(this.icon_showLabel);
        };
        LevelBase.prototype.setData = function (data) {
            this.viewData_ = data;
            this.mapData = data;
        };
        LevelBase.prototype.initView = function () {
            this.bReturbToHome = false;
            this.index = 0;
            this.box_player.x = (this.index) * 1080;
            this.box_game.x = (this.index) * -1080;
            this.destroyAni();
            this.showSoundObj = [];
            this.listPlayedSoundName = [];
            if (this.pGameView) {
                this.pGameView.removeSelf();
            }
            this.pGameView = null;
            this.box_player.removeChildren();
            this.box_enb.removeChildren();
            ViewChangeManager.getInstance().CurLevelBase = this;
            this.refreshViewInLevel();
            this.bAniDestory = false;
        };
        LevelBase.prototype.playAni = function (aniName, callBack, isLoop) {
            if (isLoop === void 0) { isLoop = false; }
            this.localAniName = aniName;
            if (this.ani_player != null) {
                this.ani_player.visible = true;
                if (callBack) {
                    this.ani_player.player.off(Laya.Event.STOPPED, this, this.onComplete);
                    this.ani_player.player.once(Laya.Event.STOPPED, this, this.onComplete, [aniName, callBack]);
                }
                this.ani_player.play(aniName, isLoop);
            }
            else {
                callBack && callBack(aniName);
            }
        };
        LevelBase.prototype.onComplete = function (aniName, callBack) {
            callBack && callBack(aniName);
        };
        LevelBase.prototype.createSkeleton = function (url) {
            return __awaiter(this, void 0, void 0, function () {
                var _this = this;
                return __generator(this, function (_a) {
                    return [2, new Promise(function (resolve) {
                            AnimationManager.instance.showSkeletonAnimation(url, function (boomAnimation) {
                                boomAnimation.player.playbackRate = 1;
                                boomAnimation.autoSize = true;
                                boomAnimation.scale(1, 1);
                                _this.aniArr.push(boomAnimation);
                                resolve(boomAnimation);
                            }, 1);
                        })];
                });
            });
        };
        LevelBase.prototype.onPlayOnce = function () {
            var _this = this;
            this.localData = this.mapData.player.ani[this.localAniName];
            if (this.localData) {
                if (this.localData.pop) {
                    this.popChoose();
                    if (this.localData.loop) {
                        this.playAni(this.localData.aniName, function () {
                        }, true);
                    }
                }
                else {
                    if (this.localData.isWin == 1) {
                        this.onSuccess();
                        return;
                    }
                    else if (this.localData.isWin == 2) {
                        this.pGameView.showResultIcon(false);
                        Laya.timer.once(1000, this, function () {
                            _this.onFail();
                        });
                        return;
                    }
                    this.playAni(this.localData.next, function () {
                        _this.onPlayOnce();
                    });
                }
            }
        };
        LevelBase.prototype.popChoose = function () {
            console.log("int pop choose!");
            if (!this.pGameView) {
                return;
            }
            var self = this;
            this.pGameView.showChoseView({
                data: this.mapData.player.choose[this.index], callBack: function (right, aniName) {
                    self.callBack(right, aniName);
                }
            });
        };
        LevelBase.prototype.onStart = function () {
            var _this = this;
            var start = this.mapData.player.start;
            this.localData = this.mapData.player.ani[start[this.index]];
            var bFlag = false;
            this.playAni(this.localData.aniName, function () {
                _this.onPlayOnce();
            }, bFlag);
        };
        LevelBase.prototype.callBack = function (right, aniName) {
            var _this = this;
            if (right) {
                if (this.index < this.mapData.player.choose.length) {
                    this.index++;
                }
                this.pGameView.refreshUpIndeInfo(this.index, this.mapData.player.choose.length);
                this.pGameView.showResultIcon(right);
            }
            this.playAni(aniName, function () {
                _this.onPlayOnce();
            });
        };
        LevelBase.prototype.onPlayLabel = function (evt) {
            if (this.bAniDestory)
                return;
            if (evt.name != 'undefined' || evt.name != undefined || evt.name != null) {
                if (evt.name.indexOf('sound') > -1) {
                    var soundArr = evt.name.split('_');
                    var count = soundArr[2];
                    var soundName = soundArr[1];
                    var index = null;
                    var soundObj = this.showSoundObj[this.localAniName];
                    if (soundObj == null) {
                        soundObj = {};
                        index = 1;
                        if (Number(count) == 0) {
                            (count) = 1 + '';
                        }
                    }
                    else {
                        index = soundObj[soundName];
                        if (index == null) {
                            index = 1;
                            if (Number(count) == 0) {
                                (count) = 1 + '';
                            }
                        }
                        else {
                            if (Number(count) == 0) {
                                (count) = 1 + '';
                            }
                            else {
                                return;
                            }
                        }
                    }
                    var pData = soundObj[soundName];
                    if (!pData) {
                        this.listPlayedSoundName.push(soundName);
                    }
                    soundObj[soundName] = index;
                    this.showSoundObj[this.localAniName] = soundObj;
                    SoundManager.getInstance().playEffect(soundName, Number(count));
                }
                else if (evt.name.indexOf('show') > -1) {
                    var showArr = evt.name.split("_");
                    var id = showArr[1];
                    if (!this.showLabelObj[id]) {
                        this.showLabelObj[id] = true;
                        this.showLabelView(parseInt(id));
                    }
                }
            }
        };
        LevelBase.prototype.showLabelView = function (id) {
            var self = this;
            if (self.icon_showLabel) {
                Laya.timer.clearAll(self.icon_showLabel);
                var stAnyData = ConfigManager.getInstance().getDialogInfo(id);
                console.log(stAnyData);
                if (stAnyData) {
                    if (stAnyData.nR == 1) {
                        self.icon_showLabel.scaleX = -1;
                        self.lableValue.scaleX = -1;
                    }
                    else {
                        self.icon_showLabel.scaleX = 1;
                        self.lableValue.scaleX = 1;
                    }
                    self.icon_showLabel.x = stAnyData.nX;
                    self.icon_showLabel.y = stAnyData.nY;
                    console.log("len = ", stAnyData.desc.length);
                    var nWith = stAnyData.desc.length * 30;
                    if (nWith > 250) {
                        nWith = 250;
                    }
                    self.lableValue.width = nWith;
                    self.lableValue.text = stAnyData.desc;
                    self.icon_showLabel.visible = true;
                    Laya.timer.once(1000, self.icon_showLabel, function (icon_showLabel) {
                        icon_showLabel.visible = false;
                    }, [self.icon_showLabel]);
                }
            }
        };
        LevelBase.prototype.destroyAni = function () {
            this.bAniDestory = true;
            var aniArr = this.aniArr;
            var len = aniArr.length;
            for (var i = 0; i < len; i++) {
                var ani = aniArr[i];
                if (ani) {
                    Laya.loader.clearRes(ani.url);
                    ani.stop();
                    ani.removeSelf();
                    ani.destroy(true);
                }
                ani = null;
            }
            aniArr.splice(0, len);
            this.showLabelObj = {};
            this.ani_player = null;
        };
        LevelBase.prototype.destorySound = function () {
            var nLen = this.listPlayedSoundName.length;
            for (var i = 0; i < nLen; ++i) {
                SoundManager.getInstance().destoryOneSound(this.listPlayedSoundName[i]);
            }
        };
        LevelBase.prototype.addEvent = function () {
        };
        LevelBase.prototype.removeEvent = function () {
        };
        LevelBase.prototype.removeSelf = function () {
            return _super.prototype.removeSelf.call(this);
        };
        LevelBase.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.removeEvent();
            this.destroyAni();
        };
        LevelBase.prototype.showGameHome = function () {
            this.initPlayerStatus();
            ViewManager.getInstance().showView(GameHomeView);
        };
        LevelBase.prototype.showGameView = function () {
        };
        LevelBase.prototype.startGame = function () {
            ViewChangeManager.getInstance().CommonView.removeBtEvent();
            MiniManeger.instance.StartRecorderVideo();
            this.bReturbToHome = false;
            this.pGameView = ViewManager.getInstance().showView(GameView);
            this.pGameView.startVideoImage();
            this.pGameView.refreshChoose();
            this.pGameView.refreshUpIndeInfo(this.index, this.mapData.player.choose.length);
            if (!PlayerDataManager.getInstance().checkDyLogIndexrecorded(PlayerDataManager.getInstance().getCurLevelToChallenge())) {
                ViewChangeManager.getInstance().startGame();
            }
        };
        LevelBase.prototype.stopGame = function () {
        };
        LevelBase.prototype.restartGame = function (bReStartAll) {
            MiniManeger.instance.StartRecorderVideo();
            this.bReturbToHome = false;
            this.showSoundObj = [];
            this.showLabelObj = [];
            if (this.pGameView) {
                this.pGameView.startVideoImage();
                this.pGameView.hideChoseView();
                this.pGameView.refreshChoose();
                this.pGameView.refreshUpIndeInfo(this.index, this.mapData.player.choose.length);
            }
            else {
                console.error("can not find pGameView!");
            }
        };
        LevelBase.prototype.returnToGameHome = function () {
            MiniManeger.instance.StopVideo();
            this.bReturbToHome = true;
            this.destroyAni();
            if (this.icon_showLabel) {
                this.icon_showLabel.visible = false;
            }
            if (PlayerDataManager.getInstance().getCurLevelToChallenge() == PlayerDataManager.getInstance().getLevelToChangeMaxLevel()) {
                this.initView();
            }
            else {
                if (this.pGameView) {
                    this.pGameView.removeSelf();
                }
                this.pGameView = null;
                GameStateManager.getInstance().levelState = EnterGameType.enum_EnterGameType_GameHome;
                LevelManager.getInstance().createLevelScene(PlayerDataManager.getInstance().getLevelToChangeMaxLevel());
            }
        };
        LevelBase.prototype.clearData = function () {
            this.box_player.removeChildren();
            this.box_enb.removeChildren();
        };
        LevelBase.prototype.onSuccess = function () {
            if (DeviceUtil.isTTMiniGame()) {
                MiniManeger.instance.saveCallF = function () {
                    if (MiniManeger.instance.strVideoPatch && MiniManeger.instance.strVideoPatch != "") {
                        ViewChangeManager.getInstance().showBufferLoadingView();
                        ResUtil.getIntance().loadGroups(["share"], function () {
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            ViewManager.getInstance().showView(ShareRecordVideoView);
                        });
                    }
                    else {
                        if (BaseConst.infos.gameInfo.openPsAward == 1 && ConfigManager.getInstance().getTreasureByCurLevel() == 1) {
                            ViewManager.getInstance().showView(SuccessfulEntryOneView);
                        }
                        else {
                            ViewManager.getInstance().showView(SuccessfulEntryThreeView);
                        }
                    }
                    MiniManeger.instance.saveCallF = null;
                };
            }
            MiniManeger.instance.StopVideo();
            if (this.bReturbToHome) {
                return;
            }
            console.log("Level Success!");
            if (DeviceUtil.isQQMiniGame()) {
                if (DeviceUtil.isQQMiniGame() && ConfigManager.getInstance().getTreasureByCurLevel() == 1) {
                    if (Math.random() < BaseConst.infos.gameInfo.boxWDJ) {
                        ViewManager.getInstance().showView(SuccessfulEntryOneView);
                    }
                    else {
                        ViewManager.getInstance().showView(SuccessfulEntryThreeView);
                    }
                }
                else {
                    ViewManager.getInstance().showView(SuccessfulEntryThreeView);
                }
            }
            else if (DeviceUtil.isTTMiniGame()) {
                if (MiniManeger.instance.nRecordTimeReal >= MiniManeger.instance.nRecordTime * 1000) {
                    MiniManeger.instance.saveCallF && MiniManeger.instance.saveCallF();
                }
            }
            else {
                if (BaseConst.infos.gameInfo.openPsAward == 1 && ConfigManager.getInstance().getTreasureByCurLevel() == 1) {
                    ViewManager.getInstance().showView(SuccessfulEntryOneView);
                }
                else {
                    if (PlayerDataManager.getInstance().getCurLevelToChallenge() % 2 == 1) {
                        console.log("PlayerDataManager.getInstance().getCurLevelToChallenge() = ", PlayerDataManager.getInstance().getCurLevelToChallenge());
                        ViewManager.getInstance().showView(SuccessfulEntryOneViewTwo);
                    }
                    else {
                        ViewManager.getInstance().showView(SuccessfulEntryThreeView);
                    }
                }
            }
            if (!PlayerDataManager.getInstance().checkDyLogIndexrecorded(PlayerDataManager.getInstance().getCurLevelToChallenge())) {
                ViewChangeManager.getInstance().endGame();
                PlayerDataManager.getInstance().recordDyLogIndex(PlayerDataManager.getInstance().getCurLevelToChallenge());
            }
        };
        LevelBase.prototype.onFail = function () {
            MiniManeger.instance.StopVideo();
            if (this.bReturbToHome) {
                return;
            }
            console.log("Level Fail!");
            ViewManager.getInstance().showView(FailEntryOneView);
            if (!PlayerDataManager.getInstance().checkDyLogIndexrecorded(PlayerDataManager.getInstance().getCurLevelToChallenge())) {
                ViewChangeManager.getInstance().endGame();
                PlayerDataManager.getInstance().recordDyLogIndex(PlayerDataManager.getInstance().getCurLevelToChallenge());
            }
        };
        LevelBase.prototype.closeGameView = function () {
            if (this.pGameView) {
                this.pGameView.removeSelf();
                this.pGameView = null;
            }
        };
        LevelBase.prototype.refreshViewInLevel = function () {
            var nCurState = GameStateManager.getInstance().levelState;
            if (nCurState == EnterGameType.enum_EnterGameType_GameHome) {
                this.showGameHome();
                if (this.pGameView) {
                    this.pGameView.removeSelf();
                }
            }
            else {
                if (nCurState == EnterGameType.enum_EnterGameType_Next
                    || nCurState == EnterGameType.enum_EnterGameType_ChooseLevel) {
                    this.startGame();
                }
            }
        };
        LevelBase.prototype.getCurChooseInfo = function () {
            return this.mapData.player.choose[this.index];
        };
        LevelBase.prototype.levelOnShow = function () {
        };
        LevelBase.prototype.levelOnHide = function () {
        };
        return LevelBase;
    }(BaseSceneUISkin));

    var LevelScene1 = (function (_super) {
        __extends(LevelScene1, _super);
        function LevelScene1(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene1";
            _this.skin = 'game/level/LevelScene1.json';
            return _this;
        }
        LevelScene1.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene1.prototype.startGame = function () {
            _super.prototype.startGame.call(this);
            this.initPlayer();
        };
        LevelScene1.prototype.stopGame = function () { };
        LevelScene1.prototype.restartGame = function (bReStartAll) {
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                _super.prototype.initView.call(this);
                _super.prototype.startGame.call(this);
                this.initPlayer();
                console.log("restart level1!", bReStartAll);
            }
            else {
                _super.prototype.restartGame.call(this);
                this.box_player.x = ((this.index) * 1080);
                this.box_game.x = ((this.index) * (-1080));
                console.log("restart level1!", bReStartAll);
                this.onStart();
            }
        };
        LevelScene1.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                var ani_bg, _a, _b;
                return __generator(this, function (_c) {
                    switch (_c.label) {
                        case 0:
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            return [4, this.createSkeleton(this.mapData.bg.ani.url)];
                        case 1:
                            ani_bg = _c.sent();
                            ani_bg.x = ani_bg.width / 2;
                            ani_bg.y = ani_bg.height / 2;
                            ani_bg.play(0, true);
                            this.icon_bg.addChild(ani_bg);
                            _a = !this.ani_player;
                            if (!_a) return [3, 3];
                            _b = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 2:
                            _a = (_b.ani_player = _c.sent());
                            _c.label = 3;
                        case 3:
                            this.box_player.getChildIndex(this.ani_player) == -1 && (this.box_player.addChild(this.ani_player));
                            this.ani_player.on(Laya.Event.LABEL, this, this.onPlayLabel);
                            this.ani_player.x = this.mapData.player.x;
                            this.ani_player.y = this.mapData.player.y;
                            this.onStart();
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            return [2];
                    }
                });
            });
        };
        LevelScene1.prototype.addEvent = function () { };
        LevelScene1.prototype.removeEvent = function () { };
        LevelScene1.prototype.removeSelf = function () {
            return _super.prototype.removeSelf.call(this);
        };
        LevelScene1.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            _super.prototype.clearData.call(this);
            this.removeEvent();
            this.icon_bg.removeChildren();
            console.log("level 1 on Removed!");
        };
        return LevelScene1;
    }(LevelBase));

    var LevelScene2 = (function (_super) {
        __extends(LevelScene2, _super);
        function LevelScene2(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene2";
            _this.skin = "game/level/LevelScene2.json";
            return _this;
        }
        LevelScene2.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene2.prototype.startGame = function () {
            _super.prototype.startGame.call(this);
            this.initPlayer();
        };
        LevelScene2.prototype.stopGame = function () { };
        LevelScene2.prototype.restartGame = function (bReStartAll) {
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                _super.prototype.initView.call(this);
                _super.prototype.startGame.call(this);
                this.initPlayer();
            }
            else {
                _super.prototype.restartGame.call(this);
                this.box_player.x = ((this.index) * 1080);
                this.box_game.x = ((this.index) * (-1080));
                this.onStart();
            }
        };
        LevelScene2.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                var ani_bg, _a, _b;
                return __generator(this, function (_c) {
                    switch (_c.label) {
                        case 0:
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            return [4, this.createSkeleton(this.mapData.bg.ani.url)];
                        case 1:
                            ani_bg = _c.sent();
                            ani_bg.x = ani_bg.width / 2;
                            ani_bg.y = ani_bg.height / 2;
                            ani_bg.play(0, true);
                            this.icon_bg.addChild(ani_bg);
                            _a = !this.ani_player;
                            if (!_a) return [3, 3];
                            _b = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 2:
                            _a = (_b.ani_player = _c.sent());
                            _c.label = 3;
                        case 3:
                            if (this.box_player.getChildIndex(this.ani_player) == -1) {
                                this.box_player.addChild(this.ani_player);
                            }
                            this.ani_player.on(Laya.Event.LABEL, this, this.onPlayLabel);
                            this.ani_player.x = this.mapData.player.x;
                            this.ani_player.y = this.mapData.player.y;
                            this.onStart();
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            return [2];
                    }
                });
            });
        };
        LevelScene2.prototype.addEvent = function () { };
        LevelScene2.prototype.removeEvent = function () { };
        LevelScene2.prototype.removeSelf = function () {
            return _super.prototype.removeSelf.call(this);
        };
        LevelScene2.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            _super.prototype.clearData.call(this);
            this.removeEvent();
            this.icon_bg.removeChildren();
            console.log("level 2 on Removed!");
        };
        return LevelScene2;
    }(LevelBase));

    var LevelScene3 = (function (_super) {
        __extends(LevelScene3, _super);
        function LevelScene3(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene3";
            _this.skin = "game/level/LevelScene3.json";
            return _this;
        }
        LevelScene3.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene3.prototype.startGame = function () {
            _super.prototype.startGame.call(this);
            this.initPlayer();
        };
        LevelScene3.prototype.stopGame = function () { };
        LevelScene3.prototype.restartGame = function (bReStartAll) {
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                _super.prototype.initView.call(this);
                _super.prototype.startGame.call(this);
                this.initPlayer();
            }
            else {
                _super.prototype.restartGame.call(this);
                this.box_player.x = ((this.index) * 1080);
                this.box_game.x = ((this.index) * (-1080));
                this.onStart();
            }
        };
        LevelScene3.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                var ani_bg, _a, _b;
                return __generator(this, function (_c) {
                    switch (_c.label) {
                        case 0:
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            return [4, this.createSkeleton(this.mapData.bg.ani.url)];
                        case 1:
                            ani_bg = _c.sent();
                            ani_bg.x = ani_bg.width / 2 + 450;
                            ani_bg.y = ani_bg.height / 2 + 250;
                            ani_bg.play(0, true);
                            this.box_enb.addChild(ani_bg);
                            _a = !this.ani_player;
                            if (!_a) return [3, 3];
                            _b = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 2:
                            _a = (_b.ani_player = _c.sent());
                            _c.label = 3;
                        case 3:
                            this.box_player.getChildIndex(this.ani_player) == -1 && (this.box_player.addChild(this.ani_player));
                            this.ani_player.on(Laya.Event.LABEL, this, this.onPlayLabel);
                            this.ani_player.x = this.mapData.player.x;
                            this.ani_player.y = this.mapData.player.y;
                            this.onStart();
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            return [2];
                    }
                });
            });
        };
        LevelScene3.prototype.onPlayLabel = function (evt) {
            if (this.bAniDestory)
                return;
            _super.prototype.onPlayLabel.call(this, evt);
        };
        LevelScene3.prototype.addEvent = function () { };
        LevelScene3.prototype.removeEvent = function () { };
        LevelScene3.prototype.removeSelf = function () {
            return _super.prototype.removeSelf.call(this);
        };
        LevelScene3.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.removeEvent();
        };
        return LevelScene3;
    }(LevelBase));

    var LevelScene4 = (function (_super) {
        __extends(LevelScene4, _super);
        function LevelScene4(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene4";
            _this.skin = "game/level/LevelScene4.json";
            return _this;
        }
        LevelScene4.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene4.prototype.initView = function () {
            _super.prototype.initView.call(this);
            this.stopAni();
        };
        LevelScene4.prototype.callBack = function (right, aniName) {
            var _this = this;
            if (right) {
                this.index++;
                this.pGameView.refreshUpIndeInfo(this.index, this.mapData.player.choose.length);
                this.pGameView.showResultIcon(right);
            }
            this.playAni(aniName, function () {
                _this.onPlayOnce();
            });
        };
        LevelScene4.prototype.playShandian1 = function () {
            return __awaiter(this, void 0, void 0, function () {
                var ani_shandian1;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0: return [4, this.createSkeleton('resource/assets/img/ani/common/shandian1.sk')];
                        case 1:
                            ani_shandian1 = _a.sent();
                            ani_shandian1.x = ani_shandian1.width + 1080;
                            ani_shandian1.y = ani_shandian1.height - 100;
                            ani_shandian1.player.once(Laya.Event.STOPPED, this, function () {
                                ani_shandian1.visible = false;
                            });
                            ani_shandian1.play(0, false);
                            this.box_enb1.addChild(ani_shandian1);
                            return [2];
                    }
                });
            });
        };
        LevelScene4.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _a, _b, _c, ani_rain, ani_shandian2;
                return __generator(this, function (_d) {
                    switch (_d.label) {
                        case 0:
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            _a = this;
                            return [4, this.createSkeleton(this.mapData.bg.ani.url)];
                        case 1:
                            _a.ani_bg = _d.sent();
                            this.ani_bg.x = this.ani_bg.width;
                            this.ani_bg.y = this.ani_bg.height - 100;
                            this.ani_bg.play(0, true);
                            this.box_enb.addChild(this.ani_bg);
                            _b = !this.ani_player;
                            if (!_b) return [3, 3];
                            _c = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 2:
                            _b = (_c.ani_player = _d.sent());
                            _d.label = 3;
                        case 3:
                            this.box_player.getChildIndex(this.ani_player) == -1 && (this.box_player.addChild(this.ani_player));
                            this.ani_player.on(Laya.Event.LABEL, this, this.onPlayLabel);
                            this.ani_player.x = this.mapData.player.x;
                            this.ani_player.y = this.mapData.player.y;
                            this.box_player.x = this.index * 1080;
                            this.box_game.x = this.index * -1080;
                            this.onStart();
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            return [4, this.createSkeleton('resource/assets/img/ani/common/rain.sk')];
                        case 4:
                            ani_rain = _d.sent();
                            ani_rain.x = ani_rain.width / 2 + 1080;
                            ani_rain.y = ani_rain.height / 2;
                            ani_rain.play(0, true);
                            this.box_enb.addChild(ani_rain);
                            return [4, this.createSkeleton('resource/assets/img/ani/common/shandian2.sk')];
                        case 5:
                            ani_shandian2 = _d.sent();
                            ani_shandian2.x = ani_shandian2.width + 1080 + 400;
                            ani_shandian2.y = 300;
                            ani_shandian2.play(0, true);
                            this.box_enb.addChild(ani_shandian2);
                            return [2];
                    }
                });
            });
        };
        LevelScene4.prototype.onPlayLabel = function (evt) {
            if (this.bAniDestory)
                return;
            _super.prototype.onPlayLabel.call(this, evt);
            if (evt.name == "sevent_horses2_1") {
                this.ani_bg.play('horses2', false);
            }
            else if ("showWinAni" == evt.name) {
                this.ani_bg.play('horses3', false);
            }
            else if ("sevent_shandian1_1" == evt.name) {
                this.playShandian1();
            }
            else if ("smove" == evt.name) {
                Laya.Tween.to(this.box_player, { x: 1080 }, 5500);
                Laya.Tween.to(this.box_game, { x: -1080 }, 5500);
            }
        };
        LevelScene4.prototype.addEvent = function () { };
        LevelScene4.prototype.removeEvent = function () {
            if (this.ani_player) {
                this.ani_player.off(Laya.Event.LABEL, this, this.onPlayLabel);
            }
        };
        LevelScene4.prototype.removeSelf = function () {
            return _super.prototype.removeSelf.call(this);
        };
        LevelScene4.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.removeEvent();
            this.stopAni();
            this.box_enb1.removeChildren();
        };
        LevelScene4.prototype.startGame = function () {
            _super.prototype.startGame.call(this);
            this.initPlayer();
        };
        LevelScene4.prototype.stopGame = function () { };
        LevelScene4.prototype.restartGame = function (bReStartAll) {
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                _super.prototype.initView.call(this);
                _super.prototype.startGame.call(this);
                this.initPlayer();
            }
            else {
                _super.prototype.restartGame.call(this);
                if (this.index == 0) {
                    this.ani_bg.play('horses1', false);
                }
                this.box_player.x = ((this.index) * 1080);
                this.box_game.x = ((this.index) * (-1080));
                this.onStart();
            }
        };
        LevelScene4.prototype.stopAni = function () {
            Laya.Tween.clearAll(this.box_player);
            Laya.Tween.clearAll(this.box_game);
        };
        return LevelScene4;
    }(LevelBase));

    var LevelScene5 = (function (_super) {
        __extends(LevelScene5, _super);
        function LevelScene5(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene5";
            _this.dogName = null;
            _this.skin = "game/level/LevelScene5.json";
            return _this;
        }
        LevelScene5.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene5.prototype.initView = function () {
            _super.prototype.initView.call(this);
            this.stopAni();
        };
        LevelScene5.prototype.onPlayOnce = function () {
            var _this = this;
            this.localData = this.mapData.player.ani[this.localAniName];
            if (this.localData) {
                if (this.localData.pop) {
                    this.popChoose();
                    if (this.localData.loop) {
                        this.playAni(this.localData.aniName, function () {
                        }, true);
                    }
                }
                else {
                    if (this.localData.isWin == 1) {
                        this.onSuccess();
                        return;
                    }
                    else if (this.localData.isWin == 2) {
                        this.pGameView.showResultIcon(false);
                        Laya.timer.once(1000, this, function () {
                            _this.onFail();
                        });
                        return;
                    }
                    if (this.localData.next) {
                        this.playAni(this.localData.next, function () {
                            _this.onPlayOnce();
                        });
                    }
                    else {
                        if (this.localData.loop) {
                            this.playAni(this.localData.aniName, function () {
                            }, true);
                        }
                    }
                }
            }
        };
        LevelScene5.prototype.callBack = function (right, aniName) {
            var _this = this;
            if (right) {
                this.index++;
                this.pGameView.refreshUpIndeInfo(this.index, this.mapData.player.choose.length);
                this.pGameView.showResultIcon(right);
                if (aniName == '5-4') ;
                else if (aniName == '5-7') {
                    this.createDog();
                    Laya.Tween.to(this.box_player, { x: (this.index + 1) * 1080 }, 2170);
                    Laya.Tween.to(this.box_game, { x: (this.index + 1) * -1080 }, 2170);
                }
                else if (aniName == '5-15') {
                    this.ani_dog && this.ani_dog.play('gou3', false);
                    this.dogName = "gou3";
                }
            }
            else {
                if (aniName == '5-9') {
                    this.ani_dog && this.ani_dog.play('gou2', false);
                    this.dogName = "gou2";
                }
            }
            this.playAni(aniName, function () {
                _this.onPlayOnce();
            });
        };
        LevelScene5.prototype.createDog = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _a;
                return __generator(this, function (_b) {
                    switch (_b.label) {
                        case 0:
                            this.box_enb1.removeChildren();
                            _a = this;
                            return [4, this.createSkeleton("resource/assets/img/ani/level5/checkpoint5g.sk")];
                        case 1:
                            _a.ani_dog = _b.sent();
                            this.ani_dog.x = this.ani_dog.width / 2 + 1080 * 3 - 300;
                            this.ani_dog.y = this.ani_dog.height / 2 + 500;
                            this.ani_dog.play('gou1', true);
                            this.dogName = "gou1";
                            this.ani_dog.player.on(Laya.Event.STOPPED, this, this.onDogPlayend);
                            this.ani_dog.on(Laya.Event.LABEL, this, this.onDogPlaySound);
                            this.box_enb1.addChild(this.ani_dog);
                            return [2];
                    }
                });
            });
        };
        LevelScene5.prototype.onDogPlaySound = function (evt) {
            _super.prototype.onPlayLabel.call(this, evt);
            this.ani_dog.off(Laya.Event.LABEL, this, this.onDogPlaySound);
        };
        LevelScene5.prototype.onDogPlayend = function () {
            var _this = this;
            if (this.dogName == 'gou2') {
                this.playAni('5-12', function () {
                    _this.onPlayOnce();
                });
            }
            else if (this.dogName == 'gou3') {
                this.playAni('5-14', function () {
                    _this.onPlayOnce();
                });
            }
            this.ani_dog.player.off(Laya.Event.STOPPED, this, this.onDogPlayend);
        };
        LevelScene5.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _a, _b, _c, ani_rain;
                return __generator(this, function (_d) {
                    switch (_d.label) {
                        case 0:
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            _a = this;
                            return [4, this.createSkeleton(this.mapData.bg.ani.url)];
                        case 1:
                            _a.ani_bg = _d.sent();
                            this.ani_bg.x = this.ani_bg.width + 1080 + 540;
                            this.ani_bg.y = this.ani_bg.height / 2;
                            this.ani_bg.play(0, true);
                            this.box_enb2.addChild(this.ani_bg);
                            _b = !this.ani_player;
                            if (!_b) return [3, 3];
                            _c = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 2:
                            _b = (_c.ani_player = _d.sent());
                            _d.label = 3;
                        case 3:
                            this.box_player.getChildIndex(this.ani_player) == -1 && (this.box_player.addChild(this.ani_player));
                            this.ani_player.on(Laya.Event.LABEL, this, this.onPlayLabel);
                            this.ani_player.x = this.mapData.player.x;
                            this.ani_player.y = this.mapData.player.y;
                            this.box_game.x = (this.index) * -1080;
                            this.onStart();
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            return [4, this.createSkeleton('resource/assets/img/ani/common/rain.sk')];
                        case 4:
                            ani_rain = _d.sent();
                            ani_rain.x = ani_rain.width / 2;
                            ani_rain.y = ani_rain.height / 2;
                            ani_rain.play(0, true);
                            this.box_enb.addChild(ani_rain);
                            Laya.Tween.to(this.box_player, { x: (this.index + 1) * 1080 }, 3250);
                            Laya.Tween.to(this.box_game, { x: (this.index + 1) * -1080 }, 3250);
                            return [2];
                    }
                });
            });
        };
        LevelScene5.prototype.onPlayLabel = function (evt) {
            if (this.bAniDestory)
                return;
            _super.prototype.onPlayLabel.call(this, evt);
            if (evt.name == "sevent_horses2_1") ;
            else if ("showWinAni" == evt.name) ;
            else if ("smove" == evt.name) {
                Laya.Tween.to(this.box_player, { x: (this.index + 1) * 1080 }, 2500);
                Laya.Tween.to(this.box_game, { x: (this.index + 1) * -1080 }, 2500);
            }
        };
        LevelScene5.prototype.addEvent = function () { };
        LevelScene5.prototype.removeEvent = function () {
            if (this.ani_player) {
                this.ani_player.off(Laya.Event.LABEL, this, this.onPlayLabel);
            }
        };
        LevelScene5.prototype.removeSelf = function () {
            return _super.prototype.removeSelf.call(this);
        };
        LevelScene5.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.removeEvent();
            this.stopAni();
            this.box_enb1.removeChildren();
            this.box_enb2.removeChildren();
        };
        LevelScene5.prototype.startGame = function () {
            _super.prototype.startGame.call(this);
            this.initPlayer();
        };
        LevelScene5.prototype.stopGame = function () { };
        LevelScene5.prototype.restartGame = function (bReStartAll) {
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                _super.prototype.initView.call(this);
                _super.prototype.startGame.call(this);
                this.initPlayer();
            }
            else {
                _super.prototype.restartGame.call(this);
                if (this.index == 0) {
                    this.box_player.x = 0;
                    this.box_game.x = 0;
                    Laya.Tween.to(this.box_player, { x: (this.index + 1) * 1080 }, 3250);
                    Laya.Tween.to(this.box_game, { x: (this.index + 1) * -1080 }, 3250);
                }
                else if (this.index == 1 || this.index == 2) {
                    this.box_player.x = ((this.index + 1) * 1080);
                    this.box_game.x = ((this.index + 1) * (-1080));
                    if (this.index == 2) {
                        this.ani_dog.player.on(Laya.Event.STOPPED, this, this.onDogPlayend);
                    }
                }
                this.onStart();
            }
        };
        LevelScene5.prototype.stopAni = function () {
            Laya.Tween.clearAll(this.box_player);
            Laya.Tween.clearAll(this.box_game);
        };
        return LevelScene5;
    }(LevelBase));

    var LevelScene6 = (function (_super) {
        __extends(LevelScene6, _super);
        function LevelScene6(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene6";
            _this.nAddTemp = 0;
            _this.skin = "game/level/LevelScene6.json";
            return _this;
        }
        LevelScene6.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene6.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        LevelScene6.prototype.initView = function () {
            this.stopAni();
            _super.prototype.initView.call(this);
            this.nAddTemp = 0;
            this.box_enb.removeChildren();
            this.box_enb1.removeChildren();
            this.box_player.removeChildren();
            this.box_enbyan2.removeChildren();
            this.box_enbyan3.removeChildren();
            this.box_enbyan4.removeChildren();
            this.box_enbhuo3.removeChildren();
            this.box_enbhuo2.removeChildren();
        };
        LevelScene6.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.stopAni();
            this.box_enb.removeChildren();
            this.box_enb1.removeChildren();
            this.box_player.removeChildren();
            this.box_enbyan2.removeChildren();
            this.box_enbyan3.removeChildren();
            this.box_enbyan4.removeChildren();
            this.box_enbhuo3.removeChildren();
            this.box_enbhuo2.removeChildren();
        };
        LevelScene6.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _a, _b, _c, _d, _e, _f;
                return __generator(this, function (_g) {
                    switch (_g.label) {
                        case 0:
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            _a = this;
                            return [4, this.createSkeleton(this.mapData.bg.ani.url)];
                        case 1:
                            _a.ani_bg = _g.sent();
                            this.ani_bg.x = this.ani_bg.width / 2 + 280;
                            this.ani_bg.y = this.ani_bg.height / 2 + 400;
                            this.ani_bg.scaleX = 0.35;
                            this.ani_bg.scaleY = 0.35;
                            this.ani_bg.play("huo1", true);
                            this.box_enb.addChild(this.ani_bg);
                            _b = !this.ani_player;
                            if (!_b) return [3, 3];
                            _c = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 2:
                            _b = (_c.ani_player = _g.sent());
                            _g.label = 3;
                        case 3:
                            this.box_player.getChildIndex(this.ani_player) == -1 && (this.box_player.addChild(this.ani_player));
                            this.ani_player.on(Laya.Event.LABEL, this, this.onPlayLabel);
                            this.ani_player.x = this.mapData.player.x;
                            this.ani_player.y = this.mapData.player.y;
                            this.box_player.x = (this.index) * 1080;
                            this.box_game.x = (this.index) * -1080;
                            this.onStart();
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            _d = this;
                            return [4, this.createSkeleton(this.mapData.bg.ani.url)];
                        case 4:
                            _d.ani_bg2 = _g.sent();
                            _e = this;
                            return [4, this.createSkeleton(this.mapData.bg.ani.url)];
                        case 5:
                            _e.ani_bg3 = _g.sent();
                            _f = this;
                            return [4, this.createSkeleton(this.mapData.bg.ani.url)];
                        case 6:
                            _f.ani_bg4 = _g.sent();
                            this.box_enbyan2.removeChildren();
                            this.box_enbyan3.removeChildren();
                            this.box_enbyan4.removeChildren();
                            this.ani_bg2.x = 0;
                            this.ani_bg2.y = this.ani_bg.height / 2 + 600;
                            this.ani_bg2.play('yan3', true);
                            this.box_enbyan2.addChild(this.ani_bg2);
                            this.ani_bg3.x = 0;
                            this.ani_bg3.y = this.ani_bg.height / 2 + 700;
                            this.ani_bg3.play('yan4', true);
                            this.box_enbyan3.addChild(this.ani_bg3);
                            this.ani_bg4.x = 0;
                            this.ani_bg4.y = this.ani_bg.height / 2 + 700;
                            this.ani_bg4.play('yan4', true);
                            this.box_enbyan4.addChild(this.ani_bg4);
                            return [2];
                    }
                });
            });
        };
        LevelScene6.prototype.onPlayLabel = function (evt) {
            if (this.bAniDestory)
                return;
            _super.prototype.onPlayLabel.call(this, evt);
            if (this.ani_bg && evt.name == "sevent_huo2_1") {
                this.ani_bg.scaleX = 1;
                this.ani_bg.scaleY = 1;
                this.ani_bg.x = this.ani_bg.width / 2 - 66;
                this.ani_bg.y = this.ani_bg.height / 2 + 500;
                this.ani_bg.play('huo2', false);
            }
            if (this.ani_bg2 && evt.name == "sevent_huo2_2") {
                this.ani_bg2.scaleX = 1;
                this.ani_bg2.scaleY = 1;
                this.ani_bg2.x = 0;
                this.ani_bg2.y = this.ani_bg.height / 2 + 150;
                this.ani_bg2.play('huo2', false);
                this.box_enbhuo2.addChild(this.ani_bg2);
            }
            if (this.ani_bg && evt.name == "sevent_huo3_1") {
                this.ani_bg.scaleX = 1;
                this.ani_bg.scaleY = 1;
                this.ani_bg.x = 0;
                this.ani_bg.y = this.ani_bg.height / 2 + 150 + this.nAddTemp;
                this.ani_bg.play('huo3', false);
                this.box_enbhuo3.addChild(this.ani_bg);
            }
            if (this.ani_bg && evt.name == "sevent_yan2_1") {
                this.ani_bg.scaleX = 1;
                this.ani_bg.scaleY = 1;
                this.ani_bg.x = 0;
                this.ani_bg.y = this.ani_bg.height / 2 + 400;
                this.ani_bg.play('yan2', false);
                this.box_enb1.addChild(this.ani_bg);
            }
            if (evt.name == "smove") {
                Laya.Tween.to(this.box_player, { x: (this.index + 1) * 1080 }, 2500);
                Laya.Tween.to(this.box_game, { x: (this.index + 1) * -1080 }, 2500);
            }
            if (evt.name == "smove2") {
                Laya.Tween.to(this.box_player, { x: (this.index + 2) * 1080 }, 4880);
                Laya.Tween.to(this.box_game, { x: (this.index + 2) * -1080 }, 4880);
            }
        };
        LevelScene6.prototype.callBack = function (right, aniName) {
            var _this = this;
            if (right) {
                this.index++;
                this.pGameView.refreshUpIndeInfo(this.index, this.mapData.player.choose.length);
                this.pGameView.showResultIcon(right);
                if (aniName == "6-3") {
                    Laya.Tween.to(this.box_player, { x: (this.index + 1) * 1080 + 100 }, 4000);
                    Laya.Tween.to(this.box_game, { x: (this.index + 1) * -1080 }, 4000);
                }
            }
            this.playAni(aniName, function () {
                _this.onPlayOnce();
            });
        };
        LevelScene6.prototype.Animatedscenes = function () {
            var _this = this;
            this.box_Animatedscenes.visible = true;
            this.box_game.visible = false;
            this.boxBg.alpha = 0;
            this.imageBg.scaleX = 1;
            this.imageBg.scaleY = 1;
            this.imageBg.x = 540;
            this.imageBg.y = -350;
            this.imageMot.scaleX = 1;
            this.imageMot.scaleY = 1;
            this.imageMot.x = 540;
            this.imageMot.bottom = 700;
            this.imageShip.scaleX = 1;
            this.imageShip.scaleY = 1;
            this.imageShip.x = 562;
            this.imageMot.bottom = 750;
            this.imageWaterBlue1.scaleX = 1;
            this.imageWaterBlue1.scaleY = 1;
            this.imageWaterBlue1.x = 540;
            this.imageWaterBlue1.bottom = 500;
            this.imageWaterBlue2.scaleX = 1;
            this.imageWaterBlue2.scaleY = 1;
            this.imageWaterBlue2.x = 1620;
            this.imageWaterBlue2.bottom = 500;
            this.imageWaterBotton1.scaleX = 1;
            this.imageWaterBotton1.scaleY = 1;
            this.imageWaterBotton1.x = 540;
            this.imageWaterBotton1.bottom = 0;
            this.imageWaterBotton2.scaleX = 1;
            this.imageWaterBotton2.scaleY = 1;
            this.imageWaterBotton2.x = 1620;
            this.imageWaterBotton2.bottom = 0;
            var scaleNum = 1.3;
            Laya.Tween.to(this.imageBg, { scaleX: scaleNum, scaleY: scaleNum }, 2000);
            Laya.Tween.to(this.imageMot, { scaleX: scaleNum, scaleY: scaleNum }, 2000);
            Laya.Tween.to(this.imageShip, { scaleX: scaleNum, scaleY: scaleNum }, 2000);
            Laya.Tween.to(this.imageWaterBlue1, { x: -540 }, 2000);
            Laya.Tween.to(this.imageWaterBlue2, { x: 540 }, 2000);
            Laya.Tween.to(this.imageWaterBotton1, { x: -540 }, 2000);
            Laya.Tween.to(this.imageWaterBotton2, { x: 540 }, 2000);
            Laya.timer.once(1800, this, function () {
                Laya.Tween.to(_this.boxBg, { alpha: 1 }, 500, null, Laya.Handler.create(_this, function (args) {
                    _this.box_Animatedscenes.visible = false;
                    _this.boxBg.alpha = 0;
                    _this.box_game.visible = true;
                    _this.pGameView = ViewManager.getInstance().showView(GameView);
                    _this.pGameView.refreshUpIndeInfo(_this.index, _this.mapData.player.choose.length);
                    _this.initPlayer();
                }));
            });
        };
        LevelScene6.prototype.startGame = function () {
            _super.prototype.startGame.call(this);
            this.clearData();
            this.Animatedscenes();
        };
        LevelScene6.prototype.stopGame = function () { };
        LevelScene6.prototype.restartGame = function (bReStartAll) {
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                _super.prototype.initView.call(this);
                _super.prototype.startGame.call(this);
                this.initPlayer();
            }
            else {
                _super.prototype.restartGame.call(this);
                if (this.index == 0) {
                    this.box_player.x = ((this.index) * 1080);
                    this.box_game.x = ((this.index) * (-1080));
                    this.box_enb.removeChildren();
                    this.ani_bg.x = this.ani_bg.width / 2 - 270;
                    this.ani_bg.y = this.ani_bg.height / 2 - 70;
                    this.ani_bg.scaleX = 0.35;
                    this.ani_bg.scaleY = 0.35;
                    this.ani_bg.play("huo1", true);
                    this.box_enb.addChild(this.ani_bg);
                    this.box_enbhuo2.removeChildren();
                    this.box_enb1.removeChildren();
                }
                else if (this.index == 1) {
                    this.box_enbhuo3.removeChildren();
                    this.nAddTemp = 250;
                }
                this.onStart();
            }
        };
        LevelScene6.prototype.clearData = function () {
            this.box_player.removeChildren();
            this.box_enb.removeChildren();
            this.box_enb1.removeChildren();
            this.box_player.removeChildren();
            this.box_enbhuo3.removeChildren();
            this.box_enbhuo2.removeChildren();
        };
        LevelScene6.prototype.stopAni = function () {
            Laya.Tween.clearAll(this.box_player);
            Laya.Tween.clearAll(this.box_game);
        };
        return LevelScene6;
    }(LevelBase));

    var LevelScene7 = (function (_super) {
        __extends(LevelScene7, _super);
        function LevelScene7(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene7";
            _this.roleAniTweenUp1 = null;
            _this.roleAniTweenUp2 = null;
            _this.roleAniTweenDown1 = null;
            _this.roleAniTweenDown2 = null;
            _this.nWaterTime = 8000;
            _this.bAniOpen = false;
            _this.skin = "game/level/LevelScene7.json";
            return _this;
        }
        LevelScene7.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene7.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        LevelScene7.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.stopWaterAni();
            this.roleAniTweenUp1 = null;
            this.roleAniTweenUp2 = null;
            this.roleAniTweenDown1 = null;
            this.roleAniTweenDown2 = null;
        };
        LevelScene7.prototype.initView = function () {
            this.stopWaterAni();
            this.initChangeColor();
            this.initWaterPos();
            _super.prototype.initView.call(this);
        };
        LevelScene7.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _a, _b, _c, ani_rain, ani_rain2;
                var _this = this;
                return __generator(this, function (_d) {
                    switch (_d.label) {
                        case 0:
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            _a = this;
                            return [4, this.createSkeleton(this.mapData.bg.ani.url)];
                        case 1:
                            _a.ani_bg = _d.sent();
                            this.ani_bg.x = -5;
                            this.ani_bg.y = 610;
                            this.ani_bg.play("huo71", false);
                            this.box_fire.addChild(this.ani_bg);
                            _b = !this.ani_player;
                            if (!_b) return [3, 3];
                            _c = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 2:
                            _b = (_c.ani_player = _d.sent());
                            _d.label = 3;
                        case 3:
                            this.box_player.getChildIndex(this.ani_player) == -1 && (this.box_player.addChild(this.ani_player));
                            this.ani_player.on(Laya.Event.LABEL, this, this.onPlayLabel);
                            this.ani_player.x = this.mapData.player.x;
                            this.ani_player.y = this.mapData.player.y;
                            this.box_player.x = (this.index) * 1080;
                            this.box_game.x = (this.index) * -1080;
                            return [4, this.createSkeleton('resource/assets/img/ani/common/rain.sk')];
                        case 4:
                            ani_rain = _d.sent();
                            ani_rain.x = ani_rain.width / 2;
                            ani_rain.y = ani_rain.height / 2;
                            ani_rain.play(0, true);
                            this.box_enb.addChild(ani_rain);
                            return [4, this.createSkeleton('resource/assets/img/ani/common/rain.sk')];
                        case 5:
                            ani_rain2 = _d.sent();
                            ani_rain2.x = ani_rain.width / 2;
                            ani_rain2.y = ani_rain.height / 2;
                            ani_rain2.play(0, true);
                            this.box_enb1.addChild(ani_rain2);
                            Laya.Tween.to(this.box_player, { x: (this.index + 1) * 1080 }, 3250);
                            Laya.Tween.to(this.box_watorUp, { x: (this.index + 1) * 1080 }, 3250);
                            Laya.Tween.to(this.box_watorDown, { x: (this.index + 1) * 1080 }, 3250);
                            Laya.Tween.to(this.box_game, { x: (this.index + 1) * -1080 }, 3250, null, Laya.Handler.create(this, function (args) {
                                _this.popChoose();
                            }));
                            this.onStart();
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            return [2];
                    }
                });
            });
        };
        LevelScene7.prototype.onPlayLabel = function (evt) {
            if (this.bAniDestory)
                return;
            _super.prototype.onPlayLabel.call(this, evt);
            if ("sevent_shandian1_1" == evt.name) {
                this.playShandian1();
            }
            if ("smove2" == evt.name) {
                Laya.Tween.to(this.box_game, { x: (this.index + 1) * -1080 }, 3000);
                Laya.Tween.to(this.box_player, { x: (this.index + 1) * 1080 }, 3000);
                Laya.Tween.to(this.box_watorUp, { x: (this.index + 1) * 1080 }, 3000);
                Laya.Tween.to(this.box_watorDown, { x: (this.index + 1) * 1080 }, 3000);
            }
            else if ("smove3" == evt.name) {
                Laya.Tween.to(this.box_game, { x: (this.index + 1) * -1080 }, 3000);
                Laya.Tween.to(this.box_player, { x: (this.index + 1) * 1080 }, 3000);
                Laya.Tween.to(this.box_watorUp, { x: (this.index + 1) * 1080 }, 3000);
                Laya.Tween.to(this.box_watorDown, { x: (this.index + 1) * 1080 }, 3000);
            }
            else if ("smove5" == evt.name) {
                Laya.Tween.to(this.box_game, { x: (this.index + 2) * -1080 }, 6000);
                Laya.Tween.to(this.box_player, { x: (this.index + 2) * 1080 }, 6000);
                Laya.Tween.to(this.box_watorUp, { x: (this.index + 2) * 1080 }, 6000);
                Laya.Tween.to(this.box_watorDown, { x: (this.index + 2) * 1080 }, 6000);
            }
            else if ("sevent_bs_1" == evt.name) {
                this.changeColorAni();
                this.box_enb1.removeChildren();
                SoundManager.getInstance().soundOpen = false;
                SoundManager.getInstance().soundOpen = true;
            }
        };
        LevelScene7.prototype.playShandian1 = function () {
            return __awaiter(this, void 0, void 0, function () {
                var ani_shandian1;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0: return [4, this.createSkeleton('resource/assets/img/ani/common/shandian1.sk')];
                        case 1:
                            ani_shandian1 = _a.sent();
                            ani_shandian1.x = ani_shandian1.width;
                            ani_shandian1.y = ani_shandian1.height;
                            ani_shandian1.player.once(Laya.Event.STOPPED, this, function () {
                                ani_shandian1.visible = false;
                            });
                            ani_shandian1.play(0, false);
                            this.box_enb1.addChild(ani_shandian1);
                            return [2];
                    }
                });
            });
        };
        LevelScene7.prototype.callBack = function (right, aniName) {
            var _this = this;
            if (right) {
                this.index++;
                this.pGameView.refreshUpIndeInfo(this.index, this.mapData.player.choose.length);
                this.pGameView.showResultIcon(right);
            }
            this.playAni(aniName, function () {
                _this.onPlayOnce();
            });
        };
        LevelScene7.prototype.startGame = function () {
            this.initChangeColor();
            this.initWaterPos();
            this.clearData();
            _super.prototype.startGame.call(this);
            this.initPlayer();
            this.stopWaterAni();
            this.openWaterAni();
        };
        LevelScene7.prototype.stopGame = function () { };
        LevelScene7.prototype.restartGame = function (bReStartAll) {
            var _this = this;
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                this.initWaterPos();
                this.initView();
                _super.prototype.startGame.call(this);
                this.initPlayer();
                this.stopWaterAni();
                this.openWaterAni();
            }
            else {
                _super.prototype.restartGame.call(this);
                if (this.index == 0) {
                    this.ani_bg.play("huo71", false);
                    this.box_player.x = 0;
                    this.box_game.x = 0;
                    this.initWaterPos();
                    this.stopWaterAni();
                    this.openWaterAni();
                    Laya.Tween.to(this.box_player, { x: (this.index + 1) * 1080 }, 3250);
                    Laya.Tween.to(this.box_watorUp, { x: (this.index + 1) * 1080 }, 3250);
                    Laya.Tween.to(this.box_watorDown, { x: (this.index + 1) * 1080 }, 3250);
                    Laya.Tween.to(this.box_game, { x: (this.index + 1) * -1080 }, 3250, null, Laya.Handler.create(this, function (args) {
                        _this.popChoose();
                    }));
                }
                this.onStart();
            }
        };
        LevelScene7.prototype.initWaterPos = function () {
            this.box_watorUp.x = 0;
            this.box_watorDown.x = 0;
            this.boxWaterUp1.x = 0;
            this.boxWaterUp2.x = 1700;
            this.boxWaterDown1.x = 0;
            this.boxWaterDown2.x = 1700;
        };
        LevelScene7.prototype.stopWaterAni = function () {
            this.bAniOpen = false;
            Laya.Tween.clearAll(this.boxWaterUp1);
            Laya.Tween.clearAll(this.boxWaterUp2);
            Laya.Tween.clearAll(this.boxWaterDown1);
            Laya.Tween.clearAll(this.boxWaterDown2);
            this.roleAniTweenUp1 = null;
            this.roleAniTweenUp2 = null;
            this.roleAniTweenDown1 = null;
            this.roleAniTweenDown2 = null;
            Laya.Tween.clearAll(this.box_player);
            Laya.Tween.clearAll(this.box_watorUp);
            Laya.Tween.clearAll(this.box_watorDown);
            Laya.Tween.clearAll(this.box_game);
        };
        LevelScene7.prototype.openWaterAni = function () {
            this.bAniOpen = true;
            this.nWaterTime = 8000;
            this.boxWaterUp1Start();
            this.waterAniUp2Loop();
            this.boxWaterDown1Start();
            this.waterAniDown2Loop();
        };
        LevelScene7.prototype.boxWaterUp1Start = function () {
            var _this = this;
            if (!this.bAniOpen) {
                return;
            }
            this.roleAniTweenUp1 = Laya.Tween.to(this.boxWaterUp1, { x: -1720 }, this.nWaterTime / 2, null, Laya.Handler.create(this, function (args) {
                _this.waterAniUp1Loop();
            }));
        };
        LevelScene7.prototype.waterAniUp1Loop = function () {
            var _this = this;
            if (!this.bAniOpen) {
                return;
            }
            console.log("this.boxWaterUp2.x = ", this.boxWaterUp2.x, "this.box_watorUp.x = ", this.box_watorUp.x);
            this.boxWaterUp1.x = this.boxWaterUp2.x + 1700;
            this.roleAniTweenUp1 = Laya.Tween.to(this.boxWaterUp1, { x: -1720 }, this.nWaterTime, null, Laya.Handler.create(this, function (args) {
                Laya.timer.once(0, _this, _this.waterAniUp1Loop);
            }));
        };
        LevelScene7.prototype.waterAniUp2Loop = function () {
            var _this = this;
            if (!this.bAniOpen) {
                return;
            }
            console.log("this.boxWaterUp1.x = ", this.boxWaterUp1.x, "this.box_watorUp.x = ", this.box_watorUp.x);
            this.boxWaterUp2.x = this.boxWaterUp1.x + 1700;
            this.roleAniTweenUp2 = Laya.Tween.to(this.boxWaterUp2, { x: -1720 }, this.nWaterTime, null, Laya.Handler.create(this, function (args) {
                Laya.timer.once(0, _this, _this.waterAniUp2Loop);
            }));
        };
        LevelScene7.prototype.boxWaterDown1Start = function () {
            var _this = this;
            if (!this.bAniOpen) {
                return;
            }
            this.roleAniTweenDown1 = Laya.Tween.to(this.boxWaterDown1, { x: -1720 }, this.nWaterTime / 2, null, Laya.Handler.create(this, function (args) {
                _this.waterAniDown1Loop();
            }));
        };
        LevelScene7.prototype.waterAniDown1Loop = function () {
            var _this = this;
            if (!this.bAniOpen) {
                return;
            }
            this.boxWaterDown1.x = this.boxWaterDown2.x + 1700;
            this.roleAniTweenDown1 = Laya.Tween.to(this.boxWaterDown1, { x: -1720 }, this.nWaterTime, null, Laya.Handler.create(this, function (args) {
                Laya.timer.once(0, _this, _this.waterAniDown1Loop);
            }));
        };
        LevelScene7.prototype.waterAniDown2Loop = function () {
            var _this = this;
            if (!this.bAniOpen) {
                return;
            }
            this.boxWaterDown2.x = this.boxWaterDown1.x + 1700;
            this.roleAniTweenDown2 = Laya.Tween.to(this.boxWaterDown2, { x: -1720 }, this.nWaterTime, null, Laya.Handler.create(this, function (args) {
                Laya.timer.once(0, _this, _this.waterAniDown2Loop);
            }));
        };
        LevelScene7.prototype.initChangeColor = function () {
            this.image2Temp.alpha = 0;
            this.image2up.alpha = 1;
            this.image2yun.alpha = 1;
            this.image2yunTemp.alpha = 0;
            this.imageWaterUp1.alpha = 1;
            this.imageWaterUp2.alpha = 1;
            this.imageWaterUp1Temp.alpha = 0;
            this.imageWaterUp2Temp.alpha = 0;
            this.imageWaterUp1After.alpha = 1;
            this.imageWaterUp2After.alpha = 1;
            this.imageWaterUp1AfterTemp.alpha = 0;
            this.imageWaterUp2AfterTemp.alpha = 0;
            this.imageWaterDown1.alpha = 1;
            this.imageWaterDown2.alpha = 1;
            this.imageWaterDown1Temp.alpha = 0;
            this.imageWaterDown2Temp.alpha = 0;
            this.imageWaterDown2After1.alpha = 1;
            this.imageWaterDown2After2.alpha = 1;
            this.imageWaterDown2After1Temp.alpha = 0;
            this.imageWaterDown2After2Temp.alpha = 0;
        };
        LevelScene7.prototype.changeColorAni = function () {
            var nTimeOver = 0;
            Laya.Tween.to(this.image2up, { alpha: 0 }, nTimeOver);
            Laya.Tween.to(this.image2yun, { alpha: 0 }, nTimeOver);
            Laya.Tween.to(this.image2Temp, { alpha: 1 }, nTimeOver);
            Laya.Tween.to(this.image2yunTemp, { alpha: 1 }, nTimeOver);
            Laya.Tween.to(this.imageWaterUp1, { alpha: 0 }, nTimeOver);
            Laya.Tween.to(this.imageWaterUp2, { alpha: 0 }, nTimeOver);
            Laya.Tween.to(this.imageWaterUp1Temp, { alpha: 1 }, nTimeOver);
            Laya.Tween.to(this.imageWaterUp2Temp, { alpha: 1 }, nTimeOver);
            Laya.Tween.to(this.imageWaterUp1After, { alpha: 0 }, nTimeOver);
            Laya.Tween.to(this.imageWaterUp2After, { alpha: 0 }, nTimeOver);
            Laya.Tween.to(this.imageWaterUp1AfterTemp, { alpha: 1 }, nTimeOver);
            Laya.Tween.to(this.imageWaterUp2AfterTemp, { alpha: 1 }, nTimeOver);
            Laya.Tween.to(this.imageWaterDown1, { alpha: 0 }, nTimeOver);
            Laya.Tween.to(this.imageWaterDown2, { alpha: 0 }, nTimeOver);
            Laya.Tween.to(this.imageWaterDown1Temp, { alpha: 1 }, nTimeOver);
            Laya.Tween.to(this.imageWaterDown2Temp, { alpha: 1 }, nTimeOver);
            Laya.Tween.to(this.imageWaterDown2After1, { alpha: 0 }, nTimeOver);
            Laya.Tween.to(this.imageWaterDown2After2, { alpha: 0 }, nTimeOver);
            Laya.Tween.to(this.imageWaterDown2After1Temp, { alpha: 1 }, nTimeOver);
            Laya.Tween.to(this.imageWaterDown2After2Temp, { alpha: 1 }, nTimeOver);
        };
        LevelScene7.prototype.levelOnHide = function () {
            this.roleAniTweenUp1 && this.roleAniTweenUp1.pause();
            this.roleAniTweenUp2 && this.roleAniTweenUp2.pause();
            this.roleAniTweenDown1 && this.roleAniTweenDown1.pause();
            this.roleAniTweenDown2 && this.roleAniTweenDown2.pause();
            console.log("levelOnHide");
        };
        LevelScene7.prototype.levelOnShow = function () {
            this.roleAniTweenUp1 && this.roleAniTweenUp1.resume();
            this.roleAniTweenUp2 && this.roleAniTweenUp2.resume();
            this.roleAniTweenDown1 && this.roleAniTweenDown1.resume();
            this.roleAniTweenDown2 && this.roleAniTweenDown2.resume();
            console.log("levelOnShow");
        };
        return LevelScene7;
    }(LevelBase));

    var LevelScene8 = (function (_super) {
        __extends(LevelScene8, _super);
        function LevelScene8(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene8";
            _this.roleAniTweenUp1 = null;
            _this.roleAniTweenUp2 = null;
            _this.roleAniTweenDown1 = null;
            _this.roleAniTweenDown2 = null;
            _this.nIndexTemp = 2;
            _this.nIndexCur = 0;
            _this.nWaterTime = 8000;
            _this.nXSub = 540;
            _this.bAniOpen = false;
            _this.openui2Flag = false;
            _this.skin = "game/level/LevelScene8.json";
            return _this;
        }
        LevelScene8.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene8.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        LevelScene8.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.stopWaterAni();
        };
        LevelScene8.prototype.initView = function () {
            this.nIndexMax = 2;
            this.openui2Flag = false;
            this.stopWaterAni();
            this.initWaterPos();
            _super.prototype.initView.call(this);
        };
        LevelScene8.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _a, _b, _c;
                var _this = this;
                return __generator(this, function (_d) {
                    switch (_d.label) {
                        case 0:
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            _a = this;
                            return [4, this.createSkeleton(this.mapData.bg.ani.url)];
                        case 1:
                            _a.ani_bg = _d.sent();
                            this.ani_bg.x = -5;
                            this.ani_bg.y = 610;
                            this.ani_bg.play(0, true);
                            this.box_enb.addChild(this.ani_bg);
                            _b = !this.ani_player;
                            if (!_b) return [3, 3];
                            _c = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 2:
                            _b = (_c.ani_player = _d.sent());
                            _d.label = 3;
                        case 3:
                            this.box_player.getChildIndex(this.ani_player) == -1 && (this.box_player.addChild(this.ani_player));
                            this.ani_player.on(Laya.Event.LABEL, this, this.onPlayLabel);
                            this.ani_player.x = this.mapData.player.x;
                            this.ani_player.y = this.mapData.player.y;
                            this.box_player.x = (this.index + this.nIndexTemp) * 1080;
                            this.box_game.x = (this.index) * -1080;
                            Laya.Tween.to(this.box_watorUp, { x: (this.index + this.nIndexTemp) * 1080 }, 3250);
                            Laya.Tween.to(this.box_watorDown, { x: (this.index + this.nIndexTemp) * 1080 }, 3250);
                            Laya.Tween.to(this.box_game, { x: (this.index + this.nIndexTemp - 1) * -1080 }, 1625, null, Laya.Handler.create(this, function (args) {
                                Laya.Tween.to(_this.box_game, { x: (_this.index + _this.nIndexTemp) * -1080 }, 1625);
                                _this.onStart();
                            }));
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            return [2];
                    }
                });
            });
        };
        LevelScene8.prototype.onPlayLabel = function (evt) {
            if (this.bAniDestory)
                return;
            _super.prototype.onPlayLabel.call(this, evt);
            if ("openui1" == evt.name) {
                this.popChoose();
            }
            else if ("openui2" == evt.name) {
                this.nIndexCur += 1;
                if (this.nIndexCur >= this.nIndexMax) {
                    this.popChoose();
                }
            }
            else if ("smove2" == evt.name) {
                Laya.Tween.to(this.box_game, { x: (this.index + this.index + this.nIndexTemp) * (-1080) - this.nXSub }, 1000);
                Laya.Tween.to(this.box_watorUp, { x: (this.index + 1) * 1080 + this.nXSub }, 1000);
                Laya.Tween.to(this.box_watorDown, { x: (this.index + 1) * 1080 + this.nXSub }, 1000);
            }
            else if ("smove3" == evt.name) {
                Laya.Tween.to(this.box_game, { x: (this.index + this.nIndexTemp) * (-1080) }, 3000);
                Laya.Tween.to(this.box_watorUp, { x: (this.index + this.nIndexTemp) * 1080 }, 3000);
                Laya.Tween.to(this.box_watorDown, { x: (this.index + this.nIndexTemp) * 1080 }, 3000);
            }
            else if ("smove4" == evt.name) {
                Laya.Tween.to(this.box_game, { x: (this.index + this.nIndexTemp) * (-1080) - this.nXSub }, 4000);
                Laya.Tween.to(this.box_watorUp, { x: (this.index + this.nIndexTemp) * 1080 }, 4000);
                Laya.Tween.to(this.box_watorDown, { x: (this.index + this.nIndexTemp) * 1080 }, 4000);
            }
        };
        LevelScene8.prototype.startGame = function () {
            this.clearData();
            _super.prototype.startGame.call(this);
            this.initPlayer();
            this.initWaterPos();
            this.openWaterAni();
        };
        LevelScene8.prototype.stopGame = function () { };
        LevelScene8.prototype.restartGame = function (bReStartAll) {
            var _this = this;
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                this.initWaterPos();
                this.initView();
                _super.prototype.startGame.call(this);
                this.initPlayer();
                this.openWaterAni();
            }
            else {
                _super.prototype.restartGame.call(this);
                if (this.index == 0) {
                    this.initWaterPos();
                    this.box_player.x = (this.index + this.nIndexTemp) * 1080;
                    this.box_game.x = (this.index) * -1080;
                    Laya.Tween.to(this.box_watorUp, { x: (this.index + this.nIndexTemp) * 1080 }, 3250);
                    Laya.Tween.to(this.box_watorDown, { x: (this.index + this.nIndexTemp) * 1080 }, 3250);
                    Laya.Tween.to(this.box_game, { x: (this.index + this.nIndexTemp - 1) * -1080 }, 1625, null, Laya.Handler.create(this, function (args) {
                        Laya.Tween.to(_this.box_game, { x: (_this.index + _this.nIndexTemp) * -1080 }, 1625);
                        _this.onStart();
                    }));
                }
                else if (this.index == 1) {
                    this.openui2Flag = false;
                    this.nIndexMax = 1;
                    this.nIndexCur = 0;
                    this.onStart();
                }
                else if (this.index == 2) {
                    this.onStart();
                }
            }
        };
        LevelScene8.prototype.initWaterPos = function () {
            this.box_watorUp.x = 0;
            this.box_watorDown.x = 0;
            this.boxWaterUp1.x = 0;
            this.boxWaterUp2.x = 1700;
            this.boxWaterDown1.x = 0;
            this.boxWaterDown2.x = 1700;
        };
        LevelScene8.prototype.stopWaterAni = function () {
            this.bAniOpen = false;
            Laya.Tween.clearAll(this.boxWaterUp1);
            Laya.Tween.clearAll(this.boxWaterUp2);
            Laya.Tween.clearAll(this.boxWaterDown1);
            Laya.Tween.clearAll(this.boxWaterDown2);
            this.roleAniTweenUp1 = null;
            this.roleAniTweenUp2 = null;
            this.roleAniTweenDown1 = null;
            this.roleAniTweenDown2 = null;
            Laya.Tween.clearAll(this.box_player);
            Laya.Tween.clearAll(this.box_watorUp);
            Laya.Tween.clearAll(this.box_watorDown);
            Laya.Tween.clearAll(this.box_game);
        };
        LevelScene8.prototype.openWaterAni = function () {
            this.bAniOpen = true;
            this.nWaterTime = 8000;
            this.boxWaterUp1Start();
            this.waterAniUp2Loop();
            this.boxWaterDown1Start();
            this.waterAniDown2Loop();
        };
        LevelScene8.prototype.boxWaterUp1Start = function () {
            var _this = this;
            if (!this.bAniOpen) {
                return;
            }
            this.roleAniTweenUp1 = Laya.Tween.to(this.boxWaterUp1, { x: -1720 }, this.nWaterTime / 2, null, Laya.Handler.create(this, function (args) {
                _this.waterAniUp1Loop();
            }));
        };
        LevelScene8.prototype.waterAniUp1Loop = function () {
            var _this = this;
            if (!this.bAniOpen) {
                return;
            }
            this.boxWaterUp1.x = this.boxWaterUp2.x + 1700;
            this.roleAniTweenUp1 = Laya.Tween.to(this.boxWaterUp1, { x: -1720 }, this.nWaterTime, null, Laya.Handler.create(this, function (args) {
                Laya.timer.once(0, _this, _this.waterAniUp1Loop);
            }));
        };
        LevelScene8.prototype.waterAniUp2Loop = function () {
            var _this = this;
            if (!this.bAniOpen) {
                return;
            }
            this.boxWaterUp2.x = this.boxWaterUp1.x + 1700;
            this.roleAniTweenUp2 = Laya.Tween.to(this.boxWaterUp2, { x: -1720 }, this.nWaterTime, null, Laya.Handler.create(this, function (args) {
                Laya.timer.once(0, _this, _this.waterAniUp2Loop);
            }));
        };
        LevelScene8.prototype.boxWaterDown1Start = function () {
            var _this = this;
            if (!this.bAniOpen) {
                return;
            }
            this.roleAniTweenDown1 = Laya.Tween.to(this.boxWaterDown1, { x: -1720 }, this.nWaterTime / 2, null, Laya.Handler.create(this, function (args) {
                _this.waterAniDown1Loop();
            }));
        };
        LevelScene8.prototype.waterAniDown1Loop = function () {
            var _this = this;
            if (!this.bAniOpen) {
                return;
            }
            this.boxWaterDown1.x = this.boxWaterDown2.x + 1700;
            this.roleAniTweenDown1 = Laya.Tween.to(this.boxWaterDown1, { x: -1720 }, this.nWaterTime, null, Laya.Handler.create(this, function (args) {
                Laya.timer.once(0, _this, _this.waterAniDown1Loop);
            }));
        };
        LevelScene8.prototype.waterAniDown2Loop = function () {
            var _this = this;
            if (!this.bAniOpen) {
                return;
            }
            this.boxWaterDown2.x = this.boxWaterDown1.x + 1700;
            this.roleAniTweenDown2 = Laya.Tween.to(this.boxWaterDown2, { x: -1720 }, this.nWaterTime, null, Laya.Handler.create(this, function (args) {
                Laya.timer.once(0, _this, _this.waterAniDown2Loop);
            }));
        };
        LevelScene8.prototype.levelOnHide = function () {
            this.roleAniTweenUp1 && this.roleAniTweenUp1.pause();
            this.roleAniTweenUp2 && this.roleAniTweenUp2.pause();
            this.roleAniTweenDown1 && this.roleAniTweenDown1.pause();
            this.roleAniTweenDown2 && this.roleAniTweenDown2.pause();
            console.log("levelOnHide");
        };
        LevelScene8.prototype.levelOnShow = function () {
            this.roleAniTweenUp1 && this.roleAniTweenUp1.resume();
            this.roleAniTweenUp2 && this.roleAniTweenUp2.resume();
            this.roleAniTweenDown1 && this.roleAniTweenDown1.resume();
            this.roleAniTweenDown2 && this.roleAniTweenDown2.resume();
            console.log("levelOnShow");
        };
        return LevelScene8;
    }(LevelBase));

    var LevelScene9 = (function (_super) {
        __extends(LevelScene9, _super);
        function LevelScene9(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene9";
            _this.nIndexTemp = 1;
            _this.nAddTemp = 600;
            _this.skin = "game/level/LevelScene9.json";
            return _this;
        }
        LevelScene9.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene9.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        LevelScene9.prototype.initView = function () {
            _super.prototype.initView.call(this);
            this.stopAni();
        };
        LevelScene9.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.stopAni();
        };
        LevelScene9.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _a, _b, _c;
                return __generator(this, function (_d) {
                    switch (_d.label) {
                        case 0:
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            _a = this;
                            return [4, this.createSkeleton(this.mapData.bg.ani.url)];
                        case 1:
                            _a.ani_bg = _d.sent();
                            this.ani_bg.x = -240;
                            this.ani_bg.y = 640;
                            this.ani_bg.play(0, true);
                            this.box_enb.addChild(this.ani_bg);
                            _b = !this.ani_player;
                            if (!_b) return [3, 3];
                            _c = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 2:
                            _b = (_c.ani_player = _d.sent());
                            _d.label = 3;
                        case 3:
                            this.box_player.getChildIndex(this.ani_player) == -1 && (this.box_player.addChild(this.ani_player));
                            this.ani_player.on(Laya.Event.LABEL, this, this.onPlayLabel);
                            this.ani_player.x = this.mapData.player.x;
                            this.ani_player.y = this.mapData.player.y;
                            this.box_player.x = (this.index) * 1080;
                            this.box_game.x = (this.index) * -1080;
                            this.onStart();
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            return [2];
                    }
                });
            });
        };
        LevelScene9.prototype.onPlayLabel = function (evt) {
            if (this.bAniDestory)
                return;
            _super.prototype.onPlayLabel.call(this, evt);
            if ("smove" == evt.name) {
                Laya.Tween.to(this.box_game, { x: (this.index + this.nIndexTemp) * (-1080) - this.nAddTemp }, 3000);
            }
            else if ("sevent_9-c1_1" == evt.name) {
                this.ani_bg.play("9-c1", true);
            }
            else if ("sevent_9-c2_1" == evt.name) {
                this.ani_bg.play("9-c2", true);
            }
            else if ("sevent_9-c3_1" == evt.name) {
                this.ani_bg.play("9-c3", false);
            }
            else if ("smove2" == evt.name) {
                Laya.Tween.to(this.box_game, { x: (this.index + this.nIndexTemp) * (-1080) - 1100 }, 3500);
            }
            else if ("smove3" == evt.name) {
                Laya.Tween.to(this.box_game, { x: (this.index + this.nIndexTemp) * (-1080) - 1100 + 400 }, 3540 - 750);
            }
            else if ("smove4" == evt.name) {
                Laya.Tween.to(this.box_game, { x: (this.index + this.nIndexTemp) * (-1080) - 1540 }, 6080 - 2500);
            }
            else if ("smove5" == evt.name) {
                Laya.Tween.to(this.box_game, { x: (this.index + this.nIndexTemp) * (-1080) - 1340 }, 5540);
            }
        };
        LevelScene9.prototype.startGame = function () {
            this.clearData();
            _super.prototype.startGame.call(this);
            this.initPlayer();
        };
        LevelScene9.prototype.stopGame = function () { };
        LevelScene9.prototype.restartGame = function (bReStartAll) {
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                this.initView();
                _super.prototype.startGame.call(this);
                this.initPlayer();
            }
            else {
                _super.prototype.restartGame.call(this);
                if (this.index == 0) {
                    this.box_game.x = 0;
                    this.ani_bg.stop();
                }
                if (this.index == 1) {
                    this.box_game.x = (this.index + this.nIndexTemp) * (-1080) - 1100;
                }
                this.onStart();
            }
        };
        LevelScene9.prototype.stopAni = function () {
            Laya.Tween.clearAll(this.box_player);
            Laya.Tween.clearAll(this.box_game);
        };
        return LevelScene9;
    }(LevelBase));

    var LevelScene10 = (function (_super) {
        __extends(LevelScene10, _super);
        function LevelScene10(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene10";
            _this.nIndexTemp = 2;
            _this.nAddTemp = -490;
            _this.nForend = 540;
            _this.skin = "game/level/LevelScene10.json";
            return _this;
        }
        LevelScene10.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene10.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        LevelScene10.prototype.initView = function () {
            _super.prototype.initView.call(this);
            this.stopAni();
        };
        LevelScene10.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.stopAni();
        };
        LevelScene10.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _a, _b;
                return __generator(this, function (_c) {
                    switch (_c.label) {
                        case 0:
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            _a = !this.ani_player;
                            if (!_a) return [3, 2];
                            _b = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 1:
                            _a = (_b.ani_player = _c.sent());
                            _c.label = 2;
                        case 2:
                            this.box_player.getChildIndex(this.ani_player) == -1 && (this.box_player.addChild(this.ani_player));
                            this.ani_player.on(Laya.Event.LABEL, this, this.onPlayLabel);
                            this.ani_player.x = this.mapData.player.x;
                            this.ani_player.y = this.mapData.player.y;
                            this.box_player.x = 0;
                            this.box_game.x = this.box_game_up.x = (this.index) * 1080;
                            this.onStart();
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            return [2];
                    }
                });
            });
        };
        LevelScene10.prototype.onPlayLabel = function (evt) {
            if (this.bAniDestory)
                return;
            _super.prototype.onPlayLabel.call(this, evt);
            if ("smove" == evt.name) {
                Laya.Tween.to(this.box_game, { x: (this.index + this.nIndexTemp) * (-1080) - this.nAddTemp }, 4250);
                Laya.Tween.to(this.box_game_up, { x: (this.index + this.nIndexTemp) * (-1080) - this.nAddTemp }, 4250);
            }
            else if ("smove2" == evt.name) {
                Laya.Tween.to(this.box_game, { x: (this.index + this.nIndexTemp) * (-1080) + 100 }, 4310);
                Laya.Tween.to(this.box_game_up, { x: (this.index + this.nIndexTemp) * (-1080) + 100 }, 4310);
            }
            else if ("smove3" == evt.name) {
                Laya.Tween.to(this.box_game, { x: (this.index + this.nIndexTemp) * (-1080) - 520 }, 3130);
                Laya.Tween.to(this.box_game_up, { x: (this.index + this.nIndexTemp) * (-1080) - 520 }, 3130);
            }
        };
        LevelScene10.prototype.startGame = function () {
            this.clearData();
            _super.prototype.startGame.call(this);
            this.initPlayer();
        };
        LevelScene10.prototype.stopGame = function () { };
        LevelScene10.prototype.restartGame = function (bReStartAll) {
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                this.initView();
                _super.prototype.startGame.call(this);
                this.initPlayer();
            }
            else {
                _super.prototype.restartGame.call(this);
                if (this.index == 0) {
                    this.box_game.x = this.box_game_up.x = (this.index) * 1080;
                }
                this.onStart();
            }
        };
        LevelScene10.prototype.stopAni = function () {
            Laya.Tween.clearAll(this.box_player);
            Laya.Tween.clearAll(this.box_game);
            Laya.Tween.clearAll(this.box_game_up);
        };
        return LevelScene10;
    }(LevelBase));

    var LevelScene11 = (function (_super) {
        __extends(LevelScene11, _super);
        function LevelScene11(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene11";
            _this.nIndexTemp = 1;
            _this.nAddTemp = -490;
            _this.nForend = 540;
            _this.skin = "game/level/LevelScene11.json";
            return _this;
        }
        LevelScene11.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene11.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        LevelScene11.prototype.initView = function () {
            _super.prototype.initView.call(this);
            this.stopAni();
        };
        LevelScene11.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.stopAni();
        };
        LevelScene11.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _a, _b;
                return __generator(this, function (_c) {
                    switch (_c.label) {
                        case 0:
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            _a = !this.ani_player;
                            if (!_a) return [3, 2];
                            _b = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 1:
                            _a = (_b.ani_player = _c.sent());
                            _c.label = 2;
                        case 2:
                            this.box_player.getChildIndex(this.ani_player) == -1 && (this.box_player.addChild(this.ani_player));
                            this.ani_player.on(Laya.Event.LABEL, this, this.onPlayLabel);
                            this.ani_player.x = this.mapData.player.x;
                            this.ani_player.y = this.mapData.player.y;
                            this.box_player.x = 0;
                            this.box_game.x = this.box_game_up.x = (this.index) * 1080;
                            this.onStart();
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            return [2];
                    }
                });
            });
        };
        LevelScene11.prototype.onPlayLabel = function (evt) {
            if (this.bAniDestory)
                return;
            _super.prototype.onPlayLabel.call(this, evt);
            if ("smove" == evt.name) {
                Laya.Tween.to(this.box_game, { x: (this.index + this.nIndexTemp) * (-1080) }, 2040);
                Laya.Tween.to(this.box_game_up, { x: (this.index + this.nIndexTemp) * (-1080) }, 2040);
            }
            else if ("smove2" == evt.name) {
                Laya.Tween.to(this.box_game, { x: (this.index + this.nIndexTemp) * (-1080) - 130 }, 4160);
                Laya.Tween.to(this.box_game_up, { x: (this.index + this.nIndexTemp) * (-1080) - 130 }, 4160);
            }
            else if ("smove3" == evt.name) {
                Laya.Tween.to(this.box_game, { x: (this.index + this.nIndexTemp) * (-1080) - 80 }, 3710);
                Laya.Tween.to(this.box_game_up, { x: (this.index + this.nIndexTemp) * (-1080) - 80 }, 3710);
            }
            else if ("smove4" == evt.name) {
                Laya.Tween.to(this.box_game, { x: (this.index + this.nIndexTemp) * (-1080) + 540 }, 5040);
                Laya.Tween.to(this.box_game_up, { x: (this.index + this.nIndexTemp) * (-1080) + 540 }, 5040);
            }
        };
        LevelScene11.prototype.startGame = function () {
            this.clearData();
            _super.prototype.startGame.call(this);
            this.initPlayer();
        };
        LevelScene11.prototype.stopGame = function () { };
        LevelScene11.prototype.restartGame = function (bReStartAll) {
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                this.initView();
                _super.prototype.startGame.call(this);
                this.initPlayer();
            }
            else {
                _super.prototype.restartGame.call(this);
                if (this.index == 0) {
                    this.box_game.x = this.box_game_up.x = (this.index) * 1080;
                }
                this.onStart();
            }
        };
        LevelScene11.prototype.stopAni = function () {
            Laya.Tween.clearAll(this.box_player);
            Laya.Tween.clearAll(this.box_game);
        };
        return LevelScene11;
    }(LevelBase));

    var LevelScene12 = (function (_super) {
        __extends(LevelScene12, _super);
        function LevelScene12(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene12";
            _this.nIndexTemp = 1;
            _this.nAddTemp = -490;
            _this.nForend = 540;
            _this.skin = "game/level/LevelScene12.json";
            return _this;
        }
        LevelScene12.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene12.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        LevelScene12.prototype.initView = function () {
            _super.prototype.initView.call(this);
            this.stopAni();
        };
        LevelScene12.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.stopAni();
        };
        LevelScene12.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _a, _b;
                return __generator(this, function (_c) {
                    switch (_c.label) {
                        case 0:
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            _a = !this.ani_player;
                            if (!_a) return [3, 2];
                            _b = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 1:
                            _a = (_b.ani_player = _c.sent());
                            _c.label = 2;
                        case 2:
                            this.box_player.getChildIndex(this.ani_player) == -1 && (this.box_player.addChild(this.ani_player));
                            this.ani_player.on(Laya.Event.LABEL, this, this.onPlayLabel);
                            this.ani_player.x = this.mapData.player.x;
                            this.ani_player.y = this.mapData.player.y;
                            this.box_player.x = (this.index) * 1080;
                            this.box_game.x = (this.index) * 1080;
                            this.onStart();
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            return [2];
                    }
                });
            });
        };
        LevelScene12.prototype.onPlayLabel = function (evt) {
            if (this.bAniDestory)
                return;
            _super.prototype.onPlayLabel.call(this, evt);
            if ("smove" == evt.name) {
                Laya.Tween.to(this.box_game, { x: (this.index + this.nIndexTemp) * (-1080) - 540 }, 4330);
            }
            else if ("smove2" == evt.name) {
                Laya.Tween.to(this.box_game, { x: (this.index + this.nIndexTemp) * (-1080) - 900 }, 3170);
            }
            else if ("smove3" == evt.name) {
                Laya.Tween.to(this.box_game, { x: (this.index + this.nIndexTemp + 1) * (-1080) - 600 }, 5080);
            }
            else if ("smove4" == evt.name) {
                Laya.Tween.to(this.box_game, { x: (this.index + this.nIndexTemp + 1) * (-1080) + 600 }, 2170);
            }
        };
        LevelScene12.prototype.startGame = function () {
            this.clearData();
            _super.prototype.startGame.call(this);
            this.initPlayer();
        };
        LevelScene12.prototype.stopGame = function () { };
        LevelScene12.prototype.restartGame = function (bReStartAll) {
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                this.initView();
                _super.prototype.startGame.call(this);
                this.initPlayer();
            }
            else {
                _super.prototype.restartGame.call(this);
                if (this.index == 0) {
                    this.box_game.x = (this.index) * 1080;
                }
                else if (this.index == 2) {
                    this.box_game.x = (this.index + this.nIndexTemp + 1) * (-1080) - 600;
                }
                this.onStart();
            }
        };
        LevelScene12.prototype.stopAni = function () {
            Laya.Tween.clearAll(this.box_player);
            Laya.Tween.clearAll(this.box_game);
        };
        return LevelScene12;
    }(LevelBase));

    var LevelScene13 = (function (_super) {
        __extends(LevelScene13, _super);
        function LevelScene13(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene13";
            _this.nIndexTemp = 0;
            _this.nAddTemp = -490;
            _this.nForend = 540;
            _this.skin = "game/level/LevelScene13.json";
            return _this;
        }
        LevelScene13.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene13.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        LevelScene13.prototype.initView = function () {
            _super.prototype.initView.call(this);
            this.stopAni();
        };
        LevelScene13.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.stopAni();
        };
        LevelScene13.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _a, _b, _c, _d, _e, _f;
                return __generator(this, function (_g) {
                    switch (_g.label) {
                        case 0:
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            _a = this;
                            return [4, this.createSkeleton(this.mapData.bg.ani.url)];
                        case 1:
                            _a.bgM = _g.sent();
                            this.bgM.x = this.mapData.bg.ani.x;
                            this.bgM.y = this.mapData.bg.ani.y;
                            this.bgM_box.addChild(this.bgM);
                            _b = this;
                            return [4, this.createSkeleton(this.mapData.xt.url)];
                        case 2:
                            _b.xt = _g.sent();
                            this.xt.x = this.mapData.xt.x;
                            this.xt.y = this.mapData.xt.y;
                            this.xtBox.addChild(this.xt);
                            _c = this;
                            return [4, this.createSkeleton(this.mapData.xj.url)];
                        case 3:
                            _c.xj = _g.sent();
                            this.xj.x = this.mapData.xj.x;
                            this.xj.y = this.mapData.xj.y;
                            _d = this;
                            return [4, this.createSkeleton("resource/assets/img/ani/level13/checkpoint13kaiguan.sk")];
                        case 4:
                            _d.kg = _g.sent();
                            this.kg.y = 530 + 680;
                            this.kg.x = 2824;
                            this.box_game.addChild(this.kg);
                            this.kg.stop();
                            _e = !this.ani_player;
                            if (!_e) return [3, 6];
                            _f = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 5:
                            _e = (_f.ani_player = _g.sent());
                            _g.label = 6;
                        case 6:
                            this.box_player.getChildIndex(this.ani_player) == -1 && (this.box_player.addChild(this.ani_player));
                            this.ani_player.on(Laya.Event.LABEL, this, this.onPlayLabel);
                            this.ani_player.x = this.mapData.player.x;
                            this.ani_player.y = this.mapData.player.y;
                            this.box_player.x = (this.index) * 1080;
                            this.box_game_up.x = this.box_game.x = (this.index) * 1080;
                            this.onStart();
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            return [2];
                    }
                });
            });
        };
        LevelScene13.prototype.onPlayLabel = function (evt) {
            var _this = this;
            if (this.bAniDestory)
                return;
            _super.prototype.onPlayLabel.call(this, evt);
            switch (evt.name) {
                case "sevent_13-z1-1_1":
                    this.xt.play("13-z1-1", false);
                    break;
                case "sevent_13-z1-2_1":
                    this.xt.play("13-z1-2", false);
                    break;
                case "sevent_13-z3_1":
                    this.xt.play("13-z3", false);
                    break;
                case "sevent_13-z4_1":
                    this.xt.play("13-z4", false);
                    break;
                case "sevent_13-z5_1":
                    this.xt.play("13-z5", false);
                    break;
                case "sevent_13-z6_1":
                    this.xt.play("13-z6", false);
                    break;
                case "sevent_13-z8-1_1":
                    this.xt.play("13-z8", false);
                    break;
                case "sevent_13-xj8_1":
                    this.box_player.addChild(this.xj);
                    this.xj.play("13-xj8", false);
                    break;
                case "sevent_13-z8-2_1":
                    this.xt.play("13-z8-1", false);
                    Laya.timer.once(200, this, function () {
                        _this.xj.stop();
                        _this.xj.removeSelf();
                    });
                    break;
                case "sevent_13-11kg_1":
                    this.kg.play("13-11kg", false);
                    break;
                case "sevent_13-z10_1":
                    this.xt.x = 0;
                    this.xt.play("13-z10", false);
                    break;
                case "sevent_13-z11_1":
                    this.xt.x = 0;
                    this.xt.play("13-z11", false);
                    break;
                case "sevent_win_stop":
                    this.bgM.stop();
                    break;
                case "smove":
                    Laya.Tween.to(this.box_game, { x: -720 }, 1790);
                    Laya.Tween.to(this.box_game_up, { x: -720 }, 1790);
                    Laya.Tween.to(this.xt, { x: -720 }, 1790, null, Laya.Handler.create(this, function () {
                        _this.xt.x = 0;
                    }));
                    break;
                case "smove2":
                    Laya.Tween.to(this.box_game, { x: -1775 }, 2000);
                    Laya.Tween.to(this.box_game_up, { x: -1775 }, 2000);
                    Laya.Tween.to(this.xt, { x: -500 }, 1000, null, Laya.Handler.create(this, function () {
                        Laya.Tween.to(_this.xt, { x: 0 }, 1000, null, Laya.Handler.create(_this, function () {
                            _this.xt.x = 0;
                        }));
                    }));
                    break;
                case "smove3":
                    Laya.Tween.to(this.box_game, { x: -2824 }, 3620);
                    Laya.Tween.to(this.box_game_up, { x: -2824 }, 3620);
                    Laya.Tween.to(this.xt, { x: -1000 }, 3000, null, Laya.Handler.create(this, function () {
                        _this.xt.x = 0;
                        _this.xt.play("13-z8-2", false);
                    }));
                    break;
            }
        };
        LevelScene13.prototype.startGame = function () {
            this.clearData();
            _super.prototype.startGame.call(this);
            this.initPlayer();
        };
        LevelScene13.prototype.stopGame = function () { };
        LevelScene13.prototype.restartGame = function (bReStartAll) {
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                this.initView();
                _super.prototype.startGame.call(this);
                this.initPlayer();
            }
            else {
                _super.prototype.restartGame.call(this);
                if (this.index == 0) {
                    this.box_game_up.x = this.box_game.x = 0;
                }
                else if (this.index == 1) {
                    this.box_game_up.x = this.box_game.x = -1775;
                }
                else if (this.index == 2) {
                    this.box_game_up.x = this.box_game.x = -2824;
                    this.xt.play("13-z8-2", false);
                }
                this.onStart();
            }
        };
        LevelScene13.prototype.stopAni = function () {
            Laya.Tween.clearAll(this.box_player);
            Laya.Tween.clearAll(this.box_game);
            Laya.Tween.clearAll(this.box_game_up);
        };
        return LevelScene13;
    }(LevelBase));

    var LevelScene14 = (function (_super) {
        __extends(LevelScene14, _super);
        function LevelScene14(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene14";
            _this.skin = "game/level/LevelScene14.json";
            return _this;
        }
        LevelScene14.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene14.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        LevelScene14.prototype.initView = function () {
            _super.prototype.initView.call(this);
            this.stopAni();
        };
        LevelScene14.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.stopAni();
        };
        LevelScene14.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _a, _b, _c, _d;
                return __generator(this, function (_e) {
                    switch (_e.label) {
                        case 0:
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            _a = this;
                            return [4, this.createSkeleton(this.mapData.bg.ani.url)];
                        case 1:
                            _a.skG = _e.sent();
                            this.skG.x = this.mapData.bg.ani.x;
                            this.skG.y = this.mapData.bg.ani.y;
                            this.box_g.addChild(this.skG);
                            _b = this;
                            return [4, this.createSkeleton(this.mapData.z.url)];
                        case 2:
                            _b.skZ = _e.sent();
                            this.skZ.x = this.mapData.z.x;
                            this.skZ.y = this.mapData.z.y;
                            this.box_z.addChild(this.skZ);
                            _c = !this.ani_player;
                            if (!_c) return [3, 4];
                            _d = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 3:
                            _c = (_d.ani_player = _e.sent());
                            _e.label = 4;
                        case 4:
                            this.box_player.getChildIndex(this.ani_player) == -1 && (this.box_player.addChild(this.ani_player));
                            this.ani_player.on(Laya.Event.LABEL, this, this.onPlayLabel);
                            this.ani_player.x = this.mapData.player.x;
                            this.ani_player.y = this.mapData.player.y;
                            this.box_player.x = (this.index) * 1080;
                            this.box_game.x = (this.index) * 1080;
                            this.onStart();
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            return [2];
                    }
                });
            });
        };
        LevelScene14.prototype.onPlayLabel = function (evt) {
            if (this.bAniDestory)
                return;
            _super.prototype.onPlayLabel.call(this, evt);
            switch (evt.name) {
                case "smove":
                    Laya.Tween.to(this.box_game, { x: -2272 }, 5210);
                    Laya.Tween.to(this.box_player, { x: 2272 }, 5210);
                    break;
                case "sevent_14-g1_1":
                    this.skG.play("14-g1", false);
                    break;
                case "sevent_14-g3_1":
                    this.skG.play("14-g3", false);
                    break;
                case "sevent_14-g2_1":
                    this.skG.play("14-g2", false);
                    break;
                case "sevent_14-g4_1":
                    this.skG.play("14-g4", false);
                    break;
                case "smove2":
                    Laya.Tween.to(this.box_game, { x: -(2272 + 618 + 518) }, 3750);
                    Laya.Tween.to(this.box_player, { x: (2272 + 618 + 518) }, 3750);
                    break;
                case "smove3":
                    Laya.Tween.to(this.box_game, { x: -(2272 + 618 + 618 + 1236 + 300) }, 3500);
                    Laya.Tween.to(this.box_player, { x: (2272 + 618 + 618 + 1236 + 300) }, 3500);
                    this.skZ.play("14-z7", false);
                    break;
                case "smove4":
                    break;
                case "sevent_14-z8_1":
                    this.skZ.play("14-z8", false);
                    break;
                case "sevent_14-z10_1":
                    this.skZ.play("14-z10", false);
                    break;
                case "sevent_14-z9_1":
                    this.skZ.play("14-z9", false);
                    break;
            }
        };
        LevelScene14.prototype.startGame = function () {
            this.clearData();
            _super.prototype.startGame.call(this);
            this.initPlayer();
        };
        LevelScene14.prototype.stopGame = function () { };
        LevelScene14.prototype.restartGame = function (bReStartAll) {
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                this.initView();
                _super.prototype.startGame.call(this);
                this.initPlayer();
            }
            else {
                _super.prototype.restartGame.call(this);
                if (this.index == 0) {
                    this.box_player.x = this.box_game.x = 0;
                }
                else if (this.index == 1) ;
                else if (this.index == 2) ;
                this.onStart();
            }
        };
        LevelScene14.prototype.stopAni = function () {
            Laya.Tween.clearAll(this.box_player);
            Laya.Tween.clearAll(this.box_game);
        };
        return LevelScene14;
    }(LevelBase));

    var LevelScene16 = (function (_super) {
        __extends(LevelScene16, _super);
        function LevelScene16(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene16";
            _this.speed_ = 3;
            _this.nIndexTemp = 0;
            _this.nAddTemp = -490;
            _this.nForend = 540;
            _this.skin = "game/level/LevelScene16.json";
            return _this;
        }
        LevelScene16.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene16.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        LevelScene16.prototype.initView = function () {
            _super.prototype.initView.call(this);
            this.stopAni();
        };
        LevelScene16.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.stopAni();
        };
        Object.defineProperty(LevelScene16.prototype, "speed", {
            get: function () {
                return this.speed_;
            },
            set: function (s) {
                this.speed_ = s;
                this.resetMoveBg();
            },
            enumerable: true,
            configurable: true
        });
        LevelScene16.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _a, _b, _c;
                return __generator(this, function (_d) {
                    switch (_d.label) {
                        case 0:
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            _a = this;
                            return [4, this.createSkeleton(this.mapData.xt.url)];
                        case 1:
                            _a.xt = _d.sent();
                            this.xt.x = this.mapData.xt.x;
                            this.xt.y = this.mapData.xt.y;
                            this.xtBox.addChild(this.xt);
                            this.kengImg = new Laya.Image();
                            this.kengImg.y = 1123;
                            this.kengImg.skin = "resource/assets/img/level/16/bg16_hole.png";
                            _b = !this.ani_player;
                            if (!_b) return [3, 3];
                            _c = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 2:
                            _b = (_c.ani_player = _d.sent());
                            _d.label = 3;
                        case 3:
                            this.box_player.getChildIndex(this.ani_player) == -1 && (this.box_player.addChild(this.ani_player));
                            this.ani_player.on(Laya.Event.LABEL, this, this.onPlayLabel);
                            this.ani_player.x = this.mapData.player.x;
                            this.ani_player.y = this.mapData.player.y;
                            this.box_player.x = (this.index) * 1080;
                            this.box_game_up.x = this.box_game.x = this.box_game_up_1.x = this.box_game_1.x = 0;
                            this.onStart();
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            this.resetMoveBg();
                            return [2];
                    }
                });
            });
        };
        LevelScene16.prototype.callBack = function (right, aniName) {
            _super.prototype.callBack.call(this, right, aniName);
            if (aniName == "16-6") {
                this.speed = 3;
                this.addChildAt(this.kengImg, 2);
                this.kengImg.x = 1500;
                Laya.Tween.to(this.kengImg, { x: -1000 }, (1500 + 1000) / 8 / 60 * 1000);
            }
            else if (aniName == "16-7") {
                this.speed = 3;
                this.addChildAt(this.kengImg, 2);
                this.kengImg.x = 1000;
                Laya.Tween.to(this.kengImg, { x: -1000 }, 11111 / (8 / 3));
            }
            console.log("level 16 callBack!");
        };
        LevelScene16.prototype.resetMoveBg = function () {
            this.moveSomeBg(this.box_game);
            this.moveSomeBg(this.box_game_up);
            this.moveSomeBg(this.box_game_1);
            this.moveSomeBg(this.box_game_up_1);
        };
        LevelScene16.prototype.moveSomeBg = function (boxBG) {
            Laya.Tween.clearAll(boxBG);
            var toX = -9486;
            var time = 52700;
            if (boxBG.x == toX) {
                boxBG.x = 0;
            }
            else if (boxBG.x != 0) {
                time = (boxBG.x - toX) / this.speed_ / 60 * 1000;
            }
            Laya.Tween.to(boxBG, { x: toX }, time, null, Laya.Handler.create(this, this.moveSomeBg, [boxBG]));
        };
        LevelScene16.prototype.onPlayLabel = function (evt) {
            var _this = this;
            if (this.bAniDestory)
                return;
            _super.prototype.onPlayLabel.call(this, evt);
            switch (evt.name) {
                case "sevent_16-z1_1":
                    this.xt.play("16-z1", false);
                    break;
                case "sevent_16-z2_1":
                    this.xt.play("16-z2", false);
                    break;
                case "sevent_16-z3_1":
                    this.xt.play("16-z3", false);
                    break;
                case "sevent_16-z4_1":
                    this.xt.play("16-z4", false);
                    break;
                case "sevent_16-z5_1":
                    this.xt.play("16-z5", false);
                    break;
                case "sevent_16-z6_1":
                    this.xt.play("16-z6", false);
                    this.speed = 8;
                    Laya.timer.clearAll(this);
                    Laya.timer.once(3000, this, function () {
                        _this.speed = 3;
                    });
                    break;
                case "sevent_16-z7_1":
                    this.xt.play("16-z7", false);
                    break;
                case "sevent_16-z8_1":
                    this.xt.play("16-z8", false);
                    break;
                case "sevent_16-z9_1":
                    this.xt.play("16-z9", false);
                    break;
                case "sevent_16-z10_1":
                    this.xt.play("16-z10", false);
                    break;
                case "smove":
                    this.speed = 8;
                    Laya.timer.clearAll(this);
                    Laya.timer.once(5000, this, function () {
                        _this.speed = 3;
                    });
                    break;
                case "smove1":
                    this.speed = 8;
                    Laya.timer.clearAll(this);
                    Laya.timer.once(6000, this, function () {
                        _this.speed = 3;
                    });
                    break;
                case "smove2":
                    break;
                case "smove3":
                    this.speed = 8;
                    Laya.timer.clearAll(this);
                    Laya.timer.once(2000, this, function () {
                        _this.speed = 3;
                    });
                    break;
            }
        };
        LevelScene16.prototype.startGame = function () {
            this.clearData();
            _super.prototype.startGame.call(this);
            this.initPlayer();
        };
        LevelScene16.prototype.stopGame = function () {
        };
        LevelScene16.prototype.restartGame = function (bReStartAll) {
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                this.initView();
                _super.prototype.startGame.call(this);
                this.initPlayer();
            }
            else {
                _super.prototype.restartGame.call(this);
                this.kengImg.removeSelf();
                this.onStart();
            }
        };
        LevelScene16.prototype.stopAni = function () {
            Laya.timer.clearAll(this);
            Laya.Tween.clearAll(this.box_player);
            Laya.Tween.clearAll(this.box_game);
            Laya.Tween.clearAll(this.box_game_up);
            Laya.Tween.clearAll(this.box_game_1);
            Laya.Tween.clearAll(this.box_game_up_1);
            this.kengImg && this.kengImg.removeSelf();
        };
        return LevelScene16;
    }(LevelBase));

    var LevelScene17 = (function (_super) {
        __extends(LevelScene17, _super);
        function LevelScene17(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene17";
            _this.bcjOneFlag = false;
            _this.nIndexTemp = 0;
            _this.nAddTemp = -490;
            _this.nForend = 540;
            _this.skin = "game/level/LevelScene17.json";
            return _this;
        }
        LevelScene17.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene17.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        LevelScene17.prototype.initView = function () {
            _super.prototype.initView.call(this);
            this.stopAni();
        };
        LevelScene17.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.stopAni();
        };
        LevelScene17.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _a, _b, _c;
                return __generator(this, function (_d) {
                    switch (_d.label) {
                        case 0:
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            this.bcjOneFlag = false;
                            this.boxKuang = this.box_game.getChildByName("boxKuang");
                            this.boxMid = this.box_game.getChildByName("boxMid");
                            _a = this;
                            return [4, this.createSkeleton(this.mapData.bg.ani.url)];
                        case 1:
                            _a.bgM = _d.sent();
                            this.bgM.x = this.mapData.bg.ani.x;
                            this.bgM.y = this.mapData.bg.ani.y;
                            this.bgM.x = 0;
                            this.bgM.y = this.bgM.height * 2 + 100;
                            _b = !this.ani_player;
                            if (!_b) return [3, 3];
                            _c = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 2:
                            _b = (_c.ani_player = _d.sent());
                            _d.label = 3;
                        case 3:
                            this.box_player.getChildIndex(this.ani_player) == -1 && (this.box_player.addChild(this.ani_player));
                            this.ani_player.on(Laya.Event.LABEL, this, this.onPlayLabel);
                            this.ani_player.x = this.mapData.player.x;
                            this.ani_player.y = this.mapData.player.y;
                            this.box_player.x = (this.index) * 1080;
                            this.box_game.x = (this.index) * 1080;
                            this.onStart();
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            return [2];
                    }
                });
            });
        };
        LevelScene17.prototype.sharkSome = function () {
            this.sharkBox(this.boxKuang);
            this.sharkBox(this.boxMid);
        };
        LevelScene17.prototype.sharkBox = function (box) {
            var _this = this;
            var toXL = 25;
            var startX = box.x;
            Laya.Tween.to(box, { x: startX - toXL }, 150, Laya.Ease.sineIn, Laya.Handler.create(this, function () {
                Laya.Tween.to(box, { x: startX + toXL }, 100, Laya.Ease.sineIn, Laya.Handler.create(_this, function () {
                    Laya.Tween.to(box, { x: startX - toXL }, 100, Laya.Ease.sineIn, Laya.Handler.create(_this, function () {
                        Laya.Tween.to(box, { x: startX + toXL * 0.7 }, 100, Laya.Ease.sineIn, Laya.Handler.create(_this, function () {
                            Laya.Tween.to(box, { x: startX - toXL * 0.7 }, 100, Laya.Ease.sineIn, Laya.Handler.create(_this, function () {
                                Laya.Tween.to(box, { x: startX }, 100, Laya.Ease.sineIn, Laya.Handler.create(_this, function () {
                                }));
                            }));
                        }));
                    }));
                }));
            }));
        };
        LevelScene17.prototype.onPlayLabel = function (evt) {
            if (this.bAniDestory)
                return;
            _super.prototype.onPlayLabel.call(this, evt);
            switch (evt.name) {
                case "sevent_17-1cj_1":
                    break;
                case "smove":
                    Laya.Tween.to(this.box_game, { x: -1080 * this.index }, 3000);
                    Laya.Tween.to(this.box_player, { x: 1080 * this.index + 300 }, 3000);
                    break;
                case "smove2":
                    Laya.Tween.to(this.box_player, { x: 1080 * this.index + 300 }, 3000);
                    break;
                case "zd1":
                    this.sharkSome();
                    if (this.bgM_box.numChildren <= 0) {
                        this.bgM_box.addChild(this.bgM);
                    }
                    if (!this.bcjOneFlag) {
                        this.bgM.play("17-1cj", false);
                        this.bcjOneFlag = true;
                    }
                    break;
                case "zd2":
                    this.sharkSome();
                    break;
                case "zd3":
                    this.sharkSome();
                    break;
            }
        };
        LevelScene17.prototype.startGame = function () {
            this.clearData();
            _super.prototype.startGame.call(this);
            this.initPlayer();
        };
        LevelScene17.prototype.stopGame = function () { };
        LevelScene17.prototype.restartGame = function (bReStartAll) {
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                this.initView();
                _super.prototype.startGame.call(this);
                this.initPlayer();
            }
            else {
                _super.prototype.restartGame.call(this);
                if (this.index == 0) {
                    this.bcjOneFlag = false;
                }
                this.onStart();
            }
        };
        LevelScene17.prototype.stopAni = function () {
            Laya.Tween.clearAll(this.box_player);
            Laya.Tween.clearAll(this.box_game);
            Laya.Tween.clearAll(this.box_game_up);
        };
        return LevelScene17;
    }(LevelBase));

    var LevelScene18 = (function (_super) {
        __extends(LevelScene18, _super);
        function LevelScene18(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene18";
            _this.skin = "game/level/LevelScene18.json";
            return _this;
        }
        LevelScene18.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene18.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        LevelScene18.prototype.initView = function () {
            _super.prototype.initView.call(this);
            this.stopAni();
        };
        LevelScene18.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.stopAni();
        };
        LevelScene18.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _a, _b, _c, _d, _e;
                return __generator(this, function (_f) {
                    switch (_f.label) {
                        case 0:
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            _a = this;
                            return [4, this.createSkeleton(this.mapData.dx.ani.url)];
                        case 1:
                            _a.skDx = _f.sent();
                            this.skDx.x = this.mapData.dx.ani.x;
                            this.skDx.y = this.mapData.dx.ani.y;
                            this.skDx.y = this.skDx.height + 120;
                            this.box_dx.addChild(this.skDx);
                            _b = this;
                            return [4, this.createSkeleton(this.mapData.hp.url)];
                        case 2:
                            _b.skHp = _f.sent();
                            this.skHp.x = this.mapData.hp.x;
                            this.skHp.y = this.mapData.hp.y;
                            this.skHp.y = this.skHp.height + this.skHp.height / 2 + 150;
                            this.box_hp.addChild(this.skHp);
                            _c = this;
                            return [4, this.createSkeleton(this.mapData.sg.url)];
                        case 3:
                            _c.skSg = _f.sent();
                            this.skSg.x = this.mapData.hp.x;
                            this.skSg.y = this.mapData.hp.y;
                            this.skSg.y = this.skSg.height + 50;
                            this.box_sg.addChild(this.skSg);
                            _d = !this.ani_player;
                            if (!_d) return [3, 5];
                            _e = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 4:
                            _d = (_e.ani_player = _f.sent());
                            _f.label = 5;
                        case 5:
                            this.box_player.getChildIndex(this.ani_player) == -1 && (this.box_player.addChild(this.ani_player));
                            this.ani_player.on(Laya.Event.LABEL, this, this.onPlayLabel);
                            this.ani_player.x = this.mapData.player.x;
                            this.ani_player.y = this.mapData.player.y;
                            this.box_player.x = (this.index) * 1080;
                            this.box_game.x = (this.index) * 1080;
                            this.onStart();
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            return [2];
                    }
                });
            });
        };
        LevelScene18.prototype.onPlayLabel = function (evt) {
            if (this.bAniDestory)
                return;
            _super.prototype.onPlayLabel.call(this, evt);
            switch (evt.name) {
                case "smove":
                    Laya.Tween.to(this.box_game, { x: -(1350) }, 4170);
                    Laya.Tween.to(this.box_player, { x: (1350) }, 4170);
                    break;
                case "smove2":
                    Laya.Tween.to(this.box_game, { x: -(4250) }, 8130);
                    Laya.Tween.to(this.box_player, { x: (4250) }, 8130);
                    this.skHp.play("18-hp6", false);
                    break;
                case "smove3":
                    Laya.Tween.to(this.box_game, { x: -(6450) }, 3600);
                    Laya.Tween.to(this.box_player, { x: (6450) }, 3600);
                    this.skHp.play("18-sg9", true);
                    break;
                case "sevent_18-sg10_1":
                    this.skSg.play("18-sg10", false);
                    break;
                case "sevent_18-hp7_1":
                    this.skHp.play("18-hp7", false);
                    break;
                case "smove4":
                    Laya.Tween.to(this.box_game, { x: -(8000) }, 3660);
                    Laya.Tween.to(this.box_player, { x: (8000) }, 3660);
                    break;
            }
        };
        LevelScene18.prototype.startGame = function () {
            this.clearData();
            _super.prototype.startGame.call(this);
            this.initPlayer();
        };
        LevelScene18.prototype.stopGame = function () {
        };
        LevelScene18.prototype.restartGame = function (bReStartAll) {
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                this.initView();
                _super.prototype.startGame.call(this);
                this.initPlayer();
            }
            else {
                _super.prototype.restartGame.call(this);
                if (this.index == 0) {
                    this.box_player.x = this.box_game.x = 0;
                }
                else if (this.index == 1) ;
                else if (this.index == 2) ;
                this.onStart();
            }
        };
        LevelScene18.prototype.stopAni = function () {
            Laya.Tween.clearAll(this.box_player);
            Laya.Tween.clearAll(this.box_game);
        };
        return LevelScene18;
    }(LevelBase));

    var LevelScene19 = (function (_super) {
        __extends(LevelScene19, _super);
        function LevelScene19(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene19";
            _this.dogEventFlag = true;
            _this.qiQiuEventFlag = true;
            _this.skin = "game/level/LevelScene19.json";
            return _this;
        }
        LevelScene19.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene19.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        LevelScene19.prototype.initView = function () {
            _super.prototype.initView.call(this);
            this.stopAni();
        };
        LevelScene19.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.stopAni();
        };
        LevelScene19.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _a, _b, _c, _d, _e;
                return __generator(this, function (_f) {
                    switch (_f.label) {
                        case 0:
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            _a = this;
                            return [4, this.createSkeleton(this.mapData.c.ani.url)];
                        case 1:
                            _a.skDianTi = _f.sent();
                            this.skDianTi.x = this.mapData.c.ani.x;
                            this.skDianTi.y = this.mapData.c.ani.y;
                            this.box_dianti.addChild(this.skDianTi);
                            _b = this;
                            return [4, this.createSkeleton(this.mapData.g.url)];
                        case 2:
                            _b.skDog = _f.sent();
                            this.skDog.x = this.mapData.g.x;
                            this.skDog.y = this.mapData.g.y;
                            _c = this;
                            return [4, this.createSkeleton(this.mapData.q.url)];
                        case 3:
                            _c.skQiQiu = _f.sent();
                            this.skQiQiu.x = this.mapData.q.x;
                            this.skQiQiu.y = this.mapData.q.y;
                            this.box_qiqiu.addChild(this.skQiQiu);
                            this.skQiQiu.visible = false;
                            _d = !this.ani_player;
                            if (!_d) return [3, 5];
                            _e = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 4:
                            _d = (_e.ani_player = _f.sent());
                            _f.label = 5;
                        case 5:
                            this.box_player.getChildIndex(this.ani_player) == -1 && (this.box_player.addChild(this.ani_player));
                            this.ani_player.on(Laya.Event.LABEL, this, this.onPlayLabel);
                            this.ani_player.x = this.mapData.player.x;
                            this.ani_player.y = this.mapData.player.y;
                            this.onStart();
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            return [2];
                    }
                });
            });
        };
        LevelScene19.prototype.onPlayLabel = function (evt) {
            var _this = this;
            if (this.bAniDestory)
                return;
            _super.prototype.onPlayLabel.call(this, evt);
            switch (evt.name) {
                case "zd":
                    break;
                case "sevent_19-3n_1":
                    this.skDianTi.play("19-3n", false);
                    break;
                case "sevent_19-1g_1":
                    if (this.dogEventFlag == false)
                        return;
                    this.dogEventFlag = false;
                    if (this.box_dog.numChildren <= 0)
                        this.box_dog.addChild(this.skDog);
                    this.skDog.play("19-1g", false);
                    break;
                case "sevent_19-2g_1":
                    this.skDog.play("19-2g", false);
                    break;
                case "sevent_19-3g_1":
                    this.skDog.play("19-3g", false);
                    break;
                case "sevent_19-1q_1":
                    this.skQiQiu.visible = true;
                    this.skQiQiu.play("19-1q", false);
                    break;
                case "sevent_19-2q_1":
                    this.skQiQiu.visible = true;
                    this.skQiQiu.play("19-2q", false);
                    Laya.timer.once(1500, this, function () { _this.skQiQiu.visible = false; });
                    break;
                case "sevent_19-2n_1":
                    this.skDianTi.play("19-2n", false);
                    break;
                case "sevent_19_door_close":
                    this.skDianTi.play("19-2n", false, true, 0, 0.1);
                    break;
            }
        };
        LevelScene19.prototype.startGame = function () {
            this.clearData();
            _super.prototype.startGame.call(this);
            this.initPlayer();
        };
        LevelScene19.prototype.stopGame = function () {
        };
        LevelScene19.prototype.restartGame = function (bReStartAll) {
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                this.initView();
                _super.prototype.startGame.call(this);
                this.initPlayer();
            }
            else {
                _super.prototype.restartGame.call(this);
                if (this.index == 0) {
                    this.box_player.x = this.box_game.x = 0;
                    this.dogEventFlag = true;
                    this.qiQiuEventFlag = true;
                    this.skDog.play("19-1g", false, true, 0, 0.3);
                }
                else if (this.index == 1) {
                    this.skQiQiu.visible = false;
                }
                else if (this.index == 2) ;
                this.onStart();
            }
        };
        LevelScene19.prototype.stopAni = function () {
            Laya.Tween.clearAll(this.box_player);
            Laya.Tween.clearAll(this.box_game);
        };
        return LevelScene19;
    }(LevelBase));

    var LevelScene15 = (function (_super) {
        __extends(LevelScene15, _super);
        function LevelScene15(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene15";
            _this.skin = "game/level/LevelScene15.json";
            return _this;
        }
        LevelScene15.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene15.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        LevelScene15.prototype.initView = function () {
            _super.prototype.initView.call(this);
            this.stopAni();
        };
        LevelScene15.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.stopAni();
        };
        LevelScene15.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _a, _b, _c, _d, _e, _f;
                return __generator(this, function (_g) {
                    switch (_g.label) {
                        case 0:
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            _a = this;
                            return [4, this.createSkeleton(this.mapData.bg.ani.url)];
                        case 1:
                            _a.bg1 = _g.sent();
                            this.bg1.x = 1456 + this.bg1.width + 52;
                            this.bg1.y = this.bg1.height + 200;
                            this.bg1.play('15-cj0', true);
                            this.box_enb.addChild(this.bg1);
                            _b = this;
                            return [4, this.createSkeleton(this.mapData.bg.ani.url)];
                        case 2:
                            _b.bg2 = _g.sent();
                            this.bg2.x = 2898 + this.bg2.width / 2 + 52;
                            this.bg2.y = this.bg2.height + 200;
                            this.bg2.play('15-cj0', true);
                            this.box_enb.addChild(this.bg2);
                            _c = this;
                            return [4, this.createSkeleton(this.mapData.z.url)];
                        case 3:
                            _c.xiaotou = _g.sent();
                            this.xiaotou.x = 2200;
                            this.xiaotou.y = this.xiaotou.height + this.xiaotou.height / 3;
                            this.box_enb.addChild(this.xiaotou);
                            _d = this;
                            return [4, this.createSkeleton(this.mapData.bg.ani.url)];
                        case 4:
                            _d.bg3 = _g.sent();
                            this.bg3.x = 2898 + this.bg2.width / 2 + 52;
                            this.bg3.y = this.bg2.height + 200;
                            this.bg3.y = this.bg3.height + 200;
                            _e = !this.ani_player;
                            if (!_e) return [3, 6];
                            _f = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 5:
                            _e = (_f.ani_player = _g.sent());
                            _g.label = 6;
                        case 6:
                            this.box_player.getChildIndex(this.ani_player) == -1 && (this.box_player.addChild(this.ani_player));
                            this.ani_player.on(Laya.Event.LABEL, this, this.onPlayLabel);
                            this.ani_player.x = this.mapData.player.x;
                            this.ani_player.y = this.mapData.player.y;
                            this.box_player.x = (this.index) * 1080;
                            this.box_game.x = (this.index) * 1080;
                            this.onStart();
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            return [2];
                    }
                });
            });
        };
        LevelScene15.prototype.onPlayLabel = function (evt) {
            if (this.bAniDestory)
                return;
            _super.prototype.onPlayLabel.call(this, evt);
            switch (evt.name) {
                case "smove":
                    Laya.Tween.to(this.box_game, { x: -1500 }, 3750);
                    Laya.Tween.to(this.box_player, { x: 1500 }, 3750);
                    break;
                case "sevent_15-1_1":
                    this.xiaotou.play("15-1", true);
                    break;
                case "sevent_15-3_1":
                    this.xiaotou.play("15-3", false);
                    break;
                case "sevent_15-4_1":
                    this.xiaotou.play("15-4", false);
                    break;
                case "sevent_15-5_1":
                    this.xiaotou.play("15-5", false);
                    break;
                case "sevent_15-6_1":
                    this.xiaotou.play("15-6", false);
                    break;
                case "sevent_15-7_1":
                    this.xiaotou.play("15-7", false);
                    break;
                case "sevent_15-8_1":
                    this.xiaotou.play("15-8", false);
                    break;
                case "sevent_15-9_1":
                    this.xiaotou.play("15-9", false);
                    break;
                case "sevent_15-10_1":
                    this.xiaotou.play("15-10", false);
                    break;
                case "sevent_15-cj1_1":
                    this.bg1.play("15-cj1", false);
                    break;
                case "sevent_15-cj2_1":
                    this.bg2.play("15-cj2", false);
                    break;
                case "sevent_15-cj4_1":
                    this.bg2.play("15-cj4", false);
                    break;
                case "sevent_15-cj3_1":
                    this.bg3.play("15-cj3", false);
                    break;
                case "ssmove":
                    Laya.Tween.to(this.box_game, { x: -(2550) }, 2700);
                    Laya.Tween.to(this.xiaotou, { x: 2200 + (1000) }, 2700);
                    break;
                case "ssmove2":
                    Laya.Tween.to(this.box_game, { x: -(3550) }, 1800);
                    Laya.Tween.to(this.xiaotou, { x: 2200 + (2000) }, 1800);
                    break;
                case "ssmove3":
                    Laya.Tween.to(this.box_game, { x: -(4400) }, 2700);
                    Laya.Tween.to(this.xiaotou, { x: 2200 + (4000) }, 2700);
                    break;
                case "smove2":
                    Laya.Tween.to(this.box_player, { x: (2550) }, 2200);
                    break;
                case "smove3":
                    Laya.Tween.to(this.box_player, { x: (3550) }, 2120);
                    this.box_enb1.addChild(this.bg3);
                    break;
                case "smove4":
                    Laya.Tween.to(this.box_player, { x: (5700) }, 3290);
                    break;
            }
        };
        LevelScene15.prototype.startGame = function () {
            this.clearData();
            _super.prototype.startGame.call(this);
            this.initPlayer();
        };
        LevelScene15.prototype.stopGame = function () { };
        LevelScene15.prototype.restartGame = function (bReStartAll) {
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                this.initView();
                _super.prototype.startGame.call(this);
                this.initPlayer();
            }
            else {
                _super.prototype.restartGame.call(this);
                this.bg1.play('15-cj0', true);
                this.bg3.play('15-cj0', true);
                this.bg3.removeSelf();
                if (this.index == 0) {
                    this.box_player.x = this.box_game.x = 0;
                    this.xiaotou.x = 2200;
                }
                else if (this.index == 1) {
                    this.bg2.paused();
                    this.xiaotou.x = 3200;
                    this.box_player.x = 2550;
                    this.box_game.x = -2550;
                }
                else if (this.index == 2) {
                    this.xiaotou.x = 4200;
                    this.box_player.x = 3550;
                    this.box_game.x = -3550;
                    this.box_enb.addChild(this.bg3);
                }
                this.onStart();
            }
        };
        LevelScene15.prototype.stopAni = function () {
            Laya.Tween.clearAll(this.box_player);
            Laya.Tween.clearAll(this.box_game);
        };
        return LevelScene15;
    }(LevelBase));

    var LevelScene21 = (function (_super) {
        __extends(LevelScene21, _super);
        function LevelScene21(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene21";
            _this.skin = "game/level/LevelScene21.json";
            return _this;
        }
        LevelScene21.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene21.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        LevelScene21.prototype.initView = function () {
            _super.prototype.initView.call(this);
            this.box_bg_top.x = 0;
            this.box_bg_bottom.x = 0;
            this.box_gopher.x = 140;
            this.box_iceHole.x = 140;
            this.img_hole.visible = false;
            if (this.skGopher)
                this.skGopher.visible = false;
            this.img_iceHole.visible = false;
            if (this.skIceHole)
                this.skIceHole.visible = false;
            if (this.skBrokenBridge)
                this.skBrokenBridge.visible = false;
            this.stopAni();
        };
        LevelScene21.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.stopAni();
        };
        LevelScene21.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _a, _b, _c, _d, _e;
                return __generator(this, function (_f) {
                    switch (_f.label) {
                        case 0:
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            _a = this;
                            return [4, this.createSkeleton(this.mapData.brokenBridge.url)];
                        case 1:
                            _a.skBrokenBridge = _f.sent();
                            this.skBrokenBridge.x = this.mapData.brokenBridge.x;
                            this.skBrokenBridge.y = this.mapData.brokenBridge.y;
                            this.box_iceHole.addChild(this.skBrokenBridge);
                            this.skBrokenBridge.visible = false;
                            _b = this;
                            return [4, this.createSkeleton(this.mapData.gopher.url)];
                        case 2:
                            _b.skGopher = _f.sent();
                            this.skGopher.x = this.mapData.gopher.x;
                            this.skGopher.y = this.mapData.gopher.y;
                            this.box_gopher.addChild(this.skGopher);
                            this.skGopher.visible = false;
                            _c = this;
                            return [4, this.createSkeleton(this.mapData.bucket.url)];
                        case 3:
                            _c.skIceHole = _f.sent();
                            this.skIceHole.x = this.mapData.bucket.x;
                            this.skIceHole.y = this.mapData.bucket.y;
                            this.box_iceHole.addChild(this.skIceHole);
                            this.skIceHole.visible = false;
                            _d = !this.ani_player;
                            if (!_d) return [3, 5];
                            _e = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 4:
                            _d = (_e.ani_player = _f.sent());
                            _f.label = 5;
                        case 5:
                            this.box_player.getChildIndex(this.ani_player) == -1 && (this.box_player.addChild(this.ani_player));
                            this.ani_player.on(Laya.Event.LABEL, this, this.onPlayLabel);
                            this.ani_player.x = this.mapData.player.x;
                            this.ani_player.y = this.mapData.player.y;
                            this.onStart();
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            return [2];
                    }
                });
            });
        };
        LevelScene21.prototype.onPlayLabel = function (evt) {
            var _this = this;
            if (this.bAniDestory)
                return;
            _super.prototype.onPlayLabel.call(this, evt);
            switch (evt.name) {
                case "smove":
                    Laya.Tween.to(this.box_bg_top, { x: -1700 }, 2500, null, Laya.Handler.create(this, function () {
                        Laya.Tween.clearAll(_this.box_bg_top);
                    }));
                    Laya.Tween.to(this.box_bg_bottom, { x: -1700 }, 2500, null, Laya.Handler.create(this, function () {
                        Laya.Tween.clearAll(_this.box_bg_bottom);
                    }));
                    break;
                case "sevent_21-tubis1_1":
                    this.skGopher.visible = true;
                    this.skGopher.play("21-tubis1", false);
                    break;
                case "sevent_21-tubis2_1":
                    this.skGopher.play("21-tubis2", false);
                    break;
                case "sevent_21-tubis3_1":
                    this.skGopher.play("21-tubis3", false);
                    Laya.timer.once(1460, this, function () {
                        _this.img_hole.visible = true;
                        _this.skGopher.visible = false;
                    });
                    break;
                case "smove2":
                    Laya.Tween.to(this.box_bg_top, { x: -5300 }, 3420, null, Laya.Handler.create(this, function () {
                        Laya.Tween.clearAll(_this.box_bg_top);
                    }));
                    Laya.Tween.to(this.box_bg_bottom, { x: -5300 }, 3420, null, Laya.Handler.create(this, function () {
                        Laya.Tween.clearAll(_this.box_bg_bottom);
                    }));
                    Laya.Tween.to(this.box_gopher, { x: -1760 }, 3420, null, Laya.Handler.create(this, function () {
                        Laya.Tween.clearAll(_this.box_gopher);
                    }));
                    this.box_iceHole.x = 2040;
                    this.img_iceHole.visible = true;
                    Laya.Tween.to(this.box_iceHole, { x: 140 }, 3420, null, Laya.Handler.create(this, function () {
                        Laya.Tween.clearAll(_this.box_iceHole);
                    }));
                    break;
                case "sevent_cement_1":
                    this.skIceHole.visible = true;
                    this.skIceHole.play("cement", false);
                    break;
                case "smove3":
                    Laya.Tween.to(this.box_bg_top, { x: -5600 }, 1040, null, Laya.Handler.create(this, function () {
                        Laya.Tween.clearAll(_this.box_bg_top);
                    }));
                    Laya.Tween.to(this.box_bg_bottom, { x: -5600 }, 1040, null, Laya.Handler.create(this, function () {
                        Laya.Tween.clearAll(_this.box_bg_bottom);
                    }));
                    Laya.Tween.to(this.box_iceHole, { x: -160 }, 1040, null, Laya.Handler.create(this, function () {
                        Laya.Tween.clearAll(_this.box_iceHole);
                    }));
                    break;
                case "smove4":
                    Laya.Tween.to(this.box_bg_top, { x: -6600 }, 4960, null, Laya.Handler.create(this, function () {
                        Laya.Tween.clearAll(_this.box_bg_top);
                    }));
                    Laya.Tween.to(this.box_bg_bottom, { x: -6600 }, 4960, null, Laya.Handler.create(this, function () {
                        Laya.Tween.clearAll(_this.box_bg_bottom);
                    }));
                    Laya.Tween.to(this.box_iceHole, { x: -1160 }, 4960, null, Laya.Handler.create(this, function () {
                        Laya.Tween.clearAll(_this.box_iceHole);
                    }));
                    break;
                case "smove5":
                    Laya.Tween.to(this.box_bg_top, { x: -3400 }, 3460, null, Laya.Handler.create(this, function () {
                        Laya.Tween.clearAll(_this.box_bg_top);
                    }));
                    Laya.Tween.to(this.box_bg_bottom, { x: -3400 }, 3460, null, Laya.Handler.create(this, function () {
                        Laya.Tween.clearAll(_this.box_bg_bottom);
                    }));
                    break;
                case "sevent_3-3_1":
                    this.skBrokenBridge.visible = true;
                    this.skBrokenBridge.play("3-3", false);
                    this.img_iceHole.visible = false;
                    break;
            }
        };
        LevelScene21.prototype.startGame = function () {
            this.clearData();
            _super.prototype.startGame.call(this);
            this.initPlayer();
        };
        LevelScene21.prototype.stopGame = function () {
        };
        LevelScene21.prototype.restartGame = function (bReStartAll) {
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                this.initView();
                this.startGame();
            }
            else {
                _super.prototype.restartGame.call(this);
                if (this.index == 0) {
                    this.box_bg_top.x = 0;
                    this.box_bg_bottom.x = 0;
                }
                else if (this.index == 1) {
                    this.skGopher.play("21-tubis1", false);
                }
                else if (this.index == 2) {
                    this.box_iceHole.x = 140;
                    this.box_bg_top.x = -5300;
                    this.box_bg_bottom.x = -5300;
                    this.img_iceHole.visible = true;
                    this.skBrokenBridge.visible = false;
                    this.skIceHole.visible = false;
                }
                this.onStart();
            }
        };
        LevelScene21.prototype.stopAni = function () {
            Laya.Tween.clearAll(this.box_player);
            Laya.Tween.clearAll(this.box_game);
        };
        return LevelScene21;
    }(LevelBase));

    var LevelScene22 = (function (_super) {
        __extends(LevelScene22, _super);
        function LevelScene22(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene22";
            _this.skin = "game/level/LevelScene22.json";
            return _this;
        }
        LevelScene22.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene22.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        LevelScene22.prototype.initView = function () {
            _super.prototype.initView.call(this);
            this.stopAni();
        };
        LevelScene22.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.stopAni();
        };
        LevelScene22.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _a, _b, _c, _d, _e;
                return __generator(this, function (_f) {
                    switch (_f.label) {
                        case 0:
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            _a = this;
                            return [4, this.createSkeleton(this.mapData.xueren.url)];
                        case 1:
                            _a.skXueRen = _f.sent();
                            this.skXueRen.x = this.mapData.xueren.x;
                            this.skXueRen.y = this.mapData.xueren.y;
                            this.box_xueren.addChild(this.skXueRen);
                            _b = this;
                            return [4, this.createSkeleton(this.mapData.xiong.ani.url)];
                        case 2:
                            _b.skXiong = _f.sent();
                            this.skXiong.x = this.mapData.xiong.ani.x;
                            this.skXiong.y = this.mapData.xiong.ani.y;
                            this.box_xiong.addChild(this.skXiong);
                            _c = this;
                            return [4, this.createSkeleton(this.mapData.xiong.ani.url)];
                        case 3:
                            _c.skXiong2 = _f.sent();
                            this.skXiong2.x = this.mapData.xiong.ani.x;
                            this.skXiong2.y = this.mapData.xiong.ani.y;
                            _d = !this.ani_player;
                            if (!_d) return [3, 5];
                            _e = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 4:
                            _d = (_e.ani_player = _f.sent());
                            _f.label = 5;
                        case 5:
                            this.box_player.getChildIndex(this.ani_player) == -1 && (this.box_player.addChild(this.ani_player));
                            this.ani_player.on(Laya.Event.LABEL, this, this.onPlayLabel);
                            this.ani_player.x = this.mapData.player.x;
                            this.ani_player.y = this.mapData.player.y;
                            this.box_player.x = (this.index) * 1080;
                            this.box_game.x = (this.index) * 1080;
                            this.onStart();
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            return [2];
                    }
                });
            });
        };
        LevelScene22.prototype.onPlayLabel = function (evt) {
            if (this.bAniDestory)
                return;
            _super.prototype.onPlayLabel.call(this, evt);
            switch (evt.name) {
                case "smove":
                    Laya.Tween.to(this.box_game, { x: -(1324) }, 4380);
                    Laya.Tween.to(this.box_player, { x: (1324) }, 4380);
                    this.skXueRen.play("22-xr1", false);
                    break;
                case "sevent_22-xr1_0":
                    break;
                case "sevent_22-xr2_1":
                    this.skXueRen.play("22-xr3", false);
                    break;
                case "sevent_22-xr3_1":
                    this.skXueRen.play("22-xr4", false);
                    break;
                case "smove2":
                    Laya.Tween.to(this.box_game, { x: -(3594) }, 4460);
                    Laya.Tween.to(this.box_player, { x: (3594) }, 4460);
                    break;
                case "sevent_22-x5_1":
                    this.skXiong.play("22-x5", false);
                    break;
                case "sevent_22-x6_1":
                    this.skXiong.play("22-x6", false);
                    break;
                case "sevent_22-x7_1":
                    this.skXiong.play("22-x7", false);
                    break;
                case "sevent_22-x9_1":
                    if (this.box_xiong2.numChildren <= 0) {
                        this.box_xiong2.addChild(this.skXiong2);
                    }
                    this.box_xiong2.x = 5290;
                    this.skXiong2.play("22-x9", false);
                    break;
                case "smove3":
                    Laya.Tween.to(this.box_game, { x: -(5290) }, 5200);
                    Laya.Tween.to(this.box_player, { x: (5290) }, 5200);
                    break;
                case "smove4":
                    Laya.Tween.to(this.box_game, { x: -(6200) }, 7543);
                    Laya.Tween.to(this.box_player, { x: (6200) }, 7543);
                    break;
            }
        };
        LevelScene22.prototype.startGame = function () {
            this.clearData();
            _super.prototype.startGame.call(this);
            this.initPlayer();
        };
        LevelScene22.prototype.stopGame = function () {
        };
        LevelScene22.prototype.restartGame = function (bReStartAll) {
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                this.initView();
                _super.prototype.startGame.call(this);
                this.initPlayer();
            }
            else {
                _super.prototype.restartGame.call(this);
                if (this.index == 0) {
                    this.box_player.x = this.box_game.x = 0;
                }
                else if (this.index == 1) ;
                else if (this.index == 2) {
                    this.box_xiong2.removeChild(this.skXiong2);
                }
                this.onStart();
            }
        };
        LevelScene22.prototype.stopAni = function () {
            Laya.Tween.clearAll(this.box_player);
            Laya.Tween.clearAll(this.box_game);
        };
        return LevelScene22;
    }(LevelBase));

    var LevelScene20 = (function (_super) {
        __extends(LevelScene20, _super);
        function LevelScene20(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene20";
            _this.skin = "game/level/LevelScene20.json";
            return _this;
        }
        LevelScene20.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene20.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        LevelScene20.prototype.initView = function () {
            _super.prototype.initView.call(this);
            this.stopAni();
        };
        LevelScene20.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.stopAni();
        };
        LevelScene20.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _a, _b, _c, _d;
                return __generator(this, function (_e) {
                    switch (_e.label) {
                        case 0:
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            _a = this;
                            return [4, this.createSkeleton(this.mapData.bg.ani.url)];
                        case 1:
                            _a.skBg = _e.sent();
                            this.skBg.x = this.mapData.bg.ani.x;
                            this.skBg.y = this.mapData.bg.ani.y;
                            this.box_enb.addChild(this.skBg);
                            _b = this;
                            return [4, this.createSkeleton(this.mapData.bg.ani.url)];
                        case 2:
                            _b.skBg2 = _e.sent();
                            this.skBg2.x = this.mapData.bg.ani.x;
                            this.skBg2.y = this.mapData.bg.ani.y;
                            _c = !this.ani_player;
                            if (!_c) return [3, 4];
                            _d = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 3:
                            _c = (_d.ani_player = _e.sent());
                            _e.label = 4;
                        case 4:
                            this.box_player.getChildIndex(this.ani_player) == -1 && (this.box_player.addChild(this.ani_player));
                            this.ani_player.on(Laya.Event.LABEL, this, this.onPlayLabel);
                            this.ani_player.x = this.mapData.player.x;
                            this.ani_player.y = this.mapData.player.y;
                            this.box_player.x = (this.index) * 1080;
                            this.box_game.x = (this.index) * 1080;
                            this.onStart();
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            return [2];
                    }
                });
            });
        };
        LevelScene20.prototype.onPlayLabel = function (evt) {
            if (this.bAniDestory)
                return;
            _super.prototype.onPlayLabel.call(this, evt);
            switch (evt.name) {
                case "smove":
                    Laya.Tween.to(this.box_game, { x: -(2128) }, 4170);
                    Laya.Tween.to(this.box_player, { x: (2128) }, 4170);
                    this.skBg.play("20-4", true);
                    break;
                case "sevent_20-1_0":
                    this.skBg.play("20-1", false);
                    break;
                case "sevent_20-3_0":
                    this.skBg2.play("20-3", false);
                    break;
                case "smove1":
                    Laya.Tween.to(this.box_game, { x: -(3442) }, 3290);
                    Laya.Tween.to(this.box_player, { x: (3442) }, 3290);
                    if (this.box_enb2.numChildren <= 0) {
                        this.box_enb2.addChild(this.skBg2);
                    }
                    this.skBg2.play("20-3", false);
                    break;
                case "sevent_20-2_0":
                    this.skBg2.play("20-2", false);
                    break;
                case "smove2":
                    Laya.Tween.to(this.box_game, { x: -(4902) }, 3360);
                    Laya.Tween.to(this.box_player, { x: (4902) }, 3360);
                    break;
                case "smove3":
                    Laya.Tween.to(this.box_game, { x: -(5840) }, 5539);
                    break;
            }
        };
        LevelScene20.prototype.startGame = function () {
            this.clearData();
            _super.prototype.startGame.call(this);
            this.initPlayer();
        };
        LevelScene20.prototype.stopGame = function () {
        };
        LevelScene20.prototype.restartGame = function (bReStartAll) {
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                this.initView();
                _super.prototype.startGame.call(this);
                this.initPlayer();
            }
            else {
                _super.prototype.restartGame.call(this);
                if (this.index == 0) {
                    this.box_player.x = this.box_game.x = 0;
                }
                else if (this.index == 1) ;
                else if (this.index == 2) ;
                this.onStart();
            }
        };
        LevelScene20.prototype.stopAni = function () {
            Laya.Tween.clearAll(this.box_player);
            Laya.Tween.clearAll(this.box_game);
        };
        return LevelScene20;
    }(LevelBase));

    var LevelScene23 = (function (_super) {
        __extends(LevelScene23, _super);
        function LevelScene23(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene23";
            _this.skin = "game/level/LevelScene23.json";
            return _this;
        }
        LevelScene23.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene23.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        LevelScene23.prototype.initView = function () {
            _super.prototype.initView.call(this);
            this.stopAni();
        };
        LevelScene23.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.stopAni();
        };
        LevelScene23.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _a, _b, _c, _d;
                return __generator(this, function (_e) {
                    switch (_e.label) {
                        case 0:
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            _a = this;
                            return [4, this.createSkeleton(this.mapData.changjing.url)];
                        case 1:
                            _a.ani_changjing = _e.sent();
                            this.ani_changjing.x = this.mapData.changjing.x;
                            this.ani_changjing.y = this.mapData.changjing.y;
                            this.box_enb.addChild(this.ani_changjing);
                            this.ani_changjing.visible = false;
                            _b = this;
                            return [4, this.createSkeleton(this.mapData.dog.url)];
                        case 2:
                            _b.ani_dog = _e.sent();
                            this.ani_dog.x = this.mapData.dog.x;
                            this.ani_dog.y = this.mapData.dog.y;
                            this.box_enb1.addChild(this.ani_dog);
                            this.ani_dog.visible = false;
                            this.icon_changjing.visible = false;
                            _c = !this.ani_player;
                            if (!_c) return [3, 4];
                            _d = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 3:
                            _c = (_d.ani_player = _e.sent());
                            _e.label = 4;
                        case 4:
                            this.box_player.getChildIndex(this.ani_player) == -1 && (this.box_player.addChild(this.ani_player));
                            this.ani_player.on(Laya.Event.LABEL, this, this.onPlayLabel);
                            this.ani_player.x = this.mapData.player.x;
                            this.ani_player.y = this.mapData.player.y;
                            this.box_player.x = (this.index) * 1080;
                            this.box_game.x = (this.index) * 1080;
                            this.onStart();
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            return [2];
                    }
                });
            });
        };
        LevelScene23.prototype.onPlayLabel = function (evt) {
            if (this.bAniDestory)
                return;
            _super.prototype.onPlayLabel.call(this, evt);
            switch (evt.name) {
                case "smove":
                    Laya.Tween.to(this.box_game, { x: -(1700) }, 4300);
                    Laya.Tween.to(this.box_player, { x: (1700) }, 4300);
                    break;
                case "smove2":
                    this.icon_changjing.visible = true;
                    Laya.Tween.to(this.box_game, { x: -(2800) }, 4380);
                    Laya.Tween.to(this.box_player, { x: (2800) }, 4380);
                    break;
                case "smove3":
                    Laya.Tween.to(this.box_game, { x: -(4000) }, 4170);
                    Laya.Tween.to(this.box_player, { x: (4000) }, 4170);
                    break;
                case "sevent_22-x5_1":
                    this.ani_changjing.visible = true;
                    this.ani_changjing.play('22-x5', false);
                    break;
                case "sevent_24-01_1":
                    this.ani_dog.visible = true;
                    this.ani_dog.play('24-01', true);
                    break;
                case "sevent_24-02_1":
                    this.ani_dog.visible = true;
                    this.ani_dog.play('24-02', false);
                    break;
                case "sevent_24-3_1":
                    this.ani_dog.visible = true;
                    this.ani_dog.play('24-3', false);
                    Laya.Tween.to(this.box_player, { x: (4800) }, 4000);
                    Laya.Tween.to(this.ani_dog, { x: (this.ani_dog.x + 800) }, 4000);
                    break;
            }
        };
        LevelScene23.prototype.startGame = function () {
            this.clearData();
            _super.prototype.startGame.call(this);
            this.initPlayer();
        };
        LevelScene23.prototype.stopGame = function () { };
        LevelScene23.prototype.restartGame = function (bReStartAll) {
            var _this = this;
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                this.initView();
                _super.prototype.startGame.call(this);
                this.initPlayer();
            }
            else {
                _super.prototype.restartGame.call(this);
                if (this.index == 0) {
                    this.box_player.x = this.box_game.x = 0;
                }
                else if (this.index == 1) {
                    this.box_game.x = -2800;
                    this.box_player.x = 2800;
                }
                else if (this.index == 2) {
                    this.box_game.x = -2800;
                    this.box_player.x = 2800;
                    Laya.timer.once(100, this, function () {
                        Laya.Tween.to(_this.box_game, { x: -(4000) }, 4170);
                        Laya.Tween.to(_this.box_player, { x: (4000) }, 4170);
                        _this.playAni("23-11", function () {
                            _this.onPlayOnce();
                        });
                    });
                    this.ani_dog.play("24-01", true);
                }
                this.onStart();
            }
        };
        LevelScene23.prototype.stopAni = function () {
            Laya.Tween.clearAll(this.box_player);
            Laya.Tween.clearAll(this.box_game);
        };
        return LevelScene23;
    }(LevelBase));

    var LevelScene25 = (function (_super) {
        __extends(LevelScene25, _super);
        function LevelScene25(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene25";
            _this.skin = "game/level/LevelScene25.json";
            return _this;
        }
        LevelScene25.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene25.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        LevelScene25.prototype.initView = function () {
            _super.prototype.initView.call(this);
            this.stopAni();
        };
        LevelScene25.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.stopAni();
        };
        LevelScene25.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _a, _b, _c, _d, _e;
                return __generator(this, function (_f) {
                    switch (_f.label) {
                        case 0:
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            _a = this;
                            return [4, this.createSkeleton(this.mapData.snake.url)];
                        case 1:
                            _a.ani_snake = _f.sent();
                            this.ani_snake.x = this.mapData.snake.x;
                            this.ani_snake.y = this.mapData.snake.y;
                            this.box_enb.addChild(this.ani_snake);
                            this.ani_snake.visible = false;
                            _b = this;
                            return [4, this.createSkeleton(this.mapData.ljuanfen.url)];
                        case 2:
                            _b.ani_ljuanfen = _f.sent();
                            this.ani_ljuanfen.x = this.mapData.ljuanfen.x;
                            this.ani_ljuanfen.y = this.mapData.ljuanfen.y;
                            this.box_enb.addChild(this.ani_ljuanfen);
                            _c = this;
                            return [4, this.createSkeleton(this.mapData.water.url)];
                        case 3:
                            _c.ani_water = _f.sent();
                            this.ani_water.x = this.mapData.water.x;
                            this.ani_water.y = this.mapData.water.y;
                            this.box_enb.addChild(this.ani_water);
                            this.ani_water.visible = false;
                            _d = !this.ani_player;
                            if (!_d) return [3, 5];
                            _e = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 4:
                            _d = (_e.ani_player = _f.sent());
                            _f.label = 5;
                        case 5:
                            this.box_player.getChildIndex(this.ani_player) == -1 && (this.box_player.addChild(this.ani_player));
                            this.ani_player.on(Laya.Event.LABEL, this, this.onPlayLabel);
                            this.ani_player.x = this.mapData.player.x;
                            this.ani_player.y = this.mapData.player.y;
                            this.box_player.x = (this.index) * 1080;
                            this.box_game.x = (this.index) * 1080;
                            this.onStart();
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            return [2];
                    }
                });
            });
        };
        LevelScene25.prototype.onPlayLabel = function (evt) {
            var _this = this;
            if (this.bAniDestory)
                return;
            _super.prototype.onPlayLabel.call(this, evt);
            switch (evt.name) {
                case "smove":
                    Laya.Tween.to(this.box_game, { x: -(1080) }, 3880);
                    Laya.Tween.to(this.box_player, { x: (1080) }, 3880);
                    break;
                case "smove2":
                    Laya.Tween.to(this.box_game, { x: -(3000) }, 3300);
                    Laya.Tween.to(this.box_player, { x: (3000) }, 3300);
                    break;
                case "smove3":
                    Laya.Tween.to(this.box_game, { x: -(5800) }, 4290);
                    Laya.Tween.to(this.box_player, { x: (5800) }, 4290);
                    break;
                case "smove4":
                    Laya.Tween.to(this.box_game, { x: -(8000) }, 2630);
                    break;
                case "sevent_25-5-1_1":
                    this.ani_water.visible = true;
                    this.ani_water.player.once(Laya.Event.STOPPED, this, function () {
                        _this.ani_water.visible = false;
                    });
                    this.ani_water.play("25-5-1", false);
                    break;
                case "sevent_25-9-1she_1":
                    this.ani_snake.visible = true;
                    this.ani_snake.play("25-9-1she", false);
                    break;
                case "sevent_25-9-2she3_1":
                    this.ani_snake.visible = true;
                    this.ani_snake.play("25-9-2she", false);
                    break;
                case "sevent_25-9-2she2_1":
                    this.ani_snake.visible = true;
                    this.ani_snake.play("25-9-2she2", false);
                    break;
            }
        };
        LevelScene25.prototype.onPlayOnce = function () {
            _super.prototype.onPlayOnce.call(this);
            if (this.localData.next == "25-16") {
                this.box_player.x = 8000;
            }
        };
        LevelScene25.prototype.startGame = function () {
            this.clearData();
            _super.prototype.startGame.call(this);
            this.initPlayer();
        };
        LevelScene25.prototype.stopGame = function () { };
        LevelScene25.prototype.restartGame = function (bReStartAll) {
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                this.initView();
                _super.prototype.startGame.call(this);
                this.initPlayer();
            }
            else {
                _super.prototype.restartGame.call(this);
                if (this.index == 0) {
                    this.box_player.x = this.box_game.x = 0;
                }
                else if (this.index == 1) {
                    this.box_game.x = -3000;
                    this.box_player.x = 3000;
                    this.ani_snake.visible = true;
                    this.ani_snake.play("25-9-1she", false);
                }
                else if (this.index == 2) {
                    this.box_game.x = -5800;
                    this.box_player.x = 5800;
                }
                this.onStart();
            }
        };
        LevelScene25.prototype.stopAni = function () {
            Laya.Tween.clearAll(this.box_player);
            Laya.Tween.clearAll(this.box_game);
        };
        return LevelScene25;
    }(LevelBase));

    var LevelScene26 = (function (_super) {
        __extends(LevelScene26, _super);
        function LevelScene26(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene26";
            _this.skin = "game/level/LevelScene26.json";
            return _this;
        }
        LevelScene26.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene26.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        LevelScene26.prototype.initView = function () {
            _super.prototype.initView.call(this);
            this.stopAni();
        };
        LevelScene26.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.stopAni();
        };
        LevelScene26.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _a, _b, _c, _d, _e, _f, _g, _h;
                return __generator(this, function (_j) {
                    switch (_j.label) {
                        case 0:
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            _a = this;
                            return [4, this.createSkeleton(this.mapData.huoba.url)];
                        case 1:
                            _a.huoba = _j.sent();
                            this.huoba.x = this.mapData.huoba.x;
                            this.huoba.y = this.mapData.huoba.y;
                            this.box_enb.addChild(this.huoba);
                            _b = this;
                            return [4, this.createSkeleton(this.mapData.jianci.url)];
                        case 2:
                            _b.jianci = _j.sent();
                            this.jianci.x = this.mapData.jianci.x;
                            this.jianci.y = this.mapData.jianci.y;
                            this.box_enb.addChild(this.jianci);
                            this.jianci.visible = false;
                            _c = this;
                            return [4, this.createSkeleton(this.mapData.men.url)];
                        case 3:
                            _c.men = _j.sent();
                            this.men.x = this.mapData.men.x;
                            this.men.y = this.mapData.men.y;
                            this.box_enb.addChild(this.men);
                            this.men.visible = false;
                            _d = this;
                            return [4, this.createSkeleton(this.mapData.munaiyi.url)];
                        case 4:
                            _d.munaiyi = _j.sent();
                            this.munaiyi.x = this.mapData.munaiyi.x;
                            this.munaiyi.y = this.mapData.munaiyi.y;
                            this.box_enb.addChild(this.munaiyi);
                            this.munaiyi.visible = false;
                            _e = this;
                            return [4, this.createSkeleton(this.mapData.shitou.url)];
                        case 5:
                            _e.shitou = _j.sent();
                            this.shitou.x = this.mapData.shitou.x;
                            this.shitou.y = this.mapData.shitou.y;
                            this.box_enb.addChild(this.shitou);
                            this.shitou.visible = false;
                            _f = this;
                            return [4, this.createSkeleton(this.mapData.tianpin.url)];
                        case 6:
                            _f.tianpin = _j.sent();
                            this.tianpin.x = this.mapData.tianpin.x;
                            this.tianpin.y = this.mapData.tianpin.y;
                            this.box_enb.addChild(this.tianpin);
                            this.tianpin.visible = false;
                            _g = !this.ani_player;
                            if (!_g) return [3, 8];
                            _h = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 7:
                            _g = (_h.ani_player = _j.sent());
                            _j.label = 8;
                        case 8:
                            this.box_player.getChildIndex(this.ani_player) == -1 && (this.box_player.addChild(this.ani_player));
                            this.ani_player.on(Laya.Event.LABEL, this, this.onPlayLabel);
                            this.ani_player.x = this.mapData.player.x;
                            this.ani_player.y = this.mapData.player.y;
                            this.box_player.x = (this.index) * 1080;
                            this.box_game.x = (this.index) * 1080;
                            this.onStart();
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            return [2];
                    }
                });
            });
        };
        LevelScene26.prototype.onPlayLabel = function (evt) {
            if (this.bAniDestory)
                return;
            _super.prototype.onPlayLabel.call(this, evt);
            switch (evt.name) {
                case "smove":
                    Laya.Tween.to(this.box_game, { x: -(800) }, 3380);
                    Laya.Tween.to(this.box_player, { x: (800) }, 3380);
                    break;
                case "smove2":
                    Laya.Tween.to(this.box_game, { x: -(2000) }, 4000);
                    Laya.Tween.to(this.box_player, { x: (2400) }, 5200);
                    break;
                case "smove3":
                    Laya.Tween.to(this.box_game, { x: -(3000) }, 2750);
                    Laya.Tween.to(this.box_player, { x: (3000) }, 2750);
                    break;
                case "smove4":
                    Laya.Tween.to(this.box_game, { x: -(4000) }, 5460);
                    Laya.Tween.to(this.box_player, { x: (4200) }, 5460);
                    break;
                case "sevent_huo2_1":
                    this.huoba.play("huo2", true);
                    break;
                case "sevent_jianci2_1":
                    this.jianci.visible = true;
                    this.jianci.play("jianci2", true);
                    break;
                case "sevent_jianci1_1":
                    this.jianci.visible = true;
                    this.jianci.play("jianci1", false);
                    break;
                case "sevent_huo1_1":
                    this.huoba.play("huo1", false);
                    break;
                case "sevent_men2_1":
                    this.men.visible = true;
                    this.men.play("men2", false);
                    break;
                case "sevent_men3_1":
                    this.men.visible = true;
                    this.men.play("men3", false);
                    break;
                case "sevent_tianping1_1":
                    this.tianpin.visible = true;
                    this.tianpin.play("tianping1", false);
                    break;
                case "sevent_tianping2_1":
                    this.tianpin.visible = true;
                    this.tianpin.play("tianping2", false);
                    break;
                case "sevent_munaiyi3_1":
                    this.munaiyi.visible = true;
                    this.munaiyi.play("munaiyi3", true);
                    break;
                case "sevent_munaiyi1_1":
                    this.munaiyi.visible = true;
                    this.munaiyi.play("munaiyi1", false);
                    break;
                case "sevent_munaiyi2_1":
                    this.munaiyi.visible = true;
                    this.munaiyi.play("munaiyi2", false);
                    break;
                case "sevent_26-15_1":
                    this.shitou.visible = true;
                    this.shitou.play("26-15", true);
                    break;
                case "sevent_26-14_1":
                    this.shitou.visible = true;
                    this.shitou.play("26-14", false);
                    break;
            }
        };
        LevelScene26.prototype.startGame = function () {
            this.clearData();
            _super.prototype.startGame.call(this);
            this.initPlayer();
        };
        LevelScene26.prototype.stopGame = function () { };
        LevelScene26.prototype.restartGame = function (bReStartAll) {
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                this.initView();
                _super.prototype.startGame.call(this);
                this.initPlayer();
            }
            else {
                _super.prototype.restartGame.call(this);
                if (this.index == 0) {
                    this.box_player.x = this.box_game.x = 0;
                }
                else if (this.index == 1) {
                    this.box_game.x = -2000;
                    this.box_player.x = 2400;
                }
                else if (this.index == 2) {
                    this.box_game.x = -3000;
                    this.box_player.x = 3000;
                    this.munaiyi.play("munaiyi3", true);
                }
                else if (this.index == 3) {
                    this.box_game.x = -4000;
                    this.box_player.x = 4200;
                }
                this.onStart();
            }
        };
        LevelScene26.prototype.stopAni = function () {
            Laya.Tween.clearAll(this.box_player);
            Laya.Tween.clearAll(this.box_game);
        };
        return LevelScene26;
    }(LevelBase));

    var LevelScene27 = (function (_super) {
        __extends(LevelScene27, _super);
        function LevelScene27(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene27";
            _this.skin = "game/level/LevelScene27.json";
            return _this;
        }
        LevelScene27.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene27.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        LevelScene27.prototype.initView = function () {
            _super.prototype.initView.call(this);
            this.stopAni();
        };
        LevelScene27.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.stopAni();
        };
        LevelScene27.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _a, _b, _c, _d, _e;
                return __generator(this, function (_f) {
                    switch (_f.label) {
                        case 0:
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            _a = this;
                            return [4, this.createSkeleton(this.mapData.keng.url)];
                        case 1:
                            _a.keng = _f.sent();
                            this.keng.x = this.mapData.keng.x;
                            this.keng.y = this.mapData.keng.y;
                            this.box_enb.addChild(this.keng);
                            _b = this;
                            return [4, this.createSkeleton(this.mapData.changjing.url)];
                        case 2:
                            _b.changjing = _f.sent();
                            this.changjing.x = this.mapData.changjing.x;
                            this.changjing.y = this.mapData.changjing.y;
                            this.box_enb.addChild(this.changjing);
                            _c = this;
                            return [4, this.createSkeleton(this.mapData.zhiwu.url)];
                        case 3:
                            _c.zhiwu = _f.sent();
                            this.zhiwu.scale(0.7, 0.7);
                            this.zhiwu.x = this.mapData.zhiwu.x;
                            this.zhiwu.y = this.mapData.zhiwu.y;
                            this.box_enb.addChild(this.zhiwu);
                            _d = !this.ani_player;
                            if (!_d) return [3, 5];
                            _e = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 4:
                            _d = (_e.ani_player = _f.sent());
                            _f.label = 5;
                        case 5:
                            this.box_player.getChildIndex(this.ani_player) == -1 && (this.box_player.addChild(this.ani_player));
                            this.ani_player.on(Laya.Event.LABEL, this, this.onPlayLabel);
                            this.ani_player.x = this.mapData.player.x;
                            this.ani_player.y = this.mapData.player.y;
                            this.box_player.x = (this.index) * 1080;
                            this.box_game.x = (this.index) * 1080;
                            this.onStart();
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            return [2];
                    }
                });
            });
        };
        LevelScene27.prototype.onPlayLabel = function (evt) {
            if (this.bAniDestory)
                return;
            _super.prototype.onPlayLabel.call(this, evt);
            switch (evt.name) {
                case "smove":
                    Laya.Tween.to(this.box_game, { x: -(2130) }, 3380);
                    Laya.Tween.to(this.box_player, { x: (2130) }, 3380);
                    break;
                case "smove2":
                    Laya.Tween.to(this.box_game, { x: -(3200) }, 5500);
                    Laya.Tween.to(this.box_player, { x: (3400) }, 5500);
                    break;
                case "smove3":
                    Laya.Tween.to(this.box_game, { x: -(4250) }, 2780);
                    Laya.Tween.to(this.box_player, { x: (4200) }, 2780);
                    break;
                case "pmove":
                    Laya.Tween.to(this.box_player, { x: (5300) }, 5590);
                    break;
                case "pmove1":
                    Laya.Tween.to(this.box_player, { x: (3750) }, 2830);
                    break;
                case "sevent_zhiwu1_1":
                    this.zhiwu.visible = true;
                    this.zhiwu.play("zhiwu1", false);
                    break;
                case "sevent_zhiwu2_1":
                    this.zhiwu.play("zhiwu2", true);
                    break;
                case "sevent_zhiwu3_1":
                    this.zhiwu.play("zhiwu3", true);
                    break;
                case "sevent_changjing_1":
                    this.changjing.visible = true;
                    this.changjing.play("changjing", true);
                    break;
                case "sevent_keng1_1":
                    this.keng.visible = true;
                    this.keng.play("keng1", true);
                    break;
                case "sevent_keng2_1":
                    this.keng.visible = true;
                    this.keng.play("keng2", false);
                    break;
            }
        };
        LevelScene27.prototype.startGame = function () {
            this.clearData();
            _super.prototype.startGame.call(this);
            this.initPlayer();
        };
        LevelScene27.prototype.stopGame = function () { };
        LevelScene27.prototype.restartGame = function (bReStartAll) {
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                this.initView();
                _super.prototype.startGame.call(this);
                this.initPlayer();
            }
            else {
                _super.prototype.restartGame.call(this);
                if (this.index == 0) {
                    this.box_player.x = this.box_game.x = 0;
                }
                else if (this.index == 1) {
                    this.box_game.x = -3200;
                    this.box_player.x = 3400;
                }
                else if (this.index == 2) {
                    this.box_game.x = -4250;
                    this.box_player.x = 4200;
                }
                this.onStart();
            }
        };
        LevelScene27.prototype.stopAni = function () {
            Laya.Tween.clearAll(this.box_player);
            Laya.Tween.clearAll(this.box_game);
        };
        return LevelScene27;
    }(LevelBase));

    var LevelScene28 = (function (_super) {
        __extends(LevelScene28, _super);
        function LevelScene28(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene28";
            _this.skin = "game/level/LevelScene28.json";
            return _this;
        }
        LevelScene28.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene28.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        LevelScene28.prototype.initView = function () {
            _super.prototype.initView.call(this);
            this.stopAni();
            this.box_green.visible = false;
        };
        LevelScene28.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.stopAni();
        };
        LevelScene28.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _a, _b, _c, _d, _e, _f;
                return __generator(this, function (_g) {
                    switch (_g.label) {
                        case 0:
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            _a = this;
                            return [4, this.createSkeleton(this.mapData.dengshen.url)];
                        case 1:
                            _a.dengshen = _g.sent();
                            this.dengshen.x = this.mapData.dengshen.x;
                            this.dengshen.y = this.mapData.dengshen.y;
                            this.box_enb.addChild(this.dengshen);
                            this.dengshen.visible = false;
                            _b = this;
                            return [4, this.createSkeleton(this.mapData.xiayu.url)];
                        case 2:
                            _b.xiayu = _g.sent();
                            this.xiayu.x = this.mapData.xiayu.x;
                            this.xiayu.y = this.mapData.xiayu.y;
                            this.box_enb.addChild(this.xiayu);
                            this.xiayu.visible = false;
                            _c = this;
                            return [4, this.createSkeleton(this.mapData.qiangdao.url)];
                        case 3:
                            _c.qiangdao = _g.sent();
                            this.qiangdao.x = this.mapData.qiangdao.x;
                            this.qiangdao.y = this.mapData.qiangdao.y;
                            this.box_enb.addChild(this.qiangdao);
                            this.qiangdao.visible = false;
                            _d = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 4:
                            _d.ani_player = _g.sent();
                            _e = !this.ani_player;
                            if (!_e) return [3, 6];
                            _f = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 5:
                            _e = (_f.ani_player = _g.sent());
                            _g.label = 6;
                        case 6:
                            this.box_player.getChildIndex(this.ani_player) == -1 && (this.box_player.addChild(this.ani_player));
                            this.ani_player.on(Laya.Event.LABEL, this, this.onPlayLabel);
                            this.ani_player.x = this.mapData.player.x;
                            this.ani_player.y = this.mapData.player.y;
                            this.box_player.x = (this.index) * 1080;
                            this.box_game.x = (this.index) * 1080;
                            this.onStart();
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            return [2];
                    }
                });
            });
        };
        LevelScene28.prototype.onPlayLabel = function (evt) {
            if (this.bAniDestory)
                return;
            _super.prototype.onPlayLabel.call(this, evt);
            switch (evt.name) {
                case "smove":
                    Laya.Tween.to(this.box_game, { x: -(1000) }, 2080);
                    Laya.Tween.to(this.box_player, { x: (1000) }, 2080);
                    break;
                case "smove1":
                    Laya.Tween.to(this.box_game, { x: -(1500) }, 2920);
                    Laya.Tween.to(this.box_player, { x: (1500) }, 2920);
                    break;
                case "smove2":
                    Laya.Tween.to(this.box_game, { x: -(1800) }, 2670);
                    Laya.Tween.to(this.box_player, { x: (3000) }, 4000);
                    this.qiangdao.visible = false;
                    break;
                case "tmove":
                    this.box_green.visible = true;
                    this.box_green.alpha = 0;
                    Laya.Tween.to(this.box_green, { alpha: 1 }, 500);
                    break;
                case "sevent_chuxian_1":
                    this.dengshen.visible = true;
                    this.dengshen.play("chuxian", false);
                    break;
                case "sevent_shifa_1":
                    this.dengshen.visible = true;
                    this.dengshen.play("shifa", false);
                    break;
                case "sevent_daiji_1":
                    this.dengshen.visible = true;
                    this.dengshen.play("daiji", true);
                    break;
                case "sevent_xiayu_1":
                    this.xiayu.visible = true;
                    this.xiayu.play("xiayu", false);
                    break;
                case "sevent_shifaxiaoshi_1":
                    this.dengshen.visible = true;
                    this.dengshen.play("shifaxiaoshi", false);
                    break;
                case "sevent_zoulu_1":
                    this.qiangdao.visible = true;
                    Laya.Tween.to(this.qiangdao, { x: 1850 }, 1000);
                    this.qiangdao.play("zoulux", false);
                    break;
                case "sevent_daijix_1":
                    this.qiangdao.visible = true;
                    this.qiangdao.play("daijix", true);
                    break;
            }
        };
        LevelScene28.prototype.startGame = function () {
            this.clearData();
            _super.prototype.startGame.call(this);
            this.initPlayer();
        };
        LevelScene28.prototype.stopGame = function () { };
        LevelScene28.prototype.restartGame = function (bReStartAll) {
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                this.initView();
                _super.prototype.startGame.call(this);
                this.initPlayer();
            }
            else {
                _super.prototype.restartGame.call(this);
                if (this.index == 0) {
                    this.box_player.x = this.box_game.x = 0;
                }
                else if (this.index == 1) {
                    this.box_green.visible = false;
                    this.box_game.x = -1000;
                    this.box_player.x = 1000;
                    this.dengshen.play("daiji", true);
                }
                else if (this.index == 2) {
                    this.box_game.x = -1000;
                    this.box_player.x = 1000;
                    this.dengshen.play("daiji", true);
                    this.qiangdao.x = this.mapData.qiangdao.x;
                }
                this.onStart();
            }
        };
        LevelScene28.prototype.stopAni = function () {
            Laya.Tween.clearAll(this.box_player);
            Laya.Tween.clearAll(this.box_game);
        };
        return LevelScene28;
    }(LevelBase));

    var LevelScene29 = (function (_super) {
        __extends(LevelScene29, _super);
        function LevelScene29(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene29";
            _this.skin = "game/level/LevelScene29.json";
            return _this;
        }
        LevelScene29.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene29.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        LevelScene29.prototype.initView = function () {
            _super.prototype.initView.call(this);
            this.stopAni();
        };
        LevelScene29.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.stopAni();
        };
        LevelScene29.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                return __generator(this, function (_a) {
                    ViewChangeManager.getInstance().showBufferLoadingView();
                    ViewChangeManager.getInstance().hideBufferLoadingView();
                    return [2];
                });
            });
        };
        LevelScene29.prototype.onPlayLabel = function (evt) {
            console.log("捕获动画事件", evt);
            if (this.bAniDestory)
                return;
            _super.prototype.onPlayLabel.call(this, evt);
        };
        LevelScene29.prototype.startGame = function () {
            this.clearData();
            _super.prototype.startGame.call(this);
            this.initPlayer();
        };
        LevelScene29.prototype.stopGame = function () { };
        LevelScene29.prototype.restartGame = function (bReStartAll) {
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                this.initView();
                _super.prototype.startGame.call(this);
                this.initPlayer();
            }
            else {
                _super.prototype.restartGame.call(this);
            }
        };
        LevelScene29.prototype.stopAni = function () {
            Laya.Tween.clearAll(this.box_player);
            Laya.Tween.clearAll(this.box_game);
        };
        return LevelScene29;
    }(LevelBase));

    var LevelScene30 = (function (_super) {
        __extends(LevelScene30, _super);
        function LevelScene30(data_) {
            var _this = _super.call(this, data_) || this;
            _this.className_key = "LevelScene30";
            _this.skin = "game/level/LevelScene30.json";
            return _this;
        }
        LevelScene30.prototype.onAddStage = function () {
            _super.prototype.onAddStage.call(this);
        };
        LevelScene30.prototype.childrenCreated = function () {
            _super.prototype.childrenCreated.call(this);
        };
        LevelScene30.prototype.initView = function () {
            _super.prototype.initView.call(this);
            this.stopAni();
        };
        LevelScene30.prototype.onRemoved = function () {
            _super.prototype.onRemoved.call(this);
            this.stopAni();
        };
        LevelScene30.prototype.initPlayer = function () {
            return __awaiter(this, void 0, void 0, function () {
                var _a, _b, _c, _d, _e, _f;
                return __generator(this, function (_g) {
                    switch (_g.label) {
                        case 0:
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            _a = this;
                            return [4, this.createSkeleton(this.mapData.huo.url)];
                        case 1:
                            _a.skHuo = _g.sent();
                            this.skHuo.x = this.mapData.huo.x;
                            this.skHuo.y = this.mapData.huo.y;
                            this.box_huo.addChild(this.skHuo);
                            this.skHuo.visible = false;
                            _b = this;
                            return [4, this.createSkeleton(this.mapData.long.url)];
                        case 2:
                            _b.skLong = _g.sent();
                            this.skLong.x = this.mapData.long.x;
                            this.skLong.y = this.mapData.long.y;
                            this.skLong.play("konglong1", true);
                            this.box_long.addChild(this.skLong);
                            _c = this;
                            return [4, this.createSkeleton(this.mapData.shitou.url)];
                        case 3:
                            _c.skShiTou = _g.sent();
                            this.skShiTou.x = this.mapData.shitou.x;
                            this.skShiTou.y = this.mapData.shitou.y;
                            this.skShiTou.play("shitou1", true);
                            this.box_shitou.addChild(this.skShiTou);
                            _d = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 4:
                            _d.ani_player = _g.sent();
                            _e = !this.ani_player;
                            if (!_e) return [3, 6];
                            _f = this;
                            return [4, this.createSkeleton(this.mapData.player.url)];
                        case 5:
                            _e = (_f.ani_player = _g.sent());
                            _g.label = 6;
                        case 6:
                            this.box_player.getChildIndex(this.ani_player) == -1 && (this.box_player.addChild(this.ani_player));
                            this.ani_player.on(Laya.Event.LABEL, this, this.onPlayLabel);
                            this.ani_player.x = this.mapData.player.x;
                            this.ani_player.y = this.mapData.player.y;
                            this.box_player.x = (this.index) * 1080;
                            this.box_game.x = (this.index) * 1080;
                            this.onStart();
                            ViewChangeManager.getInstance().hideBufferLoadingView();
                            return [2];
                    }
                });
            });
        };
        LevelScene30.prototype.onPlayLabel = function (evt) {
            if (this.bAniDestory)
                return;
            _super.prototype.onPlayLabel.call(this, evt);
            switch (evt.name) {
                case "smove":
                    Laya.Tween.to(this.box_game, { x: -(1176) }, 2500);
                    Laya.Tween.to(this.box_player, { x: (1176) }, 2500);
                    break;
                case "sevent_huo_1":
                    this.skHuo.visible = true;
                    this.skHuo.play("huo", true);
                    break;
                case "smove1":
                    Laya.Tween.to(this.box_game, { x: -(2455) }, 2540);
                    Laya.Tween.to(this.box_player, { x: (2315) }, 2540);
                    break;
                case "sevent_konglong2_1":
                    this.skLong.play("konglong2", false);
                    break;
                case "sevent_konglong3_1":
                    this.skLong.play("konglong3", false);
                    break;
                case "smove2":
                    Laya.Tween.to(this.box_game, { x: -(3400) }, 3330);
                    Laya.Tween.to(this.box_player, { x: (3600) }, 3330);
                    break;
                case "sevent_shitou2_1":
                    this.skShiTou.play("shitou2", false);
                    break;
                case "sevent_shitou3_1":
                    this.skShiTou.play("shitou3", false);
                    break;
                case "smove3":
                    Laya.Tween.to(this.box_game, { x: -(4625) }, 5750);
                    Laya.Tween.to(this.box_player, { x: (4650) }, 5750);
                    break;
            }
        };
        LevelScene30.prototype.startGame = function () {
            this.clearData();
            _super.prototype.startGame.call(this);
            this.initPlayer();
        };
        LevelScene30.prototype.stopGame = function () { };
        LevelScene30.prototype.restartGame = function (bReStartAll) {
            if (bReStartAll === void 0) { bReStartAll = true; }
            if (bReStartAll) {
                this.initView();
                _super.prototype.startGame.call(this);
                this.initPlayer();
            }
            else {
                _super.prototype.restartGame.call(this);
                if (this.index == 0) {
                    this.box_player.x = (this.index) * 1080;
                    this.box_game.x = (this.index) * 1080;
                }
                else if (this.index == 1) {
                    this.skLong.play("konglong1", true);
                }
                else if (this.index == 2) {
                    this.skShiTou.play("shitou1", true);
                }
                this.onStart();
            }
        };
        LevelScene30.prototype.stopAni = function () {
            Laya.Tween.clearAll(this.box_player);
            Laya.Tween.clearAll(this.box_game);
        };
        return LevelScene30;
    }(LevelBase));

    var LevelManager = (function () {
        function LevelManager() {
            this.levelBaseUrl = 'resource/assets/configs/map/map';
        }
        LevelManager.getInstance = function () {
            if (!this.ins)
                this.ins = new LevelManager();
            return this.ins;
        };
        LevelManager.prototype.createLevelScene = function (level) {
            return __awaiter(this, void 0, void 0, function () {
                var classKey, mapLevelStr, jsonPath, data, stGroup, self;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            console.log();
                            level = Utils.getQueryString("level");
                            switch (level) {
                                case 1:
                                    classKey = LevelScene1;
                                    break;
                                case 2:
                                    classKey = LevelScene2;
                                    break;
                                case 3:
                                    classKey = LevelScene3;
                                    break;
                                case 4:
                                    classKey = LevelScene4;
                                    break;
                                case 5:
                                    classKey = LevelScene5;
                                    break;
                                case 6:
                                    classKey = LevelScene6;
                                    break;
                                case 7:
                                    classKey = LevelScene7;
                                    break;
                                case 8:
                                    classKey = LevelScene8;
                                    break;
                                case 9:
                                    classKey = LevelScene9;
                                    break;
                                case 10:
                                    classKey = LevelScene10;
                                    break;
                                case 11:
                                    classKey = LevelScene11;
                                    break;
                                case 12:
                                    classKey = LevelScene12;
                                    break;
                                case 13:
                                    classKey = LevelScene13;
                                    break;
                                case 14:
                                    classKey = LevelScene14;
                                    break;
                                case 15:
                                    classKey = LevelScene15;
                                    break;
                                case 16:
                                    classKey = LevelScene16;
                                    break;
                                case 17:
                                    classKey = LevelScene17;
                                    break;
                                case 18:
                                    classKey = LevelScene18;
                                    break;
                                case 19:
                                    classKey = LevelScene19;
                                    break;
                                case 21:
                                    classKey = LevelScene21;
                                    break;
                                case 20:
                                    classKey = LevelScene20;
                                    break;
                                case 22:
                                    classKey = LevelScene22;
                                    break;
                                case 23:
                                    classKey = LevelScene23;
                                    break;
                                case 24:
                                    classKey = LevelScene25;
                                    break;
                                case 25:
                                    classKey = LevelScene26;
                                    break;
                                case 26:
                                    classKey = LevelScene27;
                                    break;
                                case 27:
                                    classKey = LevelScene28;
                                    break;
                                case 28:
                                    classKey = LevelScene29;
                                    break;
                                case 29:
                                    classKey = LevelScene30;
                                    break;
                                default:
                                    classKey = LevelScene1;
                                    break;
                            }
                            PlayerDataManager.getInstance().setCurLevel(level - 1);
                            MiniManeger.instance.reportMonitorSome(MiniEventConst.GAME_PLAY_LEVEL + "_" + level, 1);
                            if (DeviceUtil.isTTMiniGame()) {
                                MiniManeger.instance.hideBanner();
                            }
                            mapLevelStr = level;
                            if (mapLevelStr >= 24) {
                                mapLevelStr += 1;
                            }
                            jsonPath = this.levelBaseUrl + mapLevelStr + '.json';
                            console.log("jsonPath: ", jsonPath);
                            return [4, GameManager.instance.loadCongigs(jsonPath)];
                        case 1:
                            data = _a.sent();
                            stGroup = [];
                            stGroup.push(level.toString());
                            ViewChangeManager.getInstance().showBufferLoadingView();
                            self = this;
                            ResUtil.getIntance().loadGroups(stGroup, function () {
                                if (self.currentGameScence) {
                                    self.currentGameScence.destroyAni();
                                    if (level > 2) {
                                        self.currentGameScence.destroy();
                                        var lastLevel = 0;
                                        if (level <= 24) {
                                            lastLevel = level - 1;
                                        }
                                        else {
                                            lastLevel = level;
                                        }
                                        ResUtil.getIntance().destoryGroup("" + lastLevel);
                                        Laya.Resource.destroyUnusedResources();
                                    }
                                    self.currentGameScence = null;
                                }
                                self.currentGameScence = new classKey(data);
                                self.currentGameScence.viewData_ = data;
                                self.currentGameScence.mapData = data;
                                SceneManager.getInstance().openSceneInstance(self.currentGameScence);
                                ViewChangeManager.getInstance().hideBufferLoadingView();
                            });
                            Laya.timer.once(2000, this, function () {
                                if (level < PlayerDataManager.getInstance().getLevelNumMakeOver()) {
                                    stGroup = [];
                                    var nNextLevel = level + 1;
                                    if (level >= 23) {
                                        nNextLevel = level + 2;
                                    }
                                    stGroup.push((nNextLevel).toString());
                                    ResUtil.getIntance().loadGroups(stGroup);
                                }
                            });
                            return [2];
                    }
                });
            });
        };
        return LevelManager;
    }());

    var Main = (function (_super) {
        __extends(Main, _super);
        function Main() {
            var _this = _super.call(this, { width: 1080, height: 1920, exportSceneToJson: true }) || this;
            _this.isFlage = false;
            GameConfig.init();
            var onShow = function (obj) {
                console.log("onShow...", obj);
                SoundManager.getInstance().playBgMusic();
                if (ViewChangeManager.bGameOpen) {
                    if (ViewChangeManager.getInstance().CurLevelBase) {
                        ViewChangeManager.getInstance().CurLevelBase.levelOnShow();
                    }
                }
            };
            var onHide = function () {
                console.log("onHide...");
                SoundManager.getInstance().pauseBgm();
                if (ViewChangeManager.getInstance().CurLevelBase) {
                    ViewChangeManager.getInstance().CurLevelBase.levelOnHide();
                }
            };
            var onAudioInterruptionBegin = function (res) {
                console.log("onAudioInterruptionBegin");
                SoundManager.getInstance().pauseBgm();
            };
            var onAudioInterruptionEnd = function (res) {
                console.log("onAudioInterruptionEnd");
                SoundManager.getInstance().playBgMusic();
            };
            if (DeviceUtil.isMiniGame()) {
                GameData.getInstance().enterGameInfo = platform.getLaunchOptionsSync();
                MiniManeger.instance.onShow(onShow);
                MiniManeger.instance.onHide(onHide);
                MiniManeger.instance.onAudioInterruptionBegin(onAudioInterruptionBegin);
                MiniManeger.instance.onAudioInterruptionEnd(onAudioInterruptionEnd);
                MiniManeger.instance.initMiniGame();
            }
            else {
                Laya.stage.on(Laya.Event.FOCUS, _this, function () {
                    console.log("获取焦点");
                    onShow(null);
                });
                Laya.stage.on(Laya.Event.BLUR, _this, function () {
                    console.log("失去焦点");
                    onHide();
                });
            }
            return _this;
        }
        Main.prototype.checkPlatform = function () {
            this.loadingView = new GamePreLoadingView();
            SceneManager.getInstance().openSceneInstance(this.loadingView);
            console.log("检验平台---");
            var self = this;
            if (window["loadingH5"]) {
                window["loadingH5"](100);
            }
            var resUrl = "./";
            if (DeviceUtil.isQQMiniGame()) {
                GameData.getInstance().gameId = "1044";
                resUrl = GameData.getInstance().qqMiniGameResUrl;
            }
            else if (DeviceUtil.isWXMiniGame()) {
                GameData.getInstance().gameId = "1043";
                Laya.timer.once(10000, this, function () {
                    console.log("加速回收---");
                    platform.triggerGC();
                });
                resUrl = GameData.getInstance().wxMiniGameResUrl;
            }
            else if (DeviceUtil.isTTMiniGame()) {
                resUrl = GameData.getInstance().ttMiniGameResUrl;
            }
            else {
                self.initDebug();
            }
            self.loadPreLoadRes(resUrl + "configs/infos.json?v=" + Math.random());
        };
        Main.prototype.loadPreLoadRes = function (resUrl) {
            return __awaiter(this, void 0, void 0, function () {
                return __generator(this, function (_a) {
                    this.initInfos(resUrl);
                    Laya.timer.once(5000, this, this.loadPreLoadRes, [resUrl]);
                    return [2];
                });
            });
        };
        Main.prototype.enableFileConfig = function () {
            Laya.timer.clearAll(this);
            if (this.isFlage) {
                return;
            }
            this.isFlage = true;
            console.log(BaseConst.infos);
            GameData.getInstance().initConfig(BaseConst.infos);
            MiniManeger.instance.showBannerAd();
            var resUrl = "";
            if (DeviceUtil.isWXMiniGame()) {
                resUrl = GameData.getInstance().wxMiniGameResUrl;
            }
            if (DeviceUtil.isQQMiniGame()) {
                resUrl = GameData.getInstance().qqMiniGameResUrl;
                MiniManeger.instance.initBoxAd();
            }
            if (DeviceUtil.isTTMiniGame()) {
                resUrl = ResUtil.getIntance().defaultOriginUrl = GameData.getInstance().ttMiniGameResUrl;
            }
            if (DeviceUtil.isMiniGame()) {
                ResUtil.getIntance().defaultOriginUrl = resUrl;
                ResUtil.getIntance().addVersionPrefix(resUrl);
            }
            this.loadFileConfig("fileconfig.json");
        };
        Main.prototype.platformLogin = function () {
            return __awaiter(this, void 0, void 0, function () {
                var res_1, enter, res_2;
                var _this = this;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            if (!(DeviceUtil.isQQMiniGame() || DeviceUtil.isWXMiniGame() || DeviceUtil.isTTMiniGame())) return [3, 8];
                            console.log("开始登录");
                            enter = function (isCreate) {
                                if (isCreate === void 0) { isCreate = false; }
                                return __awaiter(_this, void 0, void 0, function () {
                                    var isAuthorize, userinfo, obj, scene, userInfo;
                                    return __generator(this, function (_a) {
                                        switch (_a.label) {
                                            case 0:
                                                if (isCreate) {
                                                    return [2];
                                                }
                                                if (!(DeviceUtil.isWXMiniGame() || DeviceUtil.isQQMiniGame() || DeviceUtil.isTTMiniGame())) return [3, 9];
                                                if (!(BaseConst.infos.gameInfo.isDY && DeviceUtil.isWXMiniGame())) return [3, 4];
                                                return [4, platform.checkIsAuthorize()];
                                            case 1:
                                                isAuthorize = _a.sent();
                                                userinfo = null;
                                                if (!isAuthorize) return [3, 3];
                                                return [4, MiniManeger.instance.initUserTemp()];
                                            case 2:
                                                userinfo = _a.sent();
                                                _a.label = 3;
                                            case 3:
                                                if (userinfo == null) {
                                                    userinfo = { nickName: '', avatarUrl: '', gender: '' };
                                                }
                                                obj = GameData.getInstance().enterGameInfo;
                                                scene = obj.query.scene == undefined ? null : obj.query.scene;
                                                PlatformDY.getOpenidAndAuthorzia({
                                                    code: res_1, nickName: userinfo.nickName, avatarUrl: userinfo.avatarUrl, gender: userinfo.gender, scene: decodeURIComponent(scene)
                                                }).then(function (dyUser) {
                                                    GameData.getInstance().userInfo.openId = dyUser.openid;
                                                    GameData.getInstance().strOpenIDWx = dyUser.openid;
                                                    console.log("GameData.getInstance().strOpenIDWx = ", GameData.getInstance().strOpenIDWx);
                                                    var strOpenIdOther = GameData.getInstance().enterGameInfo.query["openid"];
                                                    console.log("strOpenIdOther = ", strOpenIdOther);
                                                    if (strOpenIdOther && strOpenIdOther != "") {
                                                        InviteManager.getInstance().judgeInvite();
                                                        console.log("createUserInfoButton 用户信息 : ", GameData.getInstance().userInfo);
                                                    }
                                                    if (BaseConst.infos.gameInfo.isDY) {
                                                        PlatformDY.refreshGameList();
                                                    }
                                                    PlayerDataManager.getInstance().GetData();
                                                });
                                                return [3, 9];
                                            case 4:
                                                console.log("登陆信息:", res_1);
                                                GameData.getInstance().userInfo.openId = res_1.openid;
                                                GameData.getInstance().userInfo.sessionKey = res_1.session_key;
                                                GameData.getInstance().strOpenIDWx = res_1.openid;
                                                console.log("GameData.getInstance().strOpenIDWx = ", GameData.getInstance().strOpenIDWx);
                                                console.log("用户信息 : ", GameData.getInstance().userInfo);
                                                if (!DeviceUtil.isTTMiniGame()) return [3, 6];
                                                return [4, platform.getUserInfo()];
                                            case 5:
                                                userInfo = _a.sent();
                                                console.log("getUserInfo:", userInfo);
                                                GameData.getInstance().userInfo.nick = userInfo.nickName;
                                                GameData.getInstance().userInfo.avatarUrl = userInfo.avatarUrl;
                                                console.log("授权用户信息 : ", GameData.getInstance().userInfo);
                                                return [3, 8];
                                            case 6: return [4, MiniManeger.instance.initUserTemp()];
                                            case 7:
                                                _a.sent();
                                                _a.label = 8;
                                            case 8:
                                                PlayerDataManager.getInstance().GetData();
                                                _a.label = 9;
                                            case 9: return [2];
                                        }
                                    });
                                });
                            };
                            if (!DeviceUtil.isTTMiniGame()) return [3, 2];
                            return [4, platform.login()];
                        case 1:
                            res_2 = _a.sent();
                            if (res_2) {
                                res_2 = JSON.parse(res_2);
                                console.log("登陆信息:", res_2);
                                GameData.getInstance().userInfo.openId = res_2.openid;
                                GameData.getInstance().userInfo.sessionKey = res_2.session_key;
                                console.log("用户信息 : ", GameData.getInstance().userInfo);
                            }
                            PlayerDataManager.getInstance().GetData();
                            return [3, 7];
                        case 2:
                            if (!(BaseConst.infos.gameInfo.isDY && DeviceUtil.isWXMiniGame())) return [3, 4];
                            return [4, platform.DYlogin()];
                        case 3:
                            res_1 = _a.sent();
                            return [3, 6];
                        case 4: return [4, platform.login()];
                        case 5:
                            res_1 = _a.sent();
                            res_1 = JSON.parse(res_1);
                            _a.label = 6;
                        case 6:
                            enter();
                            _a.label = 7;
                        case 7: return [3, 9];
                        case 8:
                            if (DeviceUtil.isOPPOMiniGame()) ;
                            else {
                                GameData.getInstance().userInfo.openId = GameData.getInstance().userInfo.sessionKey = DeviceUtil.getDeviceNo();
                                PlayerDataManager.getInstance().GetData();
                            }
                            _a.label = 9;
                        case 9: return [2];
                    }
                });
            });
        };
        Main.prototype.loadRes = function () {
            return __awaiter(this, void 0, void 0, function () {
                var resUrl, loadresUrl, group;
                var _this = this;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0: return [4, this.platformLogin()];
                        case 1:
                            _a.sent();
                            console.log("loadRes---");
                            console.log("加载预加载资源--");
                            resUrl = "";
                            if (!DeviceUtil.isNative()) return [3, 4];
                            return [4, ResUtil.getIntance().loadThms(resUrl + "resource/default.thm.json")];
                        case 2:
                            _a.sent();
                            return [4, ResUtil.getIntance().loadRESConfig(resUrl + "resource/default.res.json")];
                        case 3:
                            _a.sent();
                            return [3, 7];
                        case 4:
                            loadresUrl = resUrl;
                            return [4, ResUtil.getIntance().loadThms(loadresUrl + "resource/default.thm.json?v=" + Math.random())];
                        case 5:
                            _a.sent();
                            return [4, ResUtil.getIntance().loadRESConfig(loadresUrl + "resource/default.res.json?v=" + Math.random())];
                        case 6:
                            _a.sent();
                            _a.label = 7;
                        case 7:
                            if (DeviceUtil.isWXMiniGame() && !BaseConst.infos.gameInfo.isDY) {
                                Laya.loader.load(resUrl + "configs/wxmoregame.json?v=" + Math.random(), Laya.Handler.create(this, function (res) {
                                    if (typeof (res) == "string") {
                                        res = JSON.parse(res);
                                    }
                                    for (var i = 0, len = res.iconList.length; i < len; i++) {
                                        res.iconList[i].ad_img = "https://package.32yx.com/ecy_game_small/laya/girl/wx_res/moregame/" + res.iconList[i].ad_img;
                                    }
                                    GameData.getInstance().weCatMiniIconsInfo = res.iconList;
                                }));
                            }
                            else if (DeviceUtil.isTTMiniGame()) {
                                Laya.loader.load(resUrl + "configs/ttmoregame.json?v=" + Math.random(), Laya.Handler.create(this, function (res) {
                                    if (typeof (res) == "string") {
                                        res = JSON.parse(res);
                                    }
                                    for (var i = 0, len = res.iconList.length; i < len; i++) {
                                        res.iconList[i].ad_img = "https://package.32yx.com/ecy_game_small/laya/girl/tt/moregame/" + res.iconList[i].ad_img;
                                    }
                                    GameData.getInstance().weCatMiniIconsInfo = res.iconList;
                                }));
                            }
                            else {
                                Laya.loader.load(resUrl + "configs/wxmoregame.json?v=" + Math.random(), Laya.Handler.create(this, function (res) {
                                    if (typeof (res) == "string") {
                                        res = JSON.parse(res);
                                    }
                                    for (var i = 0, len = res.iconList.length; i < len; i++) {
                                        res.iconList[i].ad_img = "https://package.32yx.com/ecy_game_small/laya/girl/wx_res/moregame/" + res.iconList[i].ad_img;
                                    }
                                    GameData.getInstance().weCatMiniIconsInfo = res.iconList;
                                }));
                            }
                            group = ["panel", "common", "gamehome"];
                            group.push(PlayerDataManager.getInstance().getCurLevelToChallenge().toString());
                            ResUtil.getIntance().loadGroups(group, function () { return __awaiter(_this, void 0, void 0, function () {
                                return __generator(this, function (_a) {
                                    switch (_a.label) {
                                        case 0: return [4, ConfigManager.getInstance().initConfigInfo()];
                                        case 1:
                                            _a.sent();
                                            PlayerDataManager.getInstance().initGoods();
                                            PlayerDataManager.getInstance().refreshOffLinePS();
                                            ViewChangeManager.getInstance().rigestBufferLoadingView();
                                            if (!PlayerDataManager.getInstance().isNewPlayer) {
                                                GameStateManager.getInstance().levelState = EnterGameType.enum_EnterGameType_GameHome;
                                            }
                                            else {
                                                GameStateManager.getInstance().levelState = EnterGameType.enum_EnterGameType_ChooseLevel;
                                                PlayerDataManager.getInstance().SaveData();
                                            }
                                            PlayerDataManager.getInstance().setCurLevel(PlayerDataManager.getInstance().getLevelToChangeMaxLevel() - 1);
                                            LevelManager.getInstance().createLevelScene(PlayerDataManager.getInstance().getLevelToChangeMaxLevel());
                                            ViewChangeManager.getInstance().showCommonView();
                                            ViewChangeManager.bGameOpen = true;
                                            this.onPlayMusic();
                                            ResUtil.getIntance().loadGroups(['success', 'game']);
                                            return [2];
                                    }
                                });
                            }); }, function (cur, total) {
                                _this.loadingView.progress(cur, total);
                            });
                            return [2];
                    }
                });
            });
        };
        Main.prototype.onPlayMusic = function () {
            SoundManager.getInstance().bgm = 'bg';
            Laya.stage.off(Laya.Event.CLICK, this, this.onPlayMusic);
        };
        return Main;
    }(BaseContent));
    new Main();

}());

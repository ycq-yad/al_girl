{
  "code": "import * as tslib_1 from \"tslib\";\r\nimport GameConfig from \"./GameConfig\";\r\nimport { Als_GameData } from \"./script/common/GameData\";\r\nimport GamePreLoadingView_Als from \"./script/loading/GamePreLoadingView\";\r\nimport Als_SoundManager from \"./script/common/SoundManager\";\r\nimport ViewChangeManager_Als from \"./script/games/ViewChangeManager\";\r\nimport { MiniManeger_Als } from \"./script/minigame/MiniManeger\";\r\nimport GameCenterManager_Als from \"./script/manager/GameCenterManager\";\r\nvar Main = (function (_super) {\r\n    tslib_1.__extends(Main, _super);\r\n    function Main() {\r\n        var _this = _super.call(this, { width: 1080, height: 1920, exportSceneToJson: true }) || this;\r\n        _this.isFlage = false;\r\n        GameConfig.init();\r\n        var onShow = function (obj) {\r\n            console.log(\"onShow...\", obj);\r\n            Als_SoundManager.getInstance().playBgMusic();\r\n            if (ViewChangeManager_Als.bGameOpen) {\r\n                if (ViewChangeManager_Als.getInstance().CurLevelBase) {\r\n                    ViewChangeManager_Als.getInstance().CurLevelBase.levelOnShow();\r\n                }\r\n            }\r\n        };\r\n        var onHide = function () {\r\n            console.log(\"onHide...\");\r\n            Als_SoundManager.getInstance().pauseBgm();\r\n            if (ViewChangeManager_Als.getInstance().CurLevelBase) {\r\n                ViewChangeManager_Als.getInstance().CurLevelBase.levelOnHide();\r\n            }\r\n        };\r\n        var onAudioInterruptionBegin = function (res) {\r\n            console.log(\"onAudioInterruptionBegin\");\r\n            Als_SoundManager.getInstance().pauseBgm();\r\n        };\r\n        var onAudioInterruptionEnd = function (res) {\r\n            console.log(\"onAudioInterruptionEnd\");\r\n            Als_SoundManager.getInstance().playBgMusic();\r\n        };\r\n        if (DeviceUtil.isMiniGame()) {\r\n            Als_GameData.getInstance().enterGameInfo = platform.getLaunchOptionsSync();\r\n            MiniManeger_Als.instance.onShow(onShow);\r\n            MiniManeger_Als.instance.onHide(onHide);\r\n            MiniManeger_Als.instance.onAudioInterruptionBegin(onAudioInterruptionBegin);\r\n            MiniManeger_Als.instance.onAudioInterruptionEnd(onAudioInterruptionEnd);\r\n            MiniManeger_Als.instance.initMiniGame();\r\n        }\r\n        else {\r\n            Laya.stage.on(Laya.Event.FOCUS, _this, function () {\r\n                console.log(\"获取焦点\");\r\n                onShow(null);\r\n            });\r\n            Laya.stage.on(Laya.Event.BLUR, _this, function () {\r\n                console.log(\"失去焦点\");\r\n                onHide();\r\n            });\r\n        }\r\n        return _this;\r\n    }\r\n    Main.prototype.checkPlatform = function () {\r\n        GameCenterManager_Als.getInstance().pLoadingView = new GamePreLoadingView_Als();\r\n        SceneManager.getInstance().openSceneInstance(GameCenterManager_Als.getInstance().pLoadingView);\r\n        console.log(\"检验平台---\");\r\n        var self = this;\r\n        if (window[\"loadingH5\"]) {\r\n            window[\"loadingH5\"](100);\r\n        }\r\n        var resUrl = \"./\";\r\n        if (DeviceUtil.isQQMiniGame()) {\r\n            Als_GameData.getInstance().gameId = \"1044\";\r\n            resUrl = Als_GameData.getInstance().perFixUrl + \"/qq_res/qq_res_v_z_3_7/\";\r\n        }\r\n        else if (DeviceUtil.isWXMiniGame()) {\r\n            Als_GameData.getInstance().gameId = \"1043\";\r\n            resUrl = Als_GameData.getInstance().perFixUrl + \"/wx_res/wx_res_v_z_5_6/\";\r\n        }\r\n        else if (DeviceUtil.isTTMiniGame()) {\r\n            resUrl = Als_GameData.getInstance().perFixUrl + \"/tt/tt_res_v_z_3_4/\";\r\n        }\r\n        else {\r\n            self.initDebug();\r\n        }\r\n        if (DeviceUtil.isMiniGame()) {\r\n            if (!DeviceUtil.isVIVOMiniGame()) {\r\n                Laya.timer.loop(10000, window, function () {\r\n                    console.log(\"tt加速回收---\");\r\n                    platform.triggerGC();\r\n                });\r\n            }\r\n            ResUtil.getIntance().defaultOriginUrl = resUrl;\r\n            ResUtil.getIntance().addVersionPrefix(resUrl);\r\n        }\r\n        self.loadPreLoadRes(resUrl + \"configs/infos.json?v=\" + Math.random());\r\n    };\r\n    Main.prototype.loadPreLoadRes = function (resUrl) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n            return tslib_1.__generator(this, function (_a) {\r\n                this.initInfos(resUrl);\r\n                Laya.timer.once(5000, this, this.loadPreLoadRes, [resUrl]);\r\n                return [2];\r\n            });\r\n        });\r\n    };\r\n    Main.prototype.enableFileConfig = function () {\r\n        Laya.timer.clearAll(this);\r\n        if (this.isFlage) {\r\n            return;\r\n        }\r\n        this.isFlage = true;\r\n        console.log(BaseConst.infos);\r\n        Als_GameData.getInstance().initConfig(BaseConst.infos);\r\n        MiniManeger_Als.instance.showBannerAd();\r\n        var resUrl = \"\";\r\n        if (DeviceUtil.isQQMiniGame()) {\r\n            MiniManeger_Als.instance.initBoxAd();\r\n        }\r\n        this.loadFileConfig(\"fileconfig.json\");\r\n        MiniManeger_Als.instance.checkCityInfo();\r\n    };\r\n    Main.prototype.loadRes = function () {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n            return tslib_1.__generator(this, function (_a) {\r\n                GameCenterManager_Als.getInstance().loadRes_Als();\r\n                return [2];\r\n            });\r\n        });\r\n    };\r\n    return Main;\r\n}(BaseContent));\r\nnew Main();\r\n",
  "references": [
    "E:/laya/project/laya_girl_ts_wecat/src/GameConfig.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/common/GameData.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/loading/GamePreLoadingView.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/common/SoundManager.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/manager/LevelManager.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/games/GameStateManager.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/games/CommonDefine.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/common/GameDataManager.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/games/ConfigManager.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/games/ViewChangeManager.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/minigame/MiniManeger.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/manager/InviteManager.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/PlatformDY.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/manager/GameCenterManager.ts"
  ]
}

{
  "code": "import CommonView_Als from \"../views/game/CommonView\";\r\nimport GameStateManager_Als from \"./GameStateManager\";\r\nimport { PlayerDataManager_Als } from \"../common/GameDataManager\";\r\nimport { EnterGameType } from \"./CommonDefine\";\r\nimport { LevelManager_Als } from \"../manager/LevelManager\";\r\nimport GameBufferLoading_Als from \"../loading/GameBufferLoading\";\r\nimport { MiniManeger_Als } from \"../minigame/MiniManeger\";\r\nimport PlatformDY from \"../../PlatformDY\";\r\nimport { Als_GameData } from \"../common/GameData\";\r\nimport MoreGameView_Als from \"../views/game/moregame/MoreGameView\";\r\nimport WeCatMoreGameView_Als from \"../views/game/WeCatMoreGameView\";\r\nimport MoreGameOperRequest_Als from \"../views/game/MoreGameOperRequest\";\r\nvar ViewChangeManager_Als = (function () {\r\n    function ViewChangeManager_Als() {\r\n        this.image_exit = null;\r\n        EventMgr.getInstance().addEvent(\"onRemove\", this, this.onRemove);\r\n    }\r\n    ViewChangeManager_Als.getInstance = function () {\r\n        if (!ViewChangeManager_Als.instance) {\r\n            ViewChangeManager_Als.instance = new ViewChangeManager_Als();\r\n        }\r\n        return ViewChangeManager_Als.instance;\r\n    };\r\n    ViewChangeManager_Als.prototype.onRemove = function () {\r\n        if (DeviceUtil.isQQMiniGame() && BaseConst.infos.gameInfo.openPsAward == 1) {\r\n            MiniManeger_Als.instance.showInsertAd({});\r\n        }\r\n    };\r\n    Object.defineProperty(ViewChangeManager_Als.prototype, \"CommonView\", {\r\n        get: function () {\r\n            if (!this.pCommonView) {\r\n                this.pCommonView = new CommonView_Als();\r\n                this.pCommonView.x = 0;\r\n                this.pCommonView.y = 0;\r\n            }\r\n            return this.pCommonView;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewChangeManager_Als.prototype, \"CurLevelBase\", {\r\n        get: function () {\r\n            return this.pCurLevelBase;\r\n        },\r\n        set: function (pCurLevelBase) {\r\n            this.pCurLevelBase = pCurLevelBase;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ViewChangeManager_Als.prototype.showCommonView = function () {\r\n        Laya.stage.addChild(this.CommonView);\r\n    };\r\n    ViewChangeManager_Als.prototype.hideCommonView = function () {\r\n        this.CommonView.parent && Laya.stage.removeChild(this.CommonView);\r\n    };\r\n    ViewChangeManager_Als.prototype.gotoLevel = function (nCurLevel) {\r\n        PlayerDataManager_Als.getInstance().setCurLevel(nCurLevel - 1);\r\n        GameStateManager_Als.getInstance().levelState = EnterGameType.enum_EnterGameType_ChooseLevel;\r\n        LevelManager_Als.getInstance().createLevelScene(nCurLevel);\r\n    };\r\n    ViewChangeManager_Als.prototype.goToNextLevel = function () {\r\n        MiniManeger_Als.instance.StopVideo();\r\n        this.pCurLevelBase.closeGameView();\r\n        GameStateManager_Als.getInstance().levelState = EnterGameType.enum_EnterGameType_Next;\r\n        PlayerDataManager_Als.getInstance().addLevel();\r\n        LevelManager_Als.getInstance().createLevelScene(PlayerDataManager_Als.getInstance().getCurLevelToChallenge());\r\n    };\r\n    ViewChangeManager_Als.prototype.restartGame = function (bAll) {\r\n        if (bAll === void 0) { bAll = true; }\r\n        GameStateManager_Als.getInstance().levelState = EnterGameType.enum_EnterGameType_ReStart;\r\n        this.pCurLevelBase.restartGame(bAll);\r\n    };\r\n    ViewChangeManager_Als.prototype.rigestBufferLoadingView = function () {\r\n        BufferLoadingManger.getInstance().registerOneBuffer(\"gamebuffer\", new GameBufferLoading_Als());\r\n    };\r\n    ViewChangeManager_Als.prototype.showBufferLoadingView = function () {\r\n        BufferLoadingManger.getInstance().showBuffer(\"gamebuffer\");\r\n        Laya.timer.clear(this, this.hideBufferLoadingView);\r\n        Laya.timer.once(30000, this, this.hideBufferLoadingView);\r\n    };\r\n    ViewChangeManager_Als.prototype.hideBufferLoadingView = function () {\r\n        Laya.timer.clear(this, this.hideBufferLoadingView);\r\n        BufferLoadingManger.getInstance().hiddBuffer(\"gamebuffer\");\r\n    };\r\n    ViewChangeManager_Als.prototype.startGame = function () {\r\n        if (!BaseConst.infos.gameInfo.isDY) {\r\n            return;\r\n        }\r\n        if (!DeviceUtil.isWXMiniGame() && !DeviceUtil.isQQMiniGame() && !DeviceUtil.isTTMiniGame())\r\n            return;\r\n        PlatformDY.startGame();\r\n    };\r\n    ViewChangeManager_Als.prototype.endGame = function () {\r\n        if (!BaseConst.infos.gameInfo.isDY) {\r\n            return;\r\n        }\r\n        if (!DeviceUtil.isWXMiniGame() && !DeviceUtil.isQQMiniGame() && !DeviceUtil.isTTMiniGame())\r\n            return;\r\n        PlatformDY.endGame({ id: PlatformDY.nGameID, level: PlayerDataManager_Als.getInstance().getCurLevelToChallenge() });\r\n    };\r\n    ViewChangeManager_Als.prototype.showImageExit = function () {\r\n        if (!DeviceUtil.isWXMiniGame()) {\r\n            return;\r\n        }\r\n        if (PlayerDataManager_Als.getInstance().stOperData0807.bSpecial == false) {\r\n            console.log(\"GameDataMgr.getInstance().enterGameInfo\", Als_GameData.getInstance().enterGameInfo);\r\n            if (Als_GameData.getInstance().enterGameInfo == {}) {\r\n                return;\r\n            }\r\n            if (!Als_GameData.getInstance().enterGameInfo.referrerInfo.appId) {\r\n                return;\r\n            }\r\n            if (\"wxcff7381e631cf54e\" == Als_GameData.getInstance().enterGameInfo.referrerInfo.appId) {\r\n                return;\r\n            }\r\n        }\r\n        PlayerDataManager_Als.getInstance().stOperData0807.bSpecial = true;\r\n        if (this.image_exit) {\r\n            return;\r\n        }\r\n        this.image_exit = new Laya.Image();\r\n        this.image_exit.skin = \"resource/assets/img/wecat/button.png\";\r\n        this.image_exit.right = 23;\r\n        this.image_exit.top = 220;\r\n        Laya.stage.addChild(this.image_exit);\r\n        this.image_exit.on(Laya.Event.CLICK, this, this.onImageExit);\r\n        PlayerDataManager_Als.getInstance().SaveData();\r\n    };\r\n    ViewChangeManager_Als.prototype.onImageExit = function () {\r\n        MoreGameView_Als.bSpeical = true;\r\n        ViewManager.getInstance().showView(MoreGameView_Als);\r\n    };\r\n    ViewChangeManager_Als.prototype.showImageExitTemp = function () {\r\n        if (this.image_exit) {\r\n            this.image_exit.visible = true;\r\n        }\r\n    };\r\n    ViewChangeManager_Als.prototype.hideImageExitTemp = function () {\r\n        if (this.image_exit) {\r\n            this.image_exit.visible = false;\r\n        }\r\n    };\r\n    ViewChangeManager_Als.prototype.restartEnterGameHome = function () {\r\n        if (!DeviceUtil.isWXMiniGame()) {\r\n            return;\r\n        }\r\n        if (PlayerDataManager_Als.getInstance().bIsNewPlayer) {\r\n            PlayerDataManager_Als.bGlobEnterGame = false;\r\n            return;\r\n        }\r\n        if (BaseConst.infos.gameInfo.openPsAward == 0) {\r\n            PlayerDataManager_Als.bGlobEnterGame = false;\r\n            return;\r\n        }\r\n        PlayerDataManager_Als.bGlobEnterGame = true;\r\n        WeCatMoreGameView_Als.nEnterCount = 0;\r\n        ViewManager.getInstance().showView(MoreGameOperRequest_Als);\r\n        this.hideCommonView();\r\n    };\r\n    ViewChangeManager_Als.prototype.enterGameHomeNotNewPlayer = function () {\r\n        if (!PlayerDataManager_Als.bGlobEnterGame || PlayerDataManager_Als.getInstance().bIsNewPlayer) {\r\n            return;\r\n        }\r\n        ViewManager.getInstance().showView(MoreGameOperRequest_Als);\r\n        this.hideCommonView();\r\n    };\r\n    ViewChangeManager_Als.bGameOpen = false;\r\n    return ViewChangeManager_Als;\r\n}());\r\nexport default ViewChangeManager_Als;\r\n",
  "references": [
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/game/level/LevelBase.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/game/CommonView.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/games/GameStateManager.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/common/GameDataManager.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/games/CommonDefine.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/manager/LevelManager.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/loading/GameBufferLoading.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/minigame/MiniManeger.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/PlatformDY.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/common/GameData.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/game/moregame/MoreGameView.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/game/WeCatMoreGameView.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/game/MoreGameOperRequest.ts"
  ]
}

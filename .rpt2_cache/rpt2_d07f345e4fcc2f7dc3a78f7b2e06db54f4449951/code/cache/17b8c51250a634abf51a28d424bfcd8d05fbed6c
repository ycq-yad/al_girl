{
  "code": "import * as tslib_1 from \"tslib\";\r\nimport GameEvent_Als from \"../../games/GameEvent\";\r\nimport { PlayerDataManager_Als } from \"../../common/GameDataManager\";\r\nimport ConfigManager_Als from \"../../games/ConfigManager\";\r\nimport Als_SoundManager from \"../../common/SoundManager\";\r\nimport ViewChangeManager_Als from \"../../games/ViewChangeManager\";\r\nimport AddPsView_Als from \"./Als_PopView/AddPsView\";\r\nvar CommonView_Als = (function (_super) {\r\n    tslib_1.__extends(CommonView_Als, _super);\r\n    function CommonView_Als() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className_key = \"CommonView\";\r\n        _this.skin = \"game/uiView/CommonView.json\";\r\n        _this.width = 600;\r\n        _this.height = 200;\r\n        return _this;\r\n    }\r\n    CommonView_Als.prototype.onAddStage = function () {\r\n        if (!this.isCreate) {\r\n            return;\r\n        }\r\n        this.refspv_als();\r\n        this.refGlVa_Als();\r\n        this.refreshTV_Als();\r\n        this.aEvUpVi_als();\r\n        this.refreshPsLiLe_als();\r\n    };\r\n    CommonView_Als.prototype.onRemoved = function () {\r\n        this.revEnUpVi_als();\r\n    };\r\n    CommonView_Als.prototype.rmobtev_alt = function () {\r\n        this.imageBtAttSp.visible = false;\r\n        this.sp && this.sp.off(Laya.Event.CLICK, this, this.openadps_als);\r\n    };\r\n    CommonView_Als.prototype.aEvUpVi_als = function () {\r\n        this.sp.on(Laya.Event.CLICK, this, this.openadps_als);\r\n        EventMgr.getInstance().addEvent(GameEvent_Als.ON_PS_CHANGE, this, this.refspv_als);\r\n        EventMgr.getInstance().addEvent(GameEvent_Als.ON_GLOD_CHANGE, this, this.refGlVa_Als);\r\n        EventMgr.getInstance().addEvent(GameEvent_Als.ON_SP_UPDOWN_TIME, this, this.refreshTiLaIn_als);\r\n        EventMgr.getInstance().addEvent(GameEvent_Als.PS_LIMITLESS, this, this.refreshPsLiLe_als);\r\n    };\r\n    CommonView_Als.prototype.abte_alt = function () {\r\n        this.imageBtAttSp.visible = true;\r\n        this.sp && this.sp.on(Laya.Event.CLICK, this, this.openadps_als);\r\n    };\r\n    CommonView_Als.prototype.revEnUpVi_als = function () {\r\n        this.sp.off(Laya.Event.CLICK, this, this.openadps_als);\r\n        EventMgr.getInstance().removeEvent(GameEvent_Als.ON_PS_CHANGE, this, this.refspv_als);\r\n        EventMgr.getInstance().removeEvent(GameEvent_Als.ON_GLOD_CHANGE, this, this.refGlVa_Als);\r\n        EventMgr.getInstance().removeEvent(GameEvent_Als.ON_SP_UPDOWN_TIME, this, this.refreshTiLaIn_als);\r\n        EventMgr.getInstance().removeEvent(GameEvent_Als.PS_LIMITLESS, this, this.refreshPsLiLe_als);\r\n    };\r\n    CommonView_Als.prototype.refspv_als = function () {\r\n        if (!this.isCreate) {\r\n            return;\r\n        }\r\n        if (PlayerDataManager_Als.getInstance().isPsLimitlessState()) {\r\n            return;\r\n        }\r\n        BitmapLabelUtils.setLabel(this.spNum, PlayerDataManager_Als.getInstance().stPlayerDataBase.nPS.toString(), \"resource/assets/img/ui/gamehome/maininterface_number1/maininterface_number1_\", 0, \".png\", \"center\");\r\n        this.refreshTV_Als();\r\n    };\r\n    CommonView_Als.prototype.openadps_als = function () {\r\n        var _this = this;\r\n        Als_SoundManager.getInstance().playEffect(\"button\", 1);\r\n        ViewChangeManager_Als.getInstance().showBufferLoadingView();\r\n        ResUtil.getIntance().loadGroups([\"adsp\"], function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {\r\n            return tslib_1.__generator(this, function (_a) {\r\n                ViewManager.getInstance().showView(AddPsView_Als);\r\n                ViewChangeManager_Als.getInstance().hideBufferLoadingView();\r\n                return [2];\r\n            });\r\n        }); });\r\n    };\r\n    CommonView_Als.prototype.refreshTV_Als = function () {\r\n        if (PlayerDataManager_Als.getInstance().isPsLimitlessState()) {\r\n            return;\r\n        }\r\n        var nSpTimeMax = 5;\r\n        var stGameData = ConfigManager_Als.getInstance().getGameConfigDataByID(1);\r\n        if (stGameData) {\r\n            nSpTimeMax = parseInt(stGameData.strValue);\r\n        }\r\n        if (nSpTimeMax <= PlayerDataManager_Als.getInstance().stPlayerDataBase.nPS) {\r\n            this.imageSpFull.visible = true;\r\n            this.stLableTime.visible = false;\r\n            this.stLableTime.text = \"\";\r\n        }\r\n        else {\r\n            this.imageSpFull.visible = false;\r\n            this.stLableTime.visible = true;\r\n        }\r\n    };\r\n    CommonView_Als.prototype.refGlVa_Als = function () {\r\n        if (!this.isCreate) {\r\n            return;\r\n        }\r\n        BitmapLabelUtils.setLabel(this.glodNum, PlayerDataManager_Als.getInstance().stPlayerDataBase.nGlodCount.toString(), \"resource/assets/img/common/level_number1/level_number1_\", 0, \".png\", \"left\");\r\n    };\r\n    CommonView_Als.prototype.refreshPsLiLe_als = function () {\r\n        if (!PlayerDataManager_Als.getInstance().isPsLimitlessState()) {\r\n            return;\r\n        }\r\n        this.stLableTime.visible = false;\r\n        this.spNum.visible = false;\r\n        this.imageSpFull.visible = true;\r\n        this.imageSpFull.skin = \"resource/assets/img/ui/gamehome/maininterface_word_3.png\";\r\n        this.sp.skin = \"resource/assets/img/ui/gamehome/maininterface_baseboard_1_2.png\";\r\n    };\r\n    CommonView_Als.prototype.refreshTiLaIn_als = function () {\r\n        if (PlayerDataManager_Als.getInstance().isPsLimitlessState()) {\r\n            return;\r\n        }\r\n        this.imageSpFull.visible = false;\r\n        this.stLableTime.visible = true;\r\n        this.stLableTime.text = PlayerDataManager_Als.getInstance().getSpLastTime();\r\n    };\r\n    return CommonView_Als;\r\n}(BaseSceneUISkin));\r\nexport default CommonView_Als;\r\n",
  "references": [
    "E:/laya/project/laya_girl_ts_wecat/src/script/games/GameEvent.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/common/GameDataManager.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/games/ConfigManager.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/common/SoundManager.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/games/ViewChangeManager.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/game/Als_PopView/AddPsView.ts"
  ]
}

{
  "code": "import * as tslib_1 from \"tslib\";\r\nimport ViewChangeManager_Als from \"../../../../games/ViewChangeManager\";\r\nimport GameStateManager_Als from \"../../../../games/GameStateManager\";\r\nimport { EnterGameType, GoodsType } from \"../../../../games/CommonDefine\";\r\nimport { PlayerDataManager_Als } from \"../../../../common/GameDataManager\";\r\nimport ConfigManager_Als from \"../../../../games/ConfigManager\";\r\nimport Als_SoundManager from \"../../../../common/SoundManager\";\r\nimport { MiniManeger_Als } from \"../../../../minigame/MiniManeger\";\r\nimport AnimationManager_Als from \"../../../../manager/AnimationManager\";\r\nimport GameEvent_Als from \"../../../../games/GameEvent\";\r\nimport MiniEventConst_Als from \"../../../../minigame/MiniEventConst\";\r\nimport MoreGameOperRequestTwo_Als from \"../../MoreGameOperRequestTwo\";\r\nimport MoreGameOperRequest_Als from \"../../MoreGameOperRequest\";\r\nimport { LotterySelScene } from \"../../lottery/LotterySelScene\";\r\nimport { PopBaseScene } from \"../../../base/PopBaseScene\";\r\nimport GameCenterManager_Als from \"../../../../manager/GameCenterManager\";\r\nvar FailEntryTwoView_Als = (function (_super) {\r\n    tslib_1.__extends(FailEntryTwoView_Als, _super);\r\n    function FailEntryTwoView_Als() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className_key = \"FailEntryTwoView_Als\";\r\n        _this.showEnterType = BasePopAnimationEnterType.SCALE_MODE_BACK;\r\n        _this.nBtNextLevel = 300;\r\n        _this.nBtNextLevelSp = 100;\r\n        _this.nGlodAddByWathcVideo = 200;\r\n        _this.bIsRunning = false;\r\n        _this.bRecvAward = false;\r\n        _this.bShareAward = false;\r\n        _this.bOpneBox2 = false;\r\n        _this.skin = 'game/uiView/FailEntryTwoView.json';\r\n        return _this;\r\n    }\r\n    FailEntryTwoView_Als.prototype.childrenCreated = function () {\r\n        _super.prototype.childrenCreated.call(this);\r\n        this.grp_center.width = this.width;\r\n        this.grp_center.height = this.height;\r\n        this.bOpneBox2 = false;\r\n    };\r\n    FailEntryTwoView_Als.prototype.initMiniGame = function () {\r\n        if (DeviceUtil.isQQMiniGame() && BaseConst.infos.gameInfo.openPsAward == 1) {\r\n            if (this.selLotteryScene == null) {\r\n                this.selLotteryScene = new LotterySelScene(null);\r\n            }\r\n            this.box_content.visible = true;\r\n            this.box_content.addChild(this.selLotteryScene);\r\n            MiniManeger_Als.instance.showBoxAd();\r\n        }\r\n    };\r\n    FailEntryTwoView_Als.prototype.onRemoved = function () {\r\n        _super.prototype.onRemoved.call(this);\r\n        this.removeEvent();\r\n        this.bIsRunning = false;\r\n        this.bRecvAward = false;\r\n        Laya.Tween.clearAll(this.imageBtShare);\r\n        Laya.timer.clearAll(this);\r\n        EventMgr.getInstance().removeEvent(GameEvent_Als.EVENT_FLAY_GLOD, this, this.flayGFS_Als);\r\n    };\r\n    FailEntryTwoView_Als.prototype.onClick = function (evt) {\r\n        switch (evt.currentTarget) {\r\n            case this.imageBtRestart:\r\n                this.failEntryTReSG_Als();\r\n                break;\r\n            case this.imageBtToHome:\r\n                this.returnTGH_Als();\r\n                break;\r\n            case this.imageBtShare:\r\n                this.failSG_Als();\r\n                break;\r\n            case this.imageRecv:\r\n                this.onWVRA_Als();\r\n                break;\r\n        }\r\n    };\r\n    FailEntryTwoView_Als.prototype.shareDouYin = function () {\r\n        var self = this;\r\n        MiniManeger_Als.instance.bFlagDouYin = true;\r\n        MiniManeger_Als.instance.shareAppMessage({\r\n            sucFun: function () {\r\n                console.log(\"发布录制视频成功\");\r\n                self.addEvent();\r\n                self.bShareAward = true;\r\n                TipsManager.getInstance().showDefaultTips('分享成功');\r\n                if (MiniManeger_Als.instance.onShareVideoSuccess) {\r\n                    return;\r\n                }\r\n                var nGlodCount = 50;\r\n                var stGameConfig = ConfigManager_Als.getInstance().getGameConfigDataByID(18);\r\n                if (stGameConfig) {\r\n                    nGlodCount = parseInt(stGameConfig.strValue);\r\n                }\r\n                PlayerDataManager_Als.getInstance().AddGoods(GoodsType.enum_GoodsType_Glod, nGlodCount);\r\n                MiniManeger_Als.instance.onShareVideoSuccess = true;\r\n                Laya.timer.once(1000, self, function () {\r\n                    self.flayGFS_Als();\r\n                });\r\n            },\r\n            failFun: function () {\r\n                self.addEvent();\r\n                console.log(\"发布录制视频失败\");\r\n                TipsManager.getInstance().showDefaultTips('分享失败');\r\n            }\r\n        });\r\n    };\r\n    FailEntryTwoView_Als.prototype.addEvent = function () {\r\n        this.registerEvent(this.imageBtRestart, Laya.Event.CLICK, this.onClick, this);\r\n        this.registerEvent(this.imageBtToHome, Laya.Event.CLICK, this.onClick, this);\r\n        this.registerEvent(this.imageBtShare, Laya.Event.CLICK, this.onClick, this);\r\n        this.registerEvent(this.imageRecv, Laya.Event.CLICK, this.onClick, this);\r\n    };\r\n    FailEntryTwoView_Als.prototype.shareTT = function () {\r\n        var self = this;\r\n        MiniManeger_Als.instance.onShareVideo({\r\n            successFun: function () {\r\n                console.log(\"发布录制视频成功\");\r\n                self.addEvent();\r\n                self.bShareAward = true;\r\n                if (MiniManeger_Als.instance.onShareVideoSuccess) {\r\n                    return;\r\n                }\r\n                var nGlodCount = 50;\r\n                var stGameConfig = ConfigManager_Als.getInstance().getGameConfigDataByID(18);\r\n                if (stGameConfig) {\r\n                    nGlodCount = parseInt(stGameConfig.strValue);\r\n                }\r\n                PlayerDataManager_Als.getInstance().AddGoods(GoodsType.enum_GoodsType_Glod, nGlodCount);\r\n                MiniManeger_Als.instance.onShareVideoSuccess = true;\r\n                self.flayGFS_Als();\r\n            },\r\n            failFun: function () {\r\n                console.log(\"发布录制视频失败\");\r\n                self.addEvent();\r\n            }\r\n        });\r\n    };\r\n    FailEntryTwoView_Als.prototype.failSG_Als = function () {\r\n        MiniManeger_Als.instance.reportMonitorSome(MiniEventConst_Als.GAMEOVER_SHARE, 1);\r\n        Als_SoundManager.getInstance().playEffect(\"button\", 1);\r\n        var self = this;\r\n        if (DeviceUtil.isTTMiniGame()) {\r\n            if (this.bShareAward) {\r\n                TipsManager.getInstance().showDefaultTips(\"已经领过奖励了哦\");\r\n                return;\r\n            }\r\n            this.removeEvent();\r\n            var info = platform.getSystemInfoSync();\r\n            if (info.appName.toUpperCase() == 'DOUYIN') {\r\n                this.shareDouYin();\r\n            }\r\n            else {\r\n                this.shareTT();\r\n            }\r\n        }\r\n        else {\r\n            if (DeviceUtil.isWXMiniGame() && BaseConst.infos.gameInfo.isDY) {\r\n                this.shareWeCat();\r\n            }\r\n            else {\r\n                MiniManeger_Als.instance.shareAppMessage();\r\n            }\r\n        }\r\n    };\r\n    FailEntryTwoView_Als.prototype.shareWeCat = function () {\r\n        MiniManeger_Als.instance.shareAppMessage({\r\n            sucFun: function () {\r\n                ViewManager.getInstance().showView(MoreGameOperRequestTwo_Als);\r\n            },\r\n            failFun: function () {\r\n                ViewManager.getInstance().showView(MoreGameOperRequestTwo_Als);\r\n            }\r\n        });\r\n    };\r\n    FailEntryTwoView_Als.prototype.failEntry_end_Als = function () {\r\n        var nSpCost = 1;\r\n        var stGameConfig = ConfigManager_Als.getInstance().getGameConfigDataByID(8);\r\n        if (stGameConfig) {\r\n            nSpCost = parseInt(stGameConfig.strValue);\r\n        }\r\n        if (MiniManeger_Als.instance.isWxMiniGameForOperReq()) {\r\n            MoreGameOperRequest_Als.bReStartGame = true;\r\n            MoreGameOperRequest_Als.bEnterHotBox = true;\r\n            ViewManager.getInstance().showView(MoreGameOperRequest_Als);\r\n        }\r\n        else {\r\n            PlayerDataManager_Als.getInstance().subGoods(GoodsType.enum_GoodsType_Sp, nSpCost);\r\n            ViewChangeManager_Als.getInstance().restartGame(true);\r\n        }\r\n        MiniManeger_Als.instance.bFlagSpecialView = true;\r\n        this.removeSelf();\r\n    };\r\n    FailEntryTwoView_Als.prototype.returnTGH_Als = function () {\r\n        Als_SoundManager.getInstance().playEffect(\"button\", 1);\r\n        if (BaseConst.infos.gameInfo.isDY) {\r\n            if (PlayerDataManager_Als.getInstance().bIsNewPlayer || BaseConst.infos.gameInfo.openPsAward == 0 ||\r\n                BaseConst.infos.gameInfo.glodegg == 0) {\r\n                MoreGameOperRequestTwo_Als.toHome = true;\r\n                ViewManager.getInstance().showView(MoreGameOperRequestTwo_Als);\r\n            }\r\n            else {\r\n                GameStateManager_Als.getInstance().levelState = EnterGameType.enum_EnterGameType_GameHome;\r\n                ViewChangeManager_Als.getInstance().CurLevelBase.returnToGameHome();\r\n            }\r\n        }\r\n        else {\r\n            GameStateManager_Als.getInstance().levelState = EnterGameType.enum_EnterGameType_GameHome;\r\n            ViewChangeManager_Als.getInstance().CurLevelBase.returnToGameHome();\r\n        }\r\n        MiniManeger_Als.instance.bFlagSpecialView = true;\r\n        this.removeSelf();\r\n    };\r\n    FailEntryTwoView_Als.prototype.failEntryTReSG_Als = function () {\r\n        MiniManeger_Als.instance.reportMonitorSome(MiniEventConst_Als.GAMEOVER_AGIN, 1);\r\n        Als_SoundManager.getInstance().playEffect(\"button\", 1);\r\n        var nSpCost = 1;\r\n        var stGameConfig = ConfigManager_Als.getInstance().getGameConfigDataByID(8);\r\n        if (stGameConfig) {\r\n            nSpCost = parseInt(stGameConfig.strValue);\r\n        }\r\n        var b = PlayerDataManager_Als.getInstance().CheckGoods(GoodsType.enum_GoodsType_Sp, nSpCost);\r\n        if (!b) {\r\n            GameCenterManager_Als.getInstance().oppenAddSpView();\r\n            return;\r\n        }\r\n        this.failEntry_end_Als();\r\n    };\r\n    FailEntryTwoView_Als.prototype.refreshUIData = function () {\r\n        var stGameConfig = ConfigManager_Als.getInstance().getGameConfigDataByID(7);\r\n        if (stGameConfig) {\r\n            this.nGlodAddByWathcVideo = parseInt(stGameConfig.strValue);\r\n        }\r\n        BitmapLabelUtils.setLabel(this.spCount, this.nGlodAddByWathcVideo.toString(), \"resource/assets/img/common/level_number1/level_number1_\", 0, \".png\", \"left\");\r\n        var nCost = 1;\r\n        stGameConfig = ConfigManager_Als.getInstance().getGameConfigDataByID(8);\r\n        if (stGameConfig) {\r\n            nCost = parseInt(stGameConfig.strValue);\r\n        }\r\n        BitmapLabelUtils.setLabel(this.spCost, nCost.toString(), \"resource/assets/img/common/level_number1/level_number1_\", 0, \".png\", \"left\");\r\n    };\r\n    FailEntryTwoView_Als.prototype.startbtShareAni_Als = function () {\r\n        if (!this.bIsRunning || MiniManeger_Als.instance.isWxMiniGameForOperReq()) {\r\n            return;\r\n        }\r\n        AnimationManager_Als.instance.zoomTweena(this.imageBtShare, this.imageBtShare);\r\n    };\r\n    FailEntryTwoView_Als.prototype.initView = function () {\r\n        this.bOpneBox2 = false;\r\n        ViewChangeManager_Als.getInstance().CommonView.addBtEvent();\r\n        MiniManeger_Als.instance.showInterstitialAd();\r\n        MiniManeger_Als.instance.onShareVideoSuccess = false;\r\n        this.initPlV_Als();\r\n        this.initVFOP_Als();\r\n        this.proceMG_Als();\r\n        this.bIsRunning = true;\r\n        this.bRecvAward = false;\r\n        this.bShareAward = false;\r\n        this.refreshUIData();\r\n        this.startbtShareAni_Als();\r\n        EventMgr.getInstance().addEvent(GameEvent_Als.EVENT_FLAY_GLOD, this, this.flayGFS_Als);\r\n    };\r\n    FailEntryTwoView_Als.prototype.addGDRel_Als = function () {\r\n        this.bRecvAward = true;\r\n        PlayerDataManager_Als.getInstance().AddGoods(GoodsType.enum_GoodsType_Glod, this.nGlodAddByWathcVideo);\r\n        this.flayGR_Als();\r\n    };\r\n    FailEntryTwoView_Als.prototype.onWVRA_Als = function () {\r\n        var _this = this;\r\n        if (this.bRecvAward) {\r\n            TipsManager.getInstance().showDefaultTips(\"已经领过奖励了哦\");\r\n            return;\r\n        }\r\n        MiniManeger_Als.instance.reportMonitorSome(MiniEventConst_Als.GAMEOVER_GET, 1);\r\n        MiniManeger_Als.instance.playViderAd({\r\n            successFun: function () {\r\n                _this.addGDRel_Als();\r\n                _this.imageRecv.on(Laya.Event.CLICK, _this, _this.onWVRA_Als);\r\n            }\r\n        });\r\n    };\r\n    FailEntryTwoView_Als.prototype.flayGR_Als = function () {\r\n        console.log(\"flayGlodRecv\");\r\n        var pPoint = new Laya.Point();\r\n        pPoint.x = this.imageGoodsType.x;\r\n        pPoint.y = this.imageGoodsType.y;\r\n        var stParent = this.imageGoodsType.parent;\r\n        pPoint = stParent.localToGlobal(pPoint);\r\n        AnimationManager_Als.instance.flayGlod(pPoint.x, pPoint.y, 341, 105);\r\n    };\r\n    FailEntryTwoView_Als.prototype.initPlV_Als = function () {\r\n        if (DeviceUtil.isTTMiniGame()) {\r\n            this.imageShareName.skin = \"resource/assets/img/ui/success/failure_word_8.png\";\r\n            this.imageShareIcon.skin = \"resource/assets/img/common/succeed_icon_3.png\";\r\n            this.imageShareName.y = 15;\r\n            this.shareGlodCount.visible = true;\r\n            this.ttGoodsType.visible = true;\r\n            this.ttSpecial.visible = true;\r\n            var nGlodCount = 50;\r\n            var stGameConfig = ConfigManager_Als.getInstance().getGameConfigDataByID(18);\r\n            if (stGameConfig) {\r\n                nGlodCount = parseInt(stGameConfig.strValue);\r\n            }\r\n            BitmapLabelUtils.setLabel(this.shareGlodCount, nGlodCount.toString(), \"resource/assets/img/common/level_number1/level_number1_\", 0, \".png\", \"left\");\r\n        }\r\n        else {\r\n            this.imageShareName.skin = \"resource/assets/img/ui/success/failure_word_2.png\";\r\n            this.imageShareIcon.skin = \"resource/assets/img/common/common_icon_3.png\";\r\n            this.shareGlodCount.visible = false;\r\n            this.ttGoodsType.visible = false;\r\n            this.ttSpecial.visible = false;\r\n            this.imageShareName.y = 38;\r\n        }\r\n    };\r\n    FailEntryTwoView_Als.prototype.flayGFS_Als = function () {\r\n        console.log(\"flayGlodFileShare\");\r\n        var pPoint = new Laya.Point();\r\n        pPoint.x = this.ttGoodsType.x;\r\n        pPoint.y = this.ttGoodsType.y;\r\n        var stParent = this.ttGoodsType.parent;\r\n        pPoint = stParent.localToGlobal(pPoint);\r\n        AnimationManager_Als.instance.flayGlod(pPoint.x, pPoint.y, 341, 105);\r\n        console.log(\"pPoint.x = \", pPoint.x, \"pPoint.y = \", pPoint.y);\r\n    };\r\n    FailEntryTwoView_Als.prototype.initVFOP_Als = function () {\r\n        var _this = this;\r\n        if (MiniManeger_Als.instance.isWxMiniGameForOperReq()) {\r\n            this.refreshWeCatData();\r\n            if (BaseConst.infos.gameInfo.openPsAward == 1) {\r\n                this.imageBtRestart.bottom = this.nBtNextLevelSp;\r\n                MiniManeger_Als.instance.bFlagSpecialView = false;\r\n                MiniManeger_Als.instance.hideBanner();\r\n                Laya.timer.once(1000, this, function () {\r\n                    MiniManeger_Als.instance.bFlagSpecialView = true;\r\n                    MiniManeger_Als.instance.showBannerAd();\r\n                    Laya.Tween.to(_this.imageBtRestart, { bottom: _this.nBtNextLevel }, 500, null);\r\n                });\r\n                return;\r\n            }\r\n            else {\r\n                this.imageBtRestart.bottom = this.nBtNextLevel;\r\n            }\r\n        }\r\n        else {\r\n            MiniManeger_Als.instance.showBannerAd();\r\n        }\r\n    };\r\n    FailEntryTwoView_Als.prototype.proceMG_Als = function () {\r\n        if (DeviceUtil.isTTMiniGame()) {\r\n        }\r\n        else if (MiniManeger_Als.instance.isWxMiniGameForOperReq()) {\r\n            if (BaseConst.infos.gameInfo.openalllevel == 1) {\r\n                this.box_wecat.removeChildren();\r\n                this.box_wecat.addChild(GameCenterManager_Als.getInstance().showMoreGameinView_als(true));\r\n            }\r\n        }\r\n    };\r\n    FailEntryTwoView_Als.prototype.refreshWeCatData = function () {\r\n        this.imageBtShare.scaleX = 0.6;\r\n        this.imageBtShare.scaleY = 0.6;\r\n        this.imageBtShare.bottom = 470;\r\n        this.imageBtShare.left = 100;\r\n        this.imageRecv.scaleX = 0.6;\r\n        this.imageRecv.scaleY = 0.6;\r\n        this.imageRecv.right = 100;\r\n        this.imageRecv.bottom = 470;\r\n        this.imageBtRestart.width = 370;\r\n        this.imageBtRestart.height = 125;\r\n        this.box_wecat.visible = true;\r\n    };\r\n    return FailEntryTwoView_Als;\r\n}(PopBaseScene));\r\nexport default FailEntryTwoView_Als;\r\n",
  "references": [
    "E:/laya/project/laya_girl_ts_wecat/src/script/games/ViewChangeManager.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/games/GameStateManager.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/games/CommonDefine.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/manager/LevelManager.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/common/GameDataManager.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/games/ConfigManager.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/common/SoundManager.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/minigame/MiniManeger.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/manager/AnimationManager.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/games/GameEvent.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/common/GameData.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/game/WeCatMoreGameItemOne.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/game/Als_PopView/AddPsView.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/minigame/MiniEventConst.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/PlatformDY.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/game/MoreGameOperRequestTwo.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/game/WeCatOperReqItem713.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/game/MoreGameOperRequest.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/game/lottery/LotterySelScene.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/base/PopBaseScene.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/manager/GameCenterManager.ts"
  ]
}

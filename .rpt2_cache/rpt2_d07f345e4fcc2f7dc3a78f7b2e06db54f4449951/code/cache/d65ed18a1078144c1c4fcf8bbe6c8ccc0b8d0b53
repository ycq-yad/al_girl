{
  "code": "import * as tslib_1 from \"tslib\";\r\nimport ViewChangeManager_Als from \"../games/ViewChangeManager\";\r\nimport { PlayerDataManager_Als } from \"../common/GameDataManager\";\r\nimport ConfigManager_Als from \"../games/ConfigManager\";\r\nimport { GoodsType } from \"../games/CommonDefine\";\r\nimport Als_SoundManager from \"../common/SoundManager\";\r\nimport InviteView_Als from \"./game/invite/InviteView\";\r\nimport { MiniManeger_Als } from \"../minigame/MiniManeger\";\r\nimport WeCatMoreGameView_Als from \"./game/WeCatMoreGameView\";\r\nimport MiniEventConst_Als from \"../minigame/MiniEventConst\";\r\nimport MoreGameOperRequestTwo_Als from \"./game/MoreGameOperRequestTwo\";\r\nimport { LotteryScene } from \"./game/lottery/LotteryScene\";\r\nimport LevelView_Als from \"./game/Als_PopView/LevelView/LevelView\";\r\nimport SignView_Als from \"./game/Als_PopView/SignView\";\r\nimport { GameManager_Als } from \"../manager/GameManager\";\r\nvar GameHomeView_Als = (function (_super) {\r\n    tslib_1.__extends(GameHomeView_Als, _super);\r\n    function GameHomeView_Als() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className_key = \"GameHomeView\";\r\n        _this.bEnterGameHomeNotNewPlayer = false;\r\n        _this.skin = \"game/GameHomeView.json\";\r\n        _this.bIsRunning = false;\r\n        _this.bWeCatShow = false;\r\n        return _this;\r\n    }\r\n    GameHomeView_Als.prototype.childrenCreated = function () {\r\n        _super.prototype.childrenCreated.call(this);\r\n        this.initMiniGame();\r\n    };\r\n    GameHomeView_Als.prototype.initMiniGame = function () {\r\n        this.btn_more.visible = false;\r\n        if (DeviceUtil.isQQMiniGame() || DeviceUtil.isTTMiniGame()) {\r\n            this.btn_more.visible = true;\r\n            this.more_games.visible = this.back_btn.visible = false;\r\n        }\r\n        if (MiniManeger_Als.instance.isWxMiniGameForOperReq()) {\r\n            this.imageWeCatMoreGame.visible = true;\r\n            this.more_games.visible = true;\r\n            this.getChildByName(\"imageHead\").visible = false;\r\n        }\r\n        var self = this;\r\n        if (!self.guessLike && MiniManeger_Als.instance.isWxMiniGameForOperReq() && BaseConst.infos.gameInfo.openPsAward == 1) {\r\n            MiniManeger_Als.instance.createGuessLike(self).then(function (guessLike) {\r\n                if (!guessLike) {\r\n                    return;\r\n                }\r\n                self.guessLike = guessLike;\r\n                self.guessLike.x = (Laya.stage.width - self.guessLike.width) / 2;\r\n                self.guessLike.y = 300;\r\n            });\r\n        }\r\n    };\r\n    GameHomeView_Als.prototype.onAddStage = function () {\r\n        this.initView();\r\n        ViewChangeManager_Als.getInstance().restartEnterGameHome();\r\n    };\r\n    GameHomeView_Als.prototype.onRemoved = function () {\r\n        this.bIsRunning = false;\r\n        _super.prototype.onRemoved.call(this);\r\n        this.removeEvent();\r\n        Laya.Tween.clearAll(this.imageBtStartGame);\r\n    };\r\n    GameHomeView_Als.prototype.onColorSign = function () {\r\n        var _this = this;\r\n        MiniManeger_Als.instance.addColorSign({\r\n            success: function (res) {\r\n                console.log(res);\r\n                _this.btn_colorSign.visible = false;\r\n            }\r\n        });\r\n    };\r\n    GameHomeView_Als.prototype.onLottery = function () {\r\n        var _this = this;\r\n        Als_SoundManager.getInstance().playEffect(\"button\", 1);\r\n        ViewChangeManager_Als.getInstance().showBufferLoadingView();\r\n        ResUtil.getIntance().loadGroups([\"lottery\"], function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {\r\n            return tslib_1.__generator(this, function (_a) {\r\n                ViewManager.getInstance().showView(LotteryScene);\r\n                ViewChangeManager_Als.getInstance().hideBufferLoadingView();\r\n                return [2];\r\n            });\r\n        }); });\r\n    };\r\n    GameHomeView_Als.prototype.addEvent = function () {\r\n        this.btn_lottery.on(Laya.Event.CLICK, this, this.onLottery);\r\n        this.btn_colorSign.on(Laya.Event.CLICK, this, this.onColorSign);\r\n        this.imageBtStartGame.on(Laya.Event.CLICK, this, this.gameHomeStartGame);\r\n        this.btn_more.on(Laya.Event.CLICK, this, this.onMoreGame);\r\n        this.imageBtChoseLevel.on(Laya.Event.CLICK, this, this.openLevelView);\r\n        this.imageBtSign.on(Laya.Event.CLICK, this, this.openSignView);\r\n        this.imageBtShare.on(Laya.Event.CLICK, this, this.onGameHomeShare);\r\n        this.imageBtInvital.on(Laya.Event.CLICK, this, this.onInvite);\r\n        this.imageWeCatMoreGame.on(Laya.Event.CLICK, this, this.weCatViewOper);\r\n        this.more_games.on(Laya.Event.CLICK, this, this.wxShowMoreGame);\r\n        this.back_btn.on(Laya.Event.CLICK, this, this.wxShowMoreGame);\r\n    };\r\n    GameHomeView_Als.prototype.onMoreGame = function () {\r\n        if (DeviceUtil.isQQMiniGame()) {\r\n            MiniManeger_Als.instance.showBoxAd();\r\n        }\r\n        else if (DeviceUtil.isTTMiniGame()) {\r\n            MiniManeger_Als.instance.showMoreGamesModal();\r\n        }\r\n    };\r\n    GameHomeView_Als.prototype.wxShowMoreGame = function () {\r\n        ViewManager.getInstance().showView(MoreGameOperRequestTwo_Als);\r\n    };\r\n    GameHomeView_Als.prototype.removeEvent = function () {\r\n        this.btn_lottery.off(Laya.Event.CLICK, this, this.onLottery);\r\n        this.btn_colorSign.off(Laya.Event.CLICK, this, this.onColorSign);\r\n        this.imageBtStartGame.off(Laya.Event.CLICK, this, this.gameHomeStartGame);\r\n        this.btn_more.off(Laya.Event.CLICK, this, this.onMoreGame);\r\n        this.imageBtChoseLevel.off(Laya.Event.CLICK, this, this.openLevelView);\r\n        this.imageBtSign.off(Laya.Event.CLICK, this, this.openSignView);\r\n        this.imageBtShare.off(Laya.Event.CLICK, this, this.onGameHomeShare);\r\n        this.imageBtInvital.off(Laya.Event.CLICK, this, this.onInvite);\r\n        this.imageWeCatMoreGame.off(Laya.Event.CLICK, this, this.weCatViewOper);\r\n        this.more_games.off(Laya.Event.CLICK, this, this.wxShowMoreGame);\r\n        this.back_btn.off(Laya.Event.CLICK, this, this.wxShowMoreGame);\r\n    };\r\n    GameHomeView_Als.prototype.gameHomeStartGame = function () {\r\n        Als_SoundManager.getInstance().playEffect(\"button\", 1);\r\n        var nSpCost = 1;\r\n        var stGameConfig = ConfigManager_Als.getInstance().getGameConfigDataByID(8);\r\n        if (stGameConfig) {\r\n            nSpCost = parseInt(stGameConfig.strValue);\r\n        }\r\n        var b = PlayerDataManager_Als.getInstance().CheckGoods(GoodsType.enum_GoodsType_Sp, nSpCost);\r\n        if (!b) {\r\n            GameManager_Als.instance.powerIsEnough();\r\n            return;\r\n        }\r\n        PlayerDataManager_Als.getInstance().subGoods(GoodsType.enum_GoodsType_Sp, nSpCost);\r\n        if (DeviceUtil.isTTMiniGame()) {\r\n            MiniManeger_Als.instance.hideBanner();\r\n        }\r\n        this.enterOper();\r\n        this.removeSelf();\r\n    };\r\n    GameHomeView_Als.prototype.enterOper = function () {\r\n        if (MiniManeger_Als.instance.isWxMiniGameForOperReq()\r\n            && PlayerDataManager_Als.getInstance().getCurLevel() >= BaseConst.infos.gameInfo.splevel\r\n            && BaseConst.infos.gameInfo.openPsAward == 1) {\r\n            ViewChangeManager_Als.getInstance().CurLevelBase.startGame();\r\n        }\r\n        else {\r\n            ViewChangeManager_Als.getInstance().CurLevelBase.startGame();\r\n        }\r\n    };\r\n    GameHomeView_Als.prototype.wxOper71324 = function () {\r\n        var _this = this;\r\n        if (!MiniManeger_Als.instance.isWxMiniGameForOperReq()) {\r\n            return;\r\n        }\r\n        if (!PlayerDataManager_Als.getInstance().isSecondEnterGame()) {\r\n            return;\r\n        }\r\n        this.removeEvent();\r\n        MiniManeger_Als.instance.playViderAd({\r\n            successFun: function () {\r\n                _this.enterOper();\r\n            },\r\n            failFun: function () {\r\n                _this.enterOper();\r\n            },\r\n            errorFun: function () {\r\n                _this.enterOper();\r\n            }\r\n        });\r\n    };\r\n    GameHomeView_Als.prototype.initView = function () {\r\n        MiniManeger_Als.instance.showBannerAd();\r\n        this.bIsRunning = true;\r\n        this.startGameAni();\r\n        this.PlInitView();\r\n        this.showSignView();\r\n        BitmapLabelUtils.setLabel(this.spLevelNum, PlayerDataManager_Als.getInstance().getLevelToChangeMaxLevel().toString(), \"resource/assets/img/ui/gamehome/maininterface_number1/maininterface_number1_\", 0, \".png\", \"center\");\r\n        if (DeviceUtil.isQQMiniGame()) {\r\n            this.btn_lottery.visible = true;\r\n            var flag = MiniManeger_Als.instance.isColorSignExistSync();\r\n            if (!flag) {\r\n                this.btn_colorSign.visible = true;\r\n            }\r\n            else {\r\n                this.btn_colorSign.visible = false;\r\n            }\r\n        }\r\n        if (BaseConst.infos.gameInfo.openPsAward == 0) {\r\n            this.btn_lottery.visible = false;\r\n        }\r\n    };\r\n    GameHomeView_Als.prototype.openLevelView = function () {\r\n        var _this = this;\r\n        MiniManeger_Als.instance.reportMonitorSome(MiniEventConst_Als.HOME_LEVEL, 1);\r\n        Als_SoundManager.getInstance().playEffect(\"button\", 1);\r\n        ViewChangeManager_Als.getInstance().showBufferLoadingView();\r\n        ResUtil.getIntance().loadGroups([\"levelview\"], function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {\r\n            return tslib_1.__generator(this, function (_a) {\r\n                LevelView_Als.pHomeView = this;\r\n                ViewManager.getInstance().showView(LevelView_Als);\r\n                ViewChangeManager_Als.getInstance().hideBufferLoadingView();\r\n                return [2];\r\n            });\r\n        }); });\r\n    };\r\n    GameHomeView_Als.prototype.openSignView = function () {\r\n        var _this = this;\r\n        MiniManeger_Als.instance.reportMonitorSome(MiniEventConst_Als.HOME_SIGIN, 1);\r\n        Als_SoundManager.getInstance().playEffect(\"button\", 1);\r\n        ViewChangeManager_Als.getInstance().showBufferLoadingView();\r\n        ResUtil.getIntance().loadGroups([\"sign\"], function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {\r\n            return tslib_1.__generator(this, function (_a) {\r\n                ViewManager.getInstance().showView(SignView_Als);\r\n                ViewChangeManager_Als.getInstance().hideBufferLoadingView();\r\n                return [2];\r\n            });\r\n        }); });\r\n    };\r\n    GameHomeView_Als.prototype.onGameHomeShare = function () {\r\n        MiniManeger_Als.instance.reportMonitorSome(MiniEventConst_Als.HOME_SHARE, 1);\r\n        Als_SoundManager.getInstance().playEffect(\"button\", 1);\r\n        MiniManeger_Als.instance.bFlagDouYin = false;\r\n        MiniManeger_Als.instance.shareAppMessage();\r\n    };\r\n    GameHomeView_Als.prototype.onInvite = function () {\r\n        var _this = this;\r\n        MiniManeger_Als.instance.reportMonitorSome(MiniEventConst_Als.HOME_INVATE, 1);\r\n        Als_SoundManager.getInstance().playEffect(\"button\", 1);\r\n        ViewChangeManager_Als.getInstance().showBufferLoadingView();\r\n        ResUtil.getIntance().loadGroups([\"invite\"], function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {\r\n            return tslib_1.__generator(this, function (_a) {\r\n                ViewManager.getInstance().showView(InviteView_Als);\r\n                ViewChangeManager_Als.getInstance().hideBufferLoadingView();\r\n                return [2];\r\n            });\r\n        }); });\r\n    };\r\n    GameHomeView_Als.prototype.startGameAni = function () {\r\n        var _this = this;\r\n        if (!this.bIsRunning) {\r\n            return;\r\n        }\r\n        Laya.Tween.clearAll(this.imageBtStartGame);\r\n        Laya.Tween.to(this.imageBtStartGame, { scaleX: 1.1, scaleY: 1.1 }, 300, Laya.Ease.sineOut, Laya.Handler.create(this, function (args) {\r\n            Laya.Tween.to(_this.imageBtStartGame, { scaleX: 1, scaleY: 1 }, 300, Laya.Ease.sineOut, Laya.Handler.create(_this, function (args) {\r\n                Laya.timer.once(0, _this, _this.startGameAni);\r\n            }));\r\n        }));\r\n    };\r\n    GameHomeView_Als.prototype.PlInitView = function () {\r\n        if (DeviceUtil.isTTMiniGame()) {\r\n            this.imageBtInvital.visible = false;\r\n            this.boxFun.width = 650;\r\n        }\r\n    };\r\n    GameHomeView_Als.prototype.showSignView = function () {\r\n        this.addEvent();\r\n    };\r\n    GameHomeView_Als.prototype.weCatViewOper = function () {\r\n        ViewManager.getInstance().showView(WeCatMoreGameView_Als);\r\n    };\r\n    return GameHomeView_Als;\r\n}(BaseSceneUISkin));\r\nexport default GameHomeView_Als;\r\n",
  "references": [
    "E:/laya/project/laya_girl_ts_wecat/src/script/games/ViewChangeManager.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/common/GameDataManager.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/games/ConfigManager.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/games/GameEvent.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/games/CommonDefine.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/common/SoundManager.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/game/invite/InviteView.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/minigame/MiniManeger.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/common/GameData.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/game/WeCatMoreGameItemTwo.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/game/WeCatMoreGameView.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/game/MoreGameOperRequest.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/minigame/MiniEventConst.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/game/MoreGameOperRequestTwo.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/game/VentonesangerView.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/game/moregame/MoreGameView.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/game/lottery/LotteryScene.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/game/GuessLike.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/game/Als_PopView/AddPsView.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/game/level/LevelBase.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/game/Als_PopView/LevelView/LevelView.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/game/Als_PopView/SignView.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/manager/GameManager.ts"
  ]
}

{
  "code": "import * as tslib_1 from \"tslib\";\r\nimport ConfigManager_Als from \"../../../games/ConfigManager\";\r\nimport SuccessfulEntryOneView_Als from \"./SuccessfulEntryOneView\";\r\nimport SuccessfulEntryThreeView_Als from \"./SuccessfulEntryThreeView\";\r\nimport { MiniManeger_Als } from \"../../../minigame/MiniManeger\";\r\nimport { PlayerDataManager_Als } from \"../../../common/GameDataManager\";\r\nimport { GoodsType } from \"../../../games/CommonDefine\";\r\nimport ViewChangeManager_Als from \"../../../games/ViewChangeManager\";\r\nimport { PopBaseScene } from \"../../base/PopBaseScene\";\r\nvar ShareRecordVideoView_Als = (function (_super) {\r\n    tslib_1.__extends(ShareRecordVideoView_Als, _super);\r\n    function ShareRecordVideoView_Als(data) {\r\n        var _this = _super.call(this, data) || this;\r\n        _this.className_key = \"ShareRecordVideoView\";\r\n        _this.showEnterType = BasePopAnimationEnterType.SCALE_MODE_BACK_MORE;\r\n        _this.als_nGlodCount = 50;\r\n        _this.skin = \"game/uiView/ShareRecordVideoSkinView.json\";\r\n        return _this;\r\n    }\r\n    ShareRecordVideoView_Als.prototype.childrenCreated = function () { };\r\n    ShareRecordVideoView_Als.prototype.setData = function (data) {\r\n        _super.prototype.setData.call(this, data);\r\n        if (this.isCreate) {\r\n            this.initView();\r\n            this.addEvent();\r\n        }\r\n    };\r\n    ShareRecordVideoView_Als.prototype.refreshUiView = function () {\r\n        var stGameConfig = ConfigManager_Als.getInstance().getGameConfigDataByID(18);\r\n        if (stGameConfig) {\r\n            this.als_nGlodCount = parseInt(stGameConfig.strValue);\r\n        }\r\n        BitmapLabelUtils.setLabel(this.shareGlodCount, this.als_nGlodCount.toString(), \"resource/assets/img/common/level_number1/level_number1_\", 0, \".png\", \"left\");\r\n    };\r\n    ShareRecordVideoView_Als.prototype.initView = function () {\r\n        console.log(\"ShareRecordVideoView data ->\", this.viewData_);\r\n        ViewChangeManager_Als.getInstance().CommonView.rmobtev_alt();\r\n        this.refreshUiView();\r\n        this.yanChiXianshi();\r\n        MiniManeger_Als.instance.showBannerAd();\r\n    };\r\n    ShareRecordVideoView_Als.prototype.addEvent = function () {\r\n        this.registerEvent(this.btn_shareVideo, Laya.Event.CLICK, this.onMouse_Click_als, this);\r\n        this.registerEvent(this.btn_cancel, Laya.Event.CLICK, this.onMouse_Click_als, this);\r\n    };\r\n    ShareRecordVideoView_Als.prototype.onRemoved = function () {\r\n        this.removeEvent();\r\n        ViewChangeManager_Als.getInstance().CommonView.abte_alt();\r\n        if (BaseConst.infos.gameInfo.openPsAward == 1 && ConfigManager_Als.getInstance().getTreasureByCurLevel() == 1) {\r\n            ViewManager.getInstance().showView(SuccessfulEntryOneView_Als);\r\n        }\r\n        else {\r\n            ViewManager.getInstance().showView(SuccessfulEntryThreeView_Als);\r\n        }\r\n    };\r\n    ShareRecordVideoView_Als.prototype.shareDouYin = function () {\r\n        var self = this;\r\n        MiniManeger_Als.instance.bFlagDouYin = true;\r\n        MiniManeger_Als.instance.shareAppMessage({\r\n            sucFun: function () {\r\n                console.log(\"发布录制视频成功\");\r\n                TipsManager.getInstance().showDefaultTips('分享成功');\r\n                if (MiniManeger_Als.instance.onShareVideoSuccess) {\r\n                    return;\r\n                }\r\n                PlayerDataManager_Als.getInstance().AddGoods(GoodsType.enum_GoodsType_Glod, self.als_nGlodCount);\r\n                self.btn_shareVideo.mouseEnabled = self.btn_cancel.mouseEnabled = true;\r\n                self.removeUs();\r\n            },\r\n            failFun: function () {\r\n                console.log(\"发布录制视频失败\");\r\n                TipsManager.getInstance().showDefaultTips('分享失败');\r\n                self.btn_shareVideo.mouseEnabled = self.btn_cancel.mouseEnabled = true;\r\n            }\r\n        });\r\n    };\r\n    ShareRecordVideoView_Als.prototype.shVideo_als = function () {\r\n        var self = this;\r\n        self.btn_shareVideo.mouseEnabled = self.btn_cancel.mouseEnabled = false;\r\n        if (DeviceUtil.isTTMiniGame()) {\r\n            var info = platform.getSystemInfoSync();\r\n            if (info.appName.toUpperCase() == 'DOUYIN') {\r\n                this.shareDouYin();\r\n            }\r\n            else {\r\n                this.shareTT();\r\n            }\r\n        }\r\n        else {\r\n            MiniManeger_Als.instance.shareAppMessage();\r\n        }\r\n    };\r\n    ShareRecordVideoView_Als.prototype.shareTT = function () {\r\n        var self = this;\r\n        MiniManeger_Als.instance.shareGameVideo({\r\n            successFun: function () {\r\n                PlayerDataManager_Als.getInstance().AddGoods(GoodsType.enum_GoodsType_Glod, self.als_nGlodCount);\r\n                self.btn_shareVideo.mouseEnabled = self.btn_cancel.mouseEnabled = true;\r\n                self.removeUs();\r\n            }, failFun: function () {\r\n                self.btn_shareVideo.mouseEnabled = self.btn_cancel.mouseEnabled = true;\r\n            }, errorFun: function () {\r\n                self.btn_shareVideo.mouseEnabled = self.btn_cancel.mouseEnabled = true;\r\n            }\r\n        });\r\n    };\r\n    ShareRecordVideoView_Als.prototype.removeUs = function () {\r\n        _super.prototype.removeUs.call(this);\r\n    };\r\n    ShareRecordVideoView_Als.prototype.yanChiXianshi = function () {\r\n        var _this = this;\r\n        this.btn_cancel.visible = false;\r\n        Laya.timer.once(2000, this, function () {\r\n            _this.btn_cancel.visible = true;\r\n        });\r\n    };\r\n    ShareRecordVideoView_Als.prototype.onMouse_Click_als = function (evt) {\r\n        switch (evt.currentTarget) {\r\n            case this.btn_shareVideo:\r\n                this.shVideo_als();\r\n                break;\r\n            case this.btn_cancel:\r\n                this.removeUs();\r\n                break;\r\n        }\r\n    };\r\n    return ShareRecordVideoView_Als;\r\n}(PopBaseScene));\r\nexport default ShareRecordVideoView_Als;\r\n",
  "references": [
    "E:/laya/project/laya_girl_ts_wecat/src/script/games/ConfigManager.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/game/Als_PopView/SuccessfulEntryOneView.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/game/Als_PopView/SuccessfulEntryThreeView.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/minigame/MiniManeger.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/common/GameDataManager.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/games/CommonDefine.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/games/ViewChangeManager.ts",
    "E:/laya/project/laya_girl_ts_wecat/src/script/views/base/PopBaseScene.ts"
  ]
}

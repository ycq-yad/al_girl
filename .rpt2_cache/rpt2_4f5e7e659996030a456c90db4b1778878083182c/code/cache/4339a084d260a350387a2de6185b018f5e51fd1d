{
  "code": "import * as tslib_1 from \"tslib\";\r\nimport ViewChangeManager_Als from \"../games/ViewChangeManager\";\r\nimport { PlayerDataManager_Als } from \"../common/GameDataManager\";\r\nimport ConfigManager_Als from \"../games/ConfigManager\";\r\nimport { GoodsType } from \"../games/CommonDefine\";\r\nimport Als_SoundManager from \"../common/SoundManager\";\r\nimport InviteView_Als from \"./game/invite/InviteView\";\r\nimport { MiniManeger_Als } from \"../minigame/MiniManeger\";\r\nimport WeCatMoreGameView_Als from \"./game/WeCatMoreGameView\";\r\nimport MiniEventConst_Als from \"../minigame/MiniEventConst\";\r\nimport MoreGameOperRequestTwo_Als from \"./game/MoreGameOperRequestTwo\";\r\nimport { LotteryScene } from \"./game/lottery/LotteryScene\";\r\nimport LevelView_Als from \"./game/Als_PopView/LevelView/LevelView\";\r\nimport SignView_Als from \"./game/Als_PopView/SignView\";\r\nimport { GameManager_Als } from \"../manager/GameManager\";\r\nimport { BaseUIScene } from \"./base/BaseUIScene\";\r\nvar GameHomeView_Als = (function (_super) {\r\n    tslib_1.__extends(GameHomeView_Als, _super);\r\n    function GameHomeView_Als() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className_key = \"GameHomeView\";\r\n        _this.bEnterGameHomeNotNewPlayer = false;\r\n        _this.skin = \"game/GameHomeView.json\";\r\n        _this.bIsRunning = false;\r\n        _this.bWeCatShow = false;\r\n        return _this;\r\n    }\r\n    GameHomeView_Als.prototype.childrenCreated = function () {\r\n        _super.prototype.childrenCreated.call(this);\r\n        this.initMiniGame();\r\n    };\r\n    GameHomeView_Als.prototype.onRemoved = function () {\r\n        this.bIsRunning = false;\r\n        _super.prototype.onRemoved.call(this);\r\n        this.removeEvent();\r\n        Laya.Tween.clearAll(this.imageBtStartGame);\r\n    };\r\n    GameHomeView_Als.prototype.initMiniGame = function () {\r\n        this.btn_more.visible = false;\r\n        if (DeviceUtil.isQQMiniGame() || DeviceUtil.isTTMiniGame()) {\r\n            this.btn_more.visible = true;\r\n            this.more_games.visible = this.back_btn.visible = false;\r\n        }\r\n        if (MiniManeger_Als.instance.isWxMiniGameForOperReq()) {\r\n            this.imageWeCatMoreGame.visible = true;\r\n            this.more_games.visible = true;\r\n            this.getChildByName(\"imageHead\").visible = false;\r\n        }\r\n        var self = this;\r\n        if (!self.guessLike && MiniManeger_Als.instance.isWxMiniGameForOperReq() && BaseConst.infos.gameInfo.openPsAward == 1) {\r\n            MiniManeger_Als.instance.createGuessLike(self).then(function (guessLike) {\r\n                if (!guessLike) {\r\n                    return;\r\n                }\r\n                self.guessLike = guessLike;\r\n                self.guessLike.x = (Laya.stage.width - self.guessLike.width) / 2;\r\n                self.guessLike.y = 300;\r\n            });\r\n        }\r\n    };\r\n    GameHomeView_Als.prototype.onAddStage = function () {\r\n        this.initView();\r\n        ViewChangeManager_Als.getInstance().restartEnterGameHome();\r\n    };\r\n    GameHomeView_Als.prototype.onColorSign_als = function () {\r\n        var _this = this;\r\n        MiniManeger_Als.instance.addColorSign({\r\n            success: function (res) {\r\n                console.log(res);\r\n                _this.btn_colorSign.visible = false;\r\n            }\r\n        });\r\n    };\r\n    GameHomeView_Als.prototype.onLottery_als = function () {\r\n        var _this = this;\r\n        ViewChangeManager_Als.getInstance().showBufferLoadingView();\r\n        ResUtil.getIntance().loadGroups([\"lottery\"], function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {\r\n            return tslib_1.__generator(this, function (_a) {\r\n                ViewManager.getInstance().showView(LotteryScene);\r\n                ViewChangeManager_Als.getInstance().hideBufferLoadingView();\r\n                return [2];\r\n            });\r\n        }); });\r\n    };\r\n    GameHomeView_Als.prototype.addEvent = function () {\r\n        this.registerEvent(this.btn_lottery, Laya.Event.CLICK, this.onMousClck_Als, this);\r\n        this.registerEvent(this.btn_colorSign, Laya.Event.CLICK, this.onMousClck_Als, this);\r\n        this.registerEvent(this.imageBtStartGame, Laya.Event.CLICK, this.onMousClck_Als, this);\r\n        this.registerEvent(this.btn_more, Laya.Event.CLICK, this.onMousClck_Als, this);\r\n        this.registerEvent(this.imageBtChoseLevel, Laya.Event.CLICK, this.onMousClck_Als, this);\r\n        this.registerEvent(this.imageBtSign, Laya.Event.CLICK, this.onMousClck_Als, this);\r\n        this.registerEvent(this.imageBtShare, Laya.Event.CLICK, this.onMousClck_Als, this);\r\n        this.registerEvent(this.imageBtInvital, Laya.Event.CLICK, this.onMousClck_Als, this);\r\n        this.registerEvent(this.imageWeCatMoreGame, Laya.Event.CLICK, this.onMousClck_Als, this);\r\n        this.registerEvent(this.more_games, Laya.Event.CLICK, this.onMousClck_Als, this);\r\n        this.registerEvent(this.back_btn, Laya.Event.CLICK, this.onMousClck_Als, this);\r\n    };\r\n    GameHomeView_Als.prototype.onMousClck_Als = function (evt) {\r\n        Als_SoundManager.getInstance().playEffect(\"button\", 1);\r\n        switch (evt.currentTarget) {\r\n            case this.btn_lottery:\r\n                this.onLottery_als();\r\n                break;\r\n            case this.btn_colorSign:\r\n                this.onColorSign_als();\r\n                break;\r\n            case this.imageBtStartGame:\r\n                this.gameHomeStartGame_als();\r\n                break;\r\n            case this.btn_more:\r\n                this.onMoreGame_als();\r\n                break;\r\n            case this.imageBtChoseLevel:\r\n                this.openLevelView_als();\r\n                break;\r\n            case this.imageBtSign:\r\n                this.openSignView_als();\r\n                break;\r\n            case this.imageBtShare:\r\n                this.onGameHomeShare_als();\r\n                break;\r\n            case this.imageBtInvital:\r\n                this.onInvite_als();\r\n                break;\r\n            case this.imageWeCatMoreGame:\r\n                this.weCatViewOper_als();\r\n                break;\r\n            case this.more_games:\r\n                this.wxShowMoreGame_als();\r\n                break;\r\n            case this.back_btn:\r\n                this.wxShowMoreGame_als();\r\n                break;\r\n        }\r\n    };\r\n    GameHomeView_Als.prototype.onMoreGame_als = function () {\r\n    };\r\n    GameHomeView_Als.prototype.wxShowMoreGame_als = function () {\r\n        ViewManager.getInstance().showView(MoreGameOperRequestTwo_Als);\r\n    };\r\n    GameHomeView_Als.prototype.gameHomeStartGame_als = function () {\r\n        var nSpCost = 1;\r\n        var stGameConfig = ConfigManager_Als.getInstance().getGameConfigDataByID(8);\r\n        if (stGameConfig) {\r\n            nSpCost = parseInt(stGameConfig.strValue);\r\n        }\r\n        var b = PlayerDataManager_Als.getInstance().CheckGoods(GoodsType.enum_GoodsType_Sp, nSpCost);\r\n        if (!b) {\r\n            GameManager_Als.instance.powerIsEnough();\r\n            return;\r\n        }\r\n        PlayerDataManager_Als.getInstance().subGoods(GoodsType.enum_GoodsType_Sp, nSpCost);\r\n        if (DeviceUtil.isTTMiniGame()) {\r\n            MiniManeger_Als.instance.hideBanner();\r\n        }\r\n        this.enterOper();\r\n        this.removeSelf();\r\n    };\r\n    GameHomeView_Als.prototype.enterOper = function () {\r\n        if (MiniManeger_Als.instance.isWxMiniGameForOperReq()\r\n            && PlayerDataManager_Als.getInstance().getCurLevel() >= BaseConst.infos.gameInfo.splevel\r\n            && BaseConst.infos.gameInfo.openPsAward == 1) {\r\n            ViewChangeManager_Als.getInstance().CurLevelBase.startGame();\r\n        }\r\n        else {\r\n            ViewChangeManager_Als.getInstance().CurLevelBase.startGame();\r\n        }\r\n    };\r\n    GameHomeView_Als.prototype.initView = function () {\r\n        MiniManeger_Als.instance.showBannerAd();\r\n        this.bIsRunning = true;\r\n        this.startGameAni_als();\r\n        this.PlInitView_als();\r\n        this.showSignView_als();\r\n        BitmapLabelUtils.setLabel(this.spLevelNum, PlayerDataManager_Als.getInstance().getLevelToChangeMaxLevel().toString(), \"resource/assets/img/ui/gamehome/maininterface_number1/maininterface_number1_\", 0, \".png\", \"center\");\r\n        if (DeviceUtil.isQQMiniGame()) {\r\n            this.btn_lottery.visible = true;\r\n            var flag = MiniManeger_Als.instance.isColorSignExistSync();\r\n            if (!flag) {\r\n                this.btn_colorSign.visible = true;\r\n            }\r\n            else {\r\n                this.btn_colorSign.visible = false;\r\n            }\r\n        }\r\n        if (BaseConst.infos.gameInfo.openPsAward == 0) {\r\n            this.btn_lottery.visible = false;\r\n        }\r\n    };\r\n    GameHomeView_Als.prototype.openSignView_als = function () {\r\n        var _this = this;\r\n        MiniManeger_Als.instance.reportMonitorSome(MiniEventConst_Als.HOME_SIGIN, 1);\r\n        ViewChangeManager_Als.getInstance().showBufferLoadingView();\r\n        ResUtil.getIntance().loadGroups([\"sign\"], function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {\r\n            return tslib_1.__generator(this, function (_a) {\r\n                ViewManager.getInstance().showView(SignView_Als);\r\n                ViewChangeManager_Als.getInstance().hideBufferLoadingView();\r\n                return [2];\r\n            });\r\n        }); });\r\n    };\r\n    GameHomeView_Als.prototype.openLevelView_als = function () {\r\n        var _this = this;\r\n        MiniManeger_Als.instance.reportMonitorSome(MiniEventConst_Als.HOME_LEVEL, 1);\r\n        Als_SoundManager.getInstance().playEffect(\"button\", 1);\r\n        ViewChangeManager_Als.getInstance().showBufferLoadingView();\r\n        ResUtil.getIntance().loadGroups([\"levelview\"], function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {\r\n            return tslib_1.__generator(this, function (_a) {\r\n                LevelView_Als.pHomeView = this;\r\n                ViewManager.getInstance().showView(LevelView_Als);\r\n                ViewChangeManager_Als.getInstance().hideBufferLoadingView();\r\n                return [2];\r\n            });\r\n        }); });\r\n    };\r\n    GameHomeView_Als.prototype.onInvite_als = function () {\r\n        var _this = this;\r\n        MiniManeger_Als.instance.reportMonitorSome(MiniEventConst_Als.HOME_INVATE, 1);\r\n        ViewChangeManager_Als.getInstance().showBufferLoadingView();\r\n        ResUtil.getIntance().loadGroups([\"invite\"], function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {\r\n            return tslib_1.__generator(this, function (_a) {\r\n                ViewManager.getInstance().showView(InviteView_Als);\r\n                ViewChangeManager_Als.getInstance().hideBufferLoadingView();\r\n                return [2];\r\n            });\r\n        }); });\r\n    };\r\n    GameHomeView_Als.prototype.onGameHomeShare_als = function () {\r\n        MiniManeger_Als.instance.reportMonitorSome(MiniEventConst_Als.HOME_SHARE, 1);\r\n        MiniManeger_Als.instance.bFlagDouYin = false;\r\n        MiniManeger_Als.instance.shareAppMessage();\r\n    };\r\n    GameHomeView_Als.prototype.startGameAni_als = function () {\r\n        var _this = this;\r\n        if (!this.bIsRunning) {\r\n            return;\r\n        }\r\n        Laya.Tween.clearAll(this.imageBtStartGame);\r\n        Laya.Tween.to(this.imageBtStartGame, { scaleX: 1.1, scaleY: 1.1 }, 300, Laya.Ease.sineOut, Laya.Handler.create(this, function (args) {\r\n            Laya.Tween.to(_this.imageBtStartGame, { scaleX: 1, scaleY: 1 }, 300, Laya.Ease.sineOut, Laya.Handler.create(_this, function (args) {\r\n                Laya.timer.once(0, _this, _this.startGameAni_als);\r\n            }));\r\n        }));\r\n    };\r\n    GameHomeView_Als.prototype.showSignView_als = function () {\r\n        this.addEvent();\r\n    };\r\n    GameHomeView_Als.prototype.PlInitView_als = function () {\r\n        if (DeviceUtil.isTTMiniGame()) {\r\n            this.imageBtInvital.visible = false;\r\n            this.boxFun.width = 650;\r\n        }\r\n    };\r\n    GameHomeView_Als.prototype.weCatViewOper_als = function () {\r\n        ViewManager.getInstance().showView(WeCatMoreGameView_Als);\r\n    };\r\n    return GameHomeView_Als;\r\n}(BaseUIScene));\r\nexport default GameHomeView_Als;\r\n",
  "references": [
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/games/ViewChangeManager.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/common/GameDataManager.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/games/ConfigManager.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/games/GameEvent.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/games/CommonDefine.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/common/SoundManager.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/invite/InviteView.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/minigame/MiniManeger.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/common/GameData.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/WeCatMoreGameItemTwo.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/WeCatMoreGameView.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/MoreGameOperRequest.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/minigame/MiniEventConst.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/MoreGameOperRequestTwo.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/moregame/MoreGameView.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/lottery/LotteryScene.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/GuessLike.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/Als_PopView/AddPsView.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/level/LevelBase.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/Als_PopView/LevelView/LevelView.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/Als_PopView/SignView.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/manager/GameManager.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/base/BasePopScene.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/base/BaseUIScene.ts"
  ]
}

{
  "code": "import * as tslib_1 from \"tslib\";\r\nimport GameEvent_Als from \"../../../games/GameEvent\";\r\nimport { PlayerDataManager_Als } from \"../../../common/GameDataManager\";\r\nimport ConfigManager_Als from \"../../../games/ConfigManager\";\r\nimport Als_SoundManager from \"../../../common/SoundManager\";\r\nimport GameCenterManager_Als from \"../../../manager/GameCenterManager\";\r\nvar CommonView_Als = (function (_super) {\r\n    tslib_1.__extends(CommonView_Als, _super);\r\n    function CommonView_Als() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className_key = \"CommonView\";\r\n        _this.skin = \"game/uiView/CommonView.json\";\r\n        _this.width = 600;\r\n        _this.height = 200;\r\n        return _this;\r\n    }\r\n    CommonView_Als.prototype.addEventUpdateView = function () {\r\n        this.sp.on(Laya.Event.CLICK, this, this.openAddSp_Als);\r\n        EventMgr.getInstance().addEvent(GameEvent_Als.ON_PS_CHANGE, this, this.refreshSPV_Als);\r\n        EventMgr.getInstance().addEvent(GameEvent_Als.ON_GLOD_CHANGE, this, this.refreshGV_Als);\r\n        EventMgr.getInstance().addEvent(GameEvent_Als.ON_SP_UPDOWN_TIME, this, this.refreshTLT_Als);\r\n        EventMgr.getInstance().addEvent(GameEvent_Als.PS_LIMITLESS, this, this.refreshPSLL_Als);\r\n    };\r\n    CommonView_Als.prototype.onAddStage = function () {\r\n        if (!this.isCreate) {\r\n            return;\r\n        }\r\n        this.refreshSPV_Als();\r\n        this.refreshGV_Als();\r\n        this.refreshTV_Als();\r\n        this.addEventUpdateView();\r\n        this.refreshPSLL_Als();\r\n    };\r\n    CommonView_Als.prototype.onRemoved = function () {\r\n        this.removeEUV();\r\n    };\r\n    CommonView_Als.prototype.removeEUV = function () {\r\n        this.sp.off(Laya.Event.CLICK, this, this.openAddSp_Als);\r\n        EventMgr.getInstance().removeEvent(GameEvent_Als.ON_PS_CHANGE, this, this.refreshSPV_Als);\r\n        EventMgr.getInstance().removeEvent(GameEvent_Als.ON_GLOD_CHANGE, this, this.refreshGV_Als);\r\n        EventMgr.getInstance().removeEvent(GameEvent_Als.ON_SP_UPDOWN_TIME, this, this.refreshTLT_Als);\r\n        EventMgr.getInstance().removeEvent(GameEvent_Als.PS_LIMITLESS, this, this.refreshPSLL_Als);\r\n    };\r\n    CommonView_Als.prototype.abte_alt = function () {\r\n        this.imageBtAttSp.visible = true;\r\n        this.sp && this.sp.on(Laya.Event.CLICK, this, this.openAddSp_Als);\r\n    };\r\n    CommonView_Als.prototype.rmobtev_alt = function () {\r\n        this.imageBtAttSp.visible = false;\r\n        this.sp && this.sp.off(Laya.Event.CLICK, this, this.openAddSp_Als);\r\n    };\r\n    CommonView_Als.prototype.refreshSPV_Als = function () {\r\n        if (!this.isCreate) {\r\n            return;\r\n        }\r\n        if (!PlayerDataManager_Als.getInstance().isPsLimitlessState()) {\r\n            BitmapLabelUtils.setLabel(this.spNum, PlayerDataManager_Als.getInstance().stPlayerDataBase.nPS.toString(), \"resource/assets/img/ui/gamehome/maininterface_number1/maininterface_number1_\", 0, \".png\", \"center\");\r\n            this.refreshTV_Als();\r\n        }\r\n    };\r\n    CommonView_Als.prototype.openAddSp_Als = function () {\r\n        Als_SoundManager.getInstance().playEffect(\"button\", 1);\r\n        GameCenterManager_Als.getInstance().oppenAddSpView();\r\n    };\r\n    CommonView_Als.prototype.refreshTV_Als = function () {\r\n        if (PlayerDataManager_Als.getInstance().isPsLimitlessState()) {\r\n            return;\r\n        }\r\n        var nSpTimeMax = 5;\r\n        var stGameData = ConfigManager_Als.getInstance().getGameConfigDataByID(1);\r\n        if (stGameData) {\r\n            nSpTimeMax = parseInt(stGameData.strValue);\r\n        }\r\n        if (nSpTimeMax <= PlayerDataManager_Als.getInstance().stPlayerDataBase.nPS) {\r\n            this.imageSpFull.visible = true;\r\n            this.stLableTime.visible = false;\r\n            this.stLableTime.text = \"\";\r\n        }\r\n        else {\r\n            this.imageSpFull.visible = false;\r\n            this.stLableTime.visible = true;\r\n        }\r\n    };\r\n    CommonView_Als.prototype.refreshGV_Als = function () {\r\n        if (!this.isCreate) {\r\n            return;\r\n        }\r\n        BitmapLabelUtils.setLabel(this.glodNum, PlayerDataManager_Als.getInstance().stPlayerDataBase.nGlodCount.toString(), \"resource/assets/img/common/level_number1/level_number1_\", 0, \".png\", \"left\");\r\n    };\r\n    CommonView_Als.prototype.refreshPSLL_Als = function () {\r\n        if (!PlayerDataManager_Als.getInstance().isPsLimitlessState()) {\r\n            return;\r\n        }\r\n        this.stLableTime.visible = false;\r\n        this.spNum.visible = false;\r\n        this.imageSpFull.visible = true;\r\n        this.imageSpFull.skin = \"resource/assets/img/ui/gamehome/maininterface_word_3.png\";\r\n        this.sp.skin = \"resource/assets/img/ui/gamehome/maininterface_baseboard_1_2.png\";\r\n    };\r\n    CommonView_Als.prototype.refreshTLT_Als = function () {\r\n        if (PlayerDataManager_Als.getInstance().isPsLimitlessState()) {\r\n            return;\r\n        }\r\n        this.imageSpFull.visible = false;\r\n        this.stLableTime.visible = true;\r\n        this.stLableTime.text = PlayerDataManager_Als.getInstance().getSpLastTime();\r\n    };\r\n    return CommonView_Als;\r\n}(BaseSceneUISkin));\r\nexport default CommonView_Als;\r\n",
  "references": [
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/games/GameEvent.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/common/GameDataManager.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/games/ConfigManager.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/common/SoundManager.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/games/ViewChangeManager.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/Als_PopView/AddPsView.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/manager/GameCenterManager.ts"
  ]
}

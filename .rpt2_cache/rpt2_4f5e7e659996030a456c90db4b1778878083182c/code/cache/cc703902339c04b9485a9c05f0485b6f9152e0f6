{
  "code": "import * as tslib_1 from \"tslib\";\r\nimport ConfigManager_Als from \"../../../games/ConfigManager\";\r\nimport { PlayerDataManager_Als } from \"../../../common/GameDataManager\";\r\nimport { GoodsType } from \"../../../games/CommonDefine\";\r\nimport SuccessfulEntryThreeView_Als from \"./SuccessfulEntryThreeView\";\r\nimport Als_SoundManager from \"../../../common/SoundManager\";\r\nimport GameLogicProcessingManager_Als from \"../../../games/GameLogicProcessingManager\";\r\nimport { MiniManeger_Als } from \"../../../minigame/MiniManeger\";\r\nimport ViewChangeManager_Als from \"../../../games/ViewChangeManager\";\r\nimport MoreGameOperRequestTwo_Als from \"../MoreGameOperRequestTwo\";\r\nimport { PopBaseScene } from \"../../base/PopBaseScene\";\r\nvar SuccessfulEntryOneView_Als = (function (_super) {\r\n    tslib_1.__extends(SuccessfulEntryOneView_Als, _super);\r\n    function SuccessfulEntryOneView_Als() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className_key = \"SuccessfulEntryOneView_Als\";\r\n        _this.showEnterType = BasePopAnimationEnterType.SCALE_MODE_BACK;\r\n        _this._nCurentCountSecond = 0;\r\n        _this._nTimeDown = 5;\r\n        _this._nCountMax = 5;\r\n        _this._nPsAdd = 1;\r\n        _this._nAddPerOne = 0;\r\n        _this._nCurCount = 0;\r\n        _this._bTimeOver = false;\r\n        _this._bAniRunning = false;\r\n        _this._bFirst = true;\r\n        _this._nTimeOverTemp = 0;\r\n        _this._nLastClickTime = 0;\r\n        _this.skin = \"game/uiView/SuccessfulEntryOneView.json\";\r\n        return _this;\r\n    }\r\n    SuccessfulEntryOneView_Als.prototype.childrenCreated = function () {\r\n        _super.prototype.childrenCreated.call(this);\r\n    };\r\n    SuccessfulEntryOneView_Als.prototype.initBaseData = function () {\r\n        this._nTimeDown = 5;\r\n        this._nCountMax = 5;\r\n        this._nPsAdd = 1;\r\n        this._nAddPerOne = 0;\r\n        this._nCurCount = 0;\r\n        this._bTimeOver = false;\r\n        this._bAniRunning = true;\r\n        this._bFirst = true;\r\n        this._nCurentCountSecond = 0;\r\n    };\r\n    SuccessfulEntryOneView_Als.prototype.initAfter = function () {\r\n        MiniManeger_Als.instance.showInterstitialAd();\r\n        ViewChangeManager_Als.getInstance().CommonView.visible = false;\r\n        this.imageBt.bottom = 0;\r\n        this.moveBtnTween = null;\r\n        MiniManeger_Als.instance.bFlagSpecialView = false;\r\n        MiniManeger_Als.instance.hideBanner();\r\n    };\r\n    SuccessfulEntryOneView_Als.prototype.sign_als_check_c = function () {\r\n        if (this._nCurCount >= this._nCountMax) {\r\n            Laya.timer.clear(this, this.timeDownView);\r\n            this.procLgOv_Als();\r\n        }\r\n        if (this._nCurCount >= 7) {\r\n            MiniManeger_Als.instance.bFlagSpecialView = true;\r\n            MiniManeger_Als.instance.showBannerAd();\r\n            if (!this.moveBtnTween) {\r\n                this.moveBtnTween = Laya.Tween.to(this.imageBt, { bottom: 200 }, 1000);\r\n            }\r\n        }\r\n    };\r\n    SuccessfulEntryOneView_Als.prototype.initView = function () {\r\n        this.initAfter();\r\n        Als_SoundManager.getInstance().playEffect(\"win\", 1);\r\n        this.initBaseData();\r\n        this.initUpTimeDown();\r\n        this.initClickCountMax();\r\n        this.initPsCount();\r\n        this.initSubTime();\r\n        this._nAddPerOne = Math.floor(870 / this._nCountMax);\r\n        this.imageParValue.width = 0;\r\n        this.ope_nTimeDown();\r\n        this.openHA_Als();\r\n    };\r\n    SuccessfulEntryOneView_Als.prototype.addEvent = function () {\r\n        this.registerEvent(this.imageBt, Laya.Event.CLICK, this.sign_click_recv_aw_als, this);\r\n    };\r\n    SuccessfulEntryOneView_Als.prototype.ope_nTimeDown = function () {\r\n        BitmapLabelUtils.setLabel(this.spTimeDown, this._nTimeDown.toString(), \"resource/assets/img/ui/success/succeed_number2/succeed_number2_\", 0, \".png\", \"center\");\r\n        Laya.timer.loop(1000, this, this.timeDownView);\r\n        Laya.timer.loop(this._nTimeOverTemp, this, this.als_sing_sun_count);\r\n    };\r\n    SuccessfulEntryOneView_Als.prototype.sign_click_recv_aw_als = function () {\r\n        Als_SoundManager.getInstance().playEffect(\"button\", 1);\r\n        if (this._bTimeOver) {\r\n            return;\r\n        }\r\n        this._nCurentCountSecond += 1;\r\n        this._nCurCount += 1;\r\n        var nWithCur = this._nCurCount * this._nAddPerOne;\r\n        this.imageParValue.width = nWithCur;\r\n        this.sign_als_check_c();\r\n        this._nLastClickTime = GameLogicProcessingManager_Als.GetCurTime();\r\n    };\r\n    SuccessfulEntryOneView_Als.prototype.timeDownView = function () {\r\n        this._nCurentCountSecond = 0;\r\n        this._nTimeDown -= 1;\r\n        var nTemp = this._nTimeDown;\r\n        nTemp = nTemp < 0 ? 0 : nTemp;\r\n        BitmapLabelUtils.setLabel(this.spTimeDown, nTemp.toString(), \"resource/assets/img/ui/success/succeed_number2/succeed_number2_\", 0, \".png\", \"center\");\r\n        if (this._nTimeDown < 0) {\r\n            this._bTimeOver = true;\r\n            this.procLgOv_Als();\r\n        }\r\n    };\r\n    SuccessfulEntryOneView_Als.prototype.als_sing_sun_count = function () {\r\n        this._nCurCount -= 1;\r\n        this._nCurCount = this._nCurCount < 0 ? 0 : this._nCurCount;\r\n        var nWithCur = this._nCurCount * this._nAddPerOne;\r\n        this.imageParValue.width = nWithCur;\r\n    };\r\n    SuccessfulEntryOneView_Als.prototype.onRemoved = function () {\r\n        _super.prototype.onRemoved.call(this);\r\n        this.removeEvent();\r\n        this._bFirst = false;\r\n        this._bAniRunning = false;\r\n        Laya.Tween.clearAll(this.imageHand);\r\n        Laya.timer.clearAll(this);\r\n        MiniManeger_Als.instance.bFlagSpecialView = true;\r\n    };\r\n    SuccessfulEntryOneView_Als.prototype.gotoView = function () {\r\n        if (MiniManeger_Als.instance.isWxMiniGameForOperReq()) {\r\n            if (PlayerDataManager_Als.bGlobEnterGame) {\r\n                ViewManager.getInstance().showView(MoreGameOperRequestTwo_Als);\r\n            }\r\n            else {\r\n                if (PlayerDataManager_Als.getInstance().nGotoLevel != 0) {\r\n                    ViewChangeManager_Als.getInstance().gotoLevel(PlayerDataManager_Als.getInstance().nGotoLevel);\r\n                }\r\n                else if (PlayerDataManager_Als.getInstance().bEnterGameFromGameHome) {\r\n                    ViewChangeManager_Als.getInstance().CurLevelBase.startGame();\r\n                }\r\n                else {\r\n                    ViewChangeManager_Als.getInstance().goToNextLevel();\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            ViewManager.getInstance().showView(SuccessfulEntryThreeView_Als);\r\n        }\r\n    };\r\n    SuccessfulEntryOneView_Als.prototype.procLogicOverDown = function () {\r\n        this.removeSelf();\r\n        MiniManeger_Als.instance.bFlagSpecialView = true;\r\n        PlayerDataManager_Als.getInstance().bEnterGameFromGameHome = false;\r\n        PlayerDataManager_Als.getInstance().nGotoLevel = 0;\r\n        ViewChangeManager_Als.getInstance().CommonView.visible = true;\r\n    };\r\n    SuccessfulEntryOneView_Als.prototype.openHA_Als = function () {\r\n        var _this = this;\r\n        if (!this._bAniRunning) {\r\n            return;\r\n        }\r\n        var yTemp = this.imageHand.y;\r\n        Laya.Tween.clearAll(this.imageHand);\r\n        Laya.Tween.to(this.imageHand, { y: yTemp - 25 }, 300, null, Laya.Handler.create(this, function (args) {\r\n            Laya.Tween.to(_this.imageHand, { y: yTemp }, 300, null, Laya.Handler.create(_this, function (args) {\r\n                Laya.timer.once(0, _this, _this.openHA_Als);\r\n            }));\r\n        }));\r\n    };\r\n    SuccessfulEntryOneView_Als.prototype.procLgOv_Als = function () {\r\n        Laya.timer.clear(this, this.timeDownView);\r\n        if (this._nCurCount >= this._nCountMax) {\r\n            PlayerDataManager_Als.getInstance().AddGoods(GoodsType.enum_GoodsType_Sp, this._nPsAdd);\r\n            TipsManager.getInstance().showDefaultTips(\"体力+\" + this._nPsAdd.toString());\r\n        }\r\n        if (this._bTimeOver) {\r\n            TipsManager.getInstance().showDefaultTips(\"领取失败\");\r\n        }\r\n        this.gotoView();\r\n        this.procLogicOverDown();\r\n    };\r\n    SuccessfulEntryOneView_Als.prototype.initUpTimeDown = function () {\r\n        var stGameConfig = ConfigManager_Als.getInstance().getGameConfigDataByID(9);\r\n        if (stGameConfig) {\r\n            this._nTimeDown = parseInt(stGameConfig.strValue);\r\n        }\r\n        BitmapLabelUtils.setLabel(this.spTimeDown, this._nTimeDown.toString(), \"resource/assets/img/ui/success/succeed_number2/succeed_number2_\", 0, \".png\", \"center\");\r\n    };\r\n    SuccessfulEntryOneView_Als.prototype.initClickCountMax = function () {\r\n        var stGameConfig = ConfigManager_Als.getInstance().getGameConfigDataByID(10);\r\n        if (stGameConfig) {\r\n            this._nCountMax = parseInt(stGameConfig.strValue);\r\n        }\r\n    };\r\n    SuccessfulEntryOneView_Als.prototype.initPsCount = function () {\r\n        var stGameConfig = ConfigManager_Als.getInstance().getGameConfigDataByID(11);\r\n        if (stGameConfig) {\r\n            this._nPsAdd = parseInt(stGameConfig.strValue);\r\n        }\r\n    };\r\n    SuccessfulEntryOneView_Als.prototype.initSubTime = function () {\r\n        var stGameConfig = ConfigManager_Als.getInstance().getGameConfigDataByID(14);\r\n        if (stGameConfig) {\r\n            this._nTimeOverTemp = parseInt(stGameConfig.strValue);\r\n        }\r\n    };\r\n    return SuccessfulEntryOneView_Als;\r\n}(PopBaseScene));\r\nexport default SuccessfulEntryOneView_Als;\r\n",
  "references": [
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/games/ConfigManager.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/common/GameDataManager.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/games/CommonDefine.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/Als_PopView/SuccessfulEntryThreeView.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/common/SoundManager.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/games/GameLogicProcessingManager.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/minigame/MiniManeger.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/games/ViewChangeManager.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/MoreGameOperRequestTwo.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/base/PopBaseScene.ts"
  ]
}

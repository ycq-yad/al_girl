{
  "code": "import * as tslib_1 from \"tslib\";\r\nimport { Als_GameData } from \"../../../common/GameData\";\r\nimport MoreGameItemView_Als from \"./MoreGameItemView\";\r\nimport ViewChangeManager_Als from \"../../../games/ViewChangeManager\";\r\nimport PlatformDY from \"../../../../PlatformDY\";\r\nimport { MiniManeger_Als } from \"../../../minigame/MiniManeger\";\r\nimport SuccessfulEntryThreeView_Als from \"../Als_PopView/SuccessfulEntryThreeView\";\r\nimport FailEntryTwoView_Als from \"../Als_PopView/SettlementVew/FailEntryTwoView\";\r\nvar MoreGameView_Als = (function (_super) {\r\n    tslib_1.__extends(MoreGameView_Als, _super);\r\n    function MoreGameView_Als() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className_key = \"MoreGameView\";\r\n        _this.ITEM_H = 200;\r\n        _this.isAuto = true;\r\n        _this.dataArr = [{ t: 0 }, { t: 1 }, { t: 2 }, { t: 3 }];\r\n        _this.speed = 2;\r\n        _this.dir = -1;\r\n        _this.skin = \"game/uiView/MoreGameView.json\";\r\n        return _this;\r\n    }\r\n    MoreGameView_Als.prototype.createChildren = function () {\r\n        _super.prototype.createChildren.call(this);\r\n    };\r\n    MoreGameView_Als.prototype.childrenCreated = function () {\r\n        _super.prototype.childrenCreated.call(this);\r\n    };\r\n    MoreGameView_Als.prototype.onAddStage = function () {\r\n        this.initView();\r\n        this.addEvent();\r\n        ViewChangeManager_Als.getInstance().hideCommonView();\r\n        MiniManeger_Als.instance.hideBanner();\r\n        MiniManeger_Als.instance.bFlagSpecialView = false;\r\n        ViewChangeManager_Als.getInstance().hideImageExitTemp();\r\n    };\r\n    MoreGameView_Als.prototype.onRemoved = function () {\r\n        this.removeEvent();\r\n        this.panel.removeChildren();\r\n        Laya.timer.clearAll(this);\r\n        ViewChangeManager_Als.getInstance().showImageExitTemp();\r\n    };\r\n    MoreGameView_Als.prototype.addEvent = function () {\r\n        this.panel.on(Laya.Event.MOUSE_DOWN, this, this.mouseDown);\r\n        this.panel.on(Laya.Event.MOUSE_MOVE, this, this.mouseMove);\r\n        this.panel.on(Laya.Event.MOUSE_UP, this, this.mouseUp);\r\n        Laya.stage.on(Laya.Event.MOUSE_UP, this, this.mouseUp);\r\n        this.image_back.on(Laya.Event.CLICK, this, this.onBack);\r\n    };\r\n    MoreGameView_Als.prototype.removeEvent = function () {\r\n        this.panel.off(Laya.Event.MOUSE_DOWN, this, this.mouseDown);\r\n        this.panel.off(Laya.Event.MOUSE_MOVE, this, this.mouseMove);\r\n        this.panel.off(Laya.Event.MOUSE_UP, this, this.mouseUp);\r\n        Laya.stage.off(Laya.Event.MOUSE_UP, this, this.mouseUp);\r\n        this.image_back.off(Laya.Event.CLICK, this, this.onBack);\r\n    };\r\n    MoreGameView_Als.prototype.onBack = function () {\r\n        if (!MoreGameView_Als.bSpeical) {\r\n            if (MoreGameView_Als.bSuccess) {\r\n                ViewManager.getInstance().showView(SuccessfulEntryThreeView_Als);\r\n            }\r\n            else {\r\n                ViewManager.getInstance().showView(FailEntryTwoView_Als);\r\n            }\r\n        }\r\n        this.removeSelf();\r\n        MiniManeger_Als.instance.bFlagSpecialView = true;\r\n        MoreGameView_Als.bSpeical = false;\r\n    };\r\n    MoreGameView_Als.prototype.mouseDown = function (e) {\r\n        this.isAuto = false;\r\n        this.stx = e.stageX;\r\n        this.sty = e.stageY;\r\n    };\r\n    MoreGameView_Als.prototype.mouseMove = function (e) {\r\n        var dy = e.stageY - this.sty;\r\n        for (var i = 0; i < this.panel.numChildren; i++) {\r\n            var item = this.panel.getChildAt(i);\r\n            item.y += dy;\r\n        }\r\n        this.sty = e.stageY;\r\n        this.dir = dy > 0 ? 1 : -1;\r\n        this.refresh();\r\n    };\r\n    MoreGameView_Als.prototype.mouseUp = function (e) {\r\n        this.isAuto = true;\r\n        this.dir = -1;\r\n    };\r\n    MoreGameView_Als.prototype.initView = function () {\r\n        Laya.timer.frameLoop(1, this, this.updata);\r\n        var canuseHeight = Laya.stage.height - 280;\r\n        this.maxCount = Math.ceil(canuseHeight / this.ITEM_H);\r\n        this.dataArr = Als_GameData.getInstance().weCatMiniIconsInfo;\r\n        console.log(Als_GameData.getInstance().weCatMiniIconsInfo);\r\n        this.initItem();\r\n        if (BaseConst.infos.gameInfo.isDY) {\r\n            PlatformDY.refreshGameList();\r\n        }\r\n    };\r\n    MoreGameView_Als.prototype.initItem = function () {\r\n        var didnex = 0;\r\n        for (var i = 0; i < this.maxCount + 1; i++) {\r\n            var item = new MoreGameItemView_Als();\r\n            item.index = didnex;\r\n            item.setData(this.dataArr[item.index]);\r\n            didnex++;\r\n            if (didnex >= this.dataArr.length) {\r\n                didnex = 0;\r\n            }\r\n            item.y = i * this.ITEM_H;\r\n            this.panel.addChild(item);\r\n        }\r\n    };\r\n    MoreGameView_Als.prototype.getUpIndexforCurIndex = function (index) {\r\n        if (index >= this.dataArr.length || index < 0)\r\n            return 0;\r\n        return index - 1 >= 0 ? index - 1 : this.dataArr.length - 1;\r\n    };\r\n    MoreGameView_Als.prototype.getDownIndexforCurIndex = function (index) {\r\n        if (index >= this.dataArr.length || index < 0)\r\n            return 0;\r\n        return index + 1 < this.dataArr.length ? index + 1 : 0;\r\n    };\r\n    MoreGameView_Als.prototype.updata = function (dt) {\r\n        if (!this.isAuto)\r\n            return;\r\n        for (var i = 0; i < this.panel.numChildren; i++) {\r\n            var item = this.panel.getChildAt(i);\r\n            item.y += this.speed * this.dir;\r\n        }\r\n        this.refresh();\r\n    };\r\n    MoreGameView_Als.prototype.refresh = function () {\r\n        var startItem;\r\n        var lastItem;\r\n        startItem = this.panel.getChildAt(0);\r\n        lastItem = this.panel.getChildAt(this.maxCount);\r\n        if (this.dir == -1) {\r\n            if (startItem.y < -this.ITEM_H) {\r\n                startItem.y = lastItem.y + lastItem.height;\r\n                startItem.zOrder = lastItem.zOrder + 1;\r\n                startItem.index = this.getDownIndexforCurIndex(lastItem.index);\r\n                startItem.refreshData(this.dataArr[startItem.index]);\r\n                console.log('idnex-=======>', startItem.index);\r\n            }\r\n        }\r\n        else {\r\n            if (lastItem.y > this.maxCount * this.ITEM_H) {\r\n                lastItem.y = startItem.y - startItem.height;\r\n                lastItem.zOrder = startItem.zOrder - 1;\r\n                lastItem.index = this.getUpIndexforCurIndex(startItem.index);\r\n                lastItem.refreshData(this.dataArr[lastItem.index]);\r\n            }\r\n        }\r\n    };\r\n    MoreGameView_Als.bSuccess = false;\r\n    MoreGameView_Als.bSpeical = false;\r\n    return MoreGameView_Als;\r\n}(BaseSceneUISkinPopView));\r\nexport default MoreGameView_Als;\r\n",
  "references": [
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/common/GameData.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/moregame/MoreGameItemView.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/games/ViewChangeManager.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/PlatformDY.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/minigame/MiniManeger.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/Als_PopView/SuccessfulEntryThreeView.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/Als_PopView/SettlementVew/FailEntryTwoView.ts"
  ]
}

{
  "code": "var AnimationManager_Als = (function () {\r\n    function AnimationManager_Als() {\r\n    }\r\n    Object.defineProperty(AnimationManager_Als, \"instance\", {\r\n        get: function () {\r\n            if (AnimationManager_Als.ins == null) {\r\n                AnimationManager_Als.ins = new AnimationManager_Als();\r\n            }\r\n            return AnimationManager_Als.ins;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AnimationManager_Als.prototype.getAtlasAnimation = function (url, fex) {\r\n        url = url + fex;\r\n        return new Promise(function (resolve) {\r\n            var roleAni = new Laya.Animation();\r\n            roleAni.loadAtlas(url, Laya.Handler.create(null, function () {\r\n                resolve(roleAni);\r\n            }));\r\n        });\r\n    };\r\n    AnimationManager_Als.prototype.scaleTween = function (target, caller, duration, complete, props, ease) {\r\n        if (duration === void 0) { duration = 500; }\r\n        target.visible = true;\r\n        target.scale(0.8, 0.8);\r\n        Laya.Tween.to(target, { scaleX: 1, scaleY: 1 }, duration, ease, Laya.Handler.create(caller, function () {\r\n            complete && complete();\r\n        }));\r\n    };\r\n    AnimationManager_Als.prototype.scaleBTween = function (target, caller, duration, complete, props, ease) {\r\n        if (duration === void 0) { duration = 500; }\r\n        target.scale(1.1, 1.1);\r\n        Laya.Tween.to(target, { scaleX: 1, scaleY: 1 }, duration, ease, Laya.Handler.create(caller, function () {\r\n            complete && complete();\r\n        }));\r\n    };\r\n    AnimationManager_Als.prototype.upToDownTween = function (target, props, duration, caller, ease, complete) {\r\n        Laya.Tween.to(target, props, duration, ease, Laya.Handler.create(caller, function () {\r\n            complete && complete();\r\n        }));\r\n    };\r\n    AnimationManager_Als.prototype.showSkeletonAnimation = function (url, callBack, aniMode) {\r\n        console.log(url);\r\n        var boomAnimation = new Laya.Skeleton();\r\n        boomAnimation.load(url, Laya.Handler.create(this, function () {\r\n            if (boomAnimation.player == null)\r\n                return;\r\n            boomAnimation.player.playbackRate = 1;\r\n            callBack && callBack(boomAnimation);\r\n        }), aniMode);\r\n    };\r\n    AnimationManager_Als.prototype.show2dBoonAnimation = function (url, dbBox, index, loop, rate, x, y, rotation) {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            var self = _this;\r\n            dbBox.removeChildren();\r\n            var boomAnimation = new Laya.Skeleton();\r\n            boomAnimation.load(url, Laya.Handler.create(self, function () {\r\n                if (!boomAnimation.player) {\r\n                    resolve();\r\n                    return;\r\n                }\r\n                boomAnimation.player.playbackRate = rate;\r\n                boomAnimation.player.once(Laya.Event.STOPPED, self, function () {\r\n                    resolve();\r\n                });\r\n                boomAnimation.scale(2, 2);\r\n                dbBox.addChild(boomAnimation);\r\n                boomAnimation.x = x;\r\n                boomAnimation.y = y;\r\n                boomAnimation.rotation = rotation;\r\n                boomAnimation.play(index, loop);\r\n            }));\r\n        });\r\n    };\r\n    AnimationManager_Als.prototype.displayTwinkle = function (target, prefix, caller) {\r\n        var index = 1;\r\n        Laya.timer.loop(500, caller, function () {\r\n            target.skin = prefix + index + \".png\";\r\n            index = index == 1 ? 2 : 1;\r\n        });\r\n    };\r\n    AnimationManager_Als.prototype.frameAni = function (target, prefix, caller, frameNum, time) {\r\n        if (time === void 0) { time = 100; }\r\n        var index = 1;\r\n        Laya.timer.loop(time, caller, function () {\r\n            target.skin = prefix + index + \".png\";\r\n            index++;\r\n            if (index > frameNum)\r\n                index = 1;\r\n        });\r\n    };\r\n    AnimationManager_Als.prototype.zoomTween = function (target, caller) {\r\n        var scaleDelta = 0;\r\n        Laya.timer.loop(20, caller, function () {\r\n            scaleDelta += 0.04;\r\n            var scaleVaule = Math.sin(scaleDelta) * 0.1 + 1;\r\n            target.scale(scaleVaule, scaleVaule);\r\n        });\r\n    };\r\n    AnimationManager_Als.prototype.zoomImgTween = function (target, caller) {\r\n        var scaleDelta = 0;\r\n        Laya.timer.loop(20, caller, function () {\r\n            scaleDelta += 0.04;\r\n            var scaleVaule = Math.sin(scaleDelta) * 0.02 + 1;\r\n            target.rotation += Math.sin(scaleDelta) * 0.02;\r\n            target.scale(scaleVaule, scaleVaule);\r\n        });\r\n    };\r\n    AnimationManager_Als.prototype.titleImgTween = function (target, caller) {\r\n        var scaleDelta = 0;\r\n        Laya.timer.loop(20, caller, function () {\r\n            scaleDelta += 0.04;\r\n            target.rotation += Math.sin(scaleDelta) * 0.2;\r\n        });\r\n    };\r\n    AnimationManager_Als.prototype.VTween = function (target, caller, ds) {\r\n        if (ds === void 0) { ds = 1; }\r\n        var xDelta = 0;\r\n        Laya.timer.loop(20, caller, function () {\r\n            xDelta += 0.04;\r\n            var xVaule = Math.sin(xDelta) * ds;\r\n            target.x += xVaule;\r\n        });\r\n    };\r\n    AnimationManager_Als.prototype.flaTween = function (target, caller) {\r\n        var alp = 0;\r\n        Laya.timer.loop(20, caller, function () {\r\n            alp += 0.04;\r\n            var alpVaule = Math.abs(Math.sin(alp) * 0.5) + 0.5;\r\n            target.alpha = alpVaule;\r\n        });\r\n    };\r\n    AnimationManager_Als.prototype.swingHeadTween = function (target, caller) {\r\n        var scaleDelta = 0;\r\n        var posY = target.y;\r\n        Laya.timer.loop(20, caller, function () {\r\n            scaleDelta += 0.04;\r\n            var scaleVaule = Math.sin(scaleDelta) * 6;\r\n            target.y = scaleVaule + posY;\r\n        });\r\n    };\r\n    AnimationManager_Als.prototype.swingBodyTween = function (target, caller) {\r\n        var scaleDelta = 0;\r\n        Laya.timer.loop(20, caller, function () {\r\n            scaleDelta += 0.04;\r\n            var scaleVaule = Math.sin(scaleDelta) * 0.05 + 1;\r\n            target.scale(scaleVaule, scaleVaule);\r\n        });\r\n    };\r\n    AnimationManager_Als.prototype.cardEnter = function (xs, target, caller, complete) {\r\n        var x = xs;\r\n        var wid = target.width;\r\n        var w = 0.6;\r\n        target.width = wid * w;\r\n        Laya.timer.loop(20, caller, function onLoop() {\r\n            w += 0.01;\r\n            target.width = wid * w;\r\n            target.x += 10;\r\n            if (target.x >= x) {\r\n                target.width = wid;\r\n                Laya.timer.clear(caller, onLoop);\r\n                complete && complete();\r\n            }\r\n        });\r\n    };\r\n    AnimationManager_Als.prototype.fallAni = function (target, caller, duration) {\r\n        var disY = 1920 - target.y;\r\n        var time = (duration / 20) + 1;\r\n        var vX = Math.random() * 10 - 5;\r\n        var vY = -Math.random() * 30;\r\n        var aY = (disY - vY * time) * 2 / (time * time);\r\n        var x = target.x;\r\n        var y = target.y;\r\n        var t = 0;\r\n        var r = 360 / time;\r\n        Laya.timer.loop(20, caller, function onLoop() {\r\n            vY += aY;\r\n            x += vX;\r\n            y += vY;\r\n            t += 20;\r\n            target.pos(x, y);\r\n            target.rotation += r;\r\n            if (t > duration) {\r\n                Laya.timer.clear(caller, onLoop);\r\n                target.destroy();\r\n            }\r\n        });\r\n    };\r\n    AnimationManager_Als.prototype.riseAni = function (target, caller, duration) {\r\n        var vY = -Math.random() * 2;\r\n        var t = 0;\r\n        var scaleDelta = 0;\r\n        Laya.timer.loop(20, caller, function onLoop() {\r\n            target.y += vY;\r\n            t += 20;\r\n            scaleDelta += 0.04;\r\n            var scaleVaule = Math.sin(scaleDelta) * 0.5 + 0.1;\r\n            target.scale(scaleVaule, scaleVaule);\r\n            if (t > duration) {\r\n                Laya.timer.clear(caller, onLoop);\r\n                target.destroy();\r\n            }\r\n        });\r\n    };\r\n    AnimationManager_Als.prototype.CardFly = function (target, startPoint, targetPoint, duration, caller, complete) {\r\n        var disX = targetPoint.x - startPoint.x;\r\n        var disY = targetPoint.y - startPoint.y;\r\n        var time = (duration / 30) + 1;\r\n        var vX = (disX / time);\r\n        var vY = -30;\r\n        var aY = (disY - vY * time) * 2 / (time * time);\r\n        var x = target.x;\r\n        var y = target.y;\r\n        var t = 0;\r\n        var r = 360 / time;\r\n        Laya.timer.loop(30, caller, function onLoop() {\r\n            vY += aY;\r\n            x += vX;\r\n            y += vY;\r\n            t += 30;\r\n            target.pos(x, y);\r\n            target.rotation += r;\r\n            if (t > duration) {\r\n                Laya.timer.clear(caller, onLoop);\r\n                complete && complete();\r\n            }\r\n        });\r\n    };\r\n    AnimationManager_Als.prototype.flayGlod = function (xSrc, ySrc, xObj, yObj) {\r\n        var _this = this;\r\n        var iTeme = 30;\r\n        var nCount = 10;\r\n        var goldArr = [];\r\n        for (var i = 0; i < nCount; i++) {\r\n            var goldImg = Laya.Pool.getItem(\"goods\");\r\n            if (!goldImg)\r\n                goldImg = new Laya.Image();\r\n            goldImg.skin = \"resource/assets/img/common/maininterface_icon_6.png\";\r\n            Laya.stage.addChild(goldImg);\r\n            goldImg.x = xSrc;\r\n            goldImg.y = ySrc;\r\n            goldArr.push(goldImg);\r\n        }\r\n        var _loop_1 = function (i) {\r\n            Laya.timer.once(i * iTeme, this_1, function () {\r\n                Laya.Tween.to(goldArr[i], { x: xObj, y: yObj }, 200, null, Laya.Handler.create(_this, function () {\r\n                    Laya.stage.removeChild(goldArr[i]);\r\n                    Laya.Pool.recover(\"goods\", goldArr[i]);\r\n                }));\r\n            });\r\n        };\r\n        var this_1 = this;\r\n        for (var i = 0; i < goldArr.length; i++) {\r\n            _loop_1(i);\r\n        }\r\n    };\r\n    AnimationManager_Als.prototype.zoomTweena = function (target, caller, scaleD) {\r\n        if (scaleD === void 0) { scaleD = 0.08; }\r\n        var scaleDelta = 0;\r\n        Laya.timer.loop(20, caller, function () {\r\n            scaleDelta += scaleD;\r\n            var scaleVaule = Math.sin(scaleDelta) * 0.1 + 1;\r\n            target.scale(scaleVaule, scaleVaule);\r\n        });\r\n    };\r\n    return AnimationManager_Als;\r\n}());\r\nexport default AnimationManager_Als;\r\n",
  "references": []
}

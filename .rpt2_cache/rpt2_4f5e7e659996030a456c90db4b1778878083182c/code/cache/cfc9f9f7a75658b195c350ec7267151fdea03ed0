{
  "code": "import * as tslib_1 from \"tslib\";\r\nimport { HttpMgr } from \"./script/base/net/HttpMgr\";\r\nimport Utils from \"./script/base/utils/Utils\";\r\nimport { Als_GameData } from \"./script/common/GameData\";\r\nimport { MoreGameIndex_Als } from \"./script/games/CommonDefine\";\r\nvar PlatformDY = (function () {\r\n    function PlatformDY() {\r\n    }\r\n    PlatformDY.prototype.getParams = function () {\r\n        var str = '';\r\n        if (DeviceUtil.isWXMiniGame()) {\r\n        }\r\n        else if (DeviceUtil.isQQMiniGame()) {\r\n        }\r\n        else if (DeviceUtil.isTTMiniGame()) {\r\n        }\r\n        return '';\r\n    };\r\n    PlatformDY.getTTOpenidAndAuthorzia = function (obj) {\r\n        var data = Utils.objToParams(obj);\r\n        return new Promise(function (resolve) {\r\n            HttpMgr.getInstance().sendHttpDY(PlatformDY.url + \"&act=userinfo\" + \"&\", obj, function (rev) {\r\n                var jsonRev = rev.data;\r\n                PlatformDY.openid = jsonRev.openid;\r\n                console.log(\"DY---> authorzia rev = \" + rev);\r\n                resolve(jsonRev);\r\n            }, null, \"get\");\r\n        });\r\n    };\r\n    PlatformDY.getOpenidAndAuthorzia = function (obj) {\r\n        return new Promise(function (resolve) {\r\n            HttpMgr.getInstance().sendHttpDY(PlatformDY.url + \"&act=userinfo&version=\" + PlatformDY.version + \"&\", obj, function (rev) {\r\n                var jsonRev = rev.data;\r\n                PlatformDY.openid = jsonRev.openid;\r\n                console.log(\"DY---> authorzia rev = \", rev);\r\n                resolve(jsonRev);\r\n            }, null, \"get\");\r\n        });\r\n    };\r\n    PlatformDY.startGame = function () {\r\n        return new Promise(function (resolve) {\r\n            HttpMgr.getInstance().sendHttpDY(PlatformDY.url + \"&act=index&version=\" + PlatformDY.version + \"&openid=\" + PlatformDY.openid + \"&\", null, function (rev) {\r\n                var jsonRev = rev.data;\r\n                console.log(\"DY---> startGame rev = \", rev);\r\n                PlatformDY.nGameID = jsonRev.id;\r\n                resolve(jsonRev);\r\n            }, null, \"get\");\r\n        });\r\n    };\r\n    PlatformDY.endGame = function (obj) {\r\n        return new Promise(function (resolve) {\r\n            HttpMgr.getInstance().sendHttpDY(PlatformDY.url + \"&act=end&version=\" + PlatformDY.version + \"&openid=\" + PlatformDY.openid + \"&\", obj, function (rev) {\r\n                var jsonRev = rev.data;\r\n                console.log(\"DY---> endGame rev = \", rev);\r\n                resolve(jsonRev);\r\n            }, null, \"get\");\r\n        });\r\n    };\r\n    PlatformDY.clickGame = function (id) {\r\n        HttpMgr.getInstance().sendHttpDY(PlatformDY.url + \"&act=game&version=\" + PlatformDY.version + \"&id=\" + id + \"&openid=\" + PlatformDY.openid, null, function (rev) {\r\n            console.log(\"DY---> clickGame rev = \", rev);\r\n        }, null, \"get\");\r\n    };\r\n    PlatformDY.toGame = function (id) {\r\n        HttpMgr.getInstance().sendHttpDY(PlatformDY.url + \"&act=cgame&version=\" + PlatformDY.version + \"&id=\" + id + \"&openid=\" + PlatformDY.openid, null, function (rev) {\r\n            console.log(\"DY---> toGame rev = \", rev);\r\n        }, null, \"get\");\r\n    };\r\n    PlatformDY.delSameFlag = function (arr) {\r\n        if (arr == null)\r\n            return null;\r\n        var len = arr.length;\r\n        var obj = {};\r\n        for (var i = 0; i < len; i++) {\r\n            obj[arr[i].id] = arr[i];\r\n        }\r\n        var newArr = [];\r\n        for (var id in obj) {\r\n            newArr.push(obj[id]);\r\n        }\r\n        return newArr;\r\n    };\r\n    PlatformDY.getGameList = function () {\r\n        return new Promise(function (resolve) {\r\n            var url = PlatformDY.url + \"&act=gamelist&version=\" + PlatformDY.version + \"&openid=\" + PlatformDY.openid + \"&v=\" + Math.random();\r\n            HttpMgr.getInstance().sendHttpDY(url, null, function (rev) {\r\n                console.log(\"DY---> getGameList rev = \", rev);\r\n                PlatformDY.bannerInfos = rev.data.banner;\r\n                PlatformDY.gameListInfos = PlatformDY.delSameFlag(rev.data.gamelist);\r\n                resolve(rev.data);\r\n            }, null, \"get\");\r\n        });\r\n    };\r\n    PlatformDY.initBoxView = function (adUnitId) {\r\n        PlatformDY.boxView = platform.createAppBox(adUnitId);\r\n        PlatformDY.boxView.load();\r\n        PlatformDY.boxView.onClose(PlatformDY.boxViewClose);\r\n    };\r\n    PlatformDY.boxViewClose = function () {\r\n        console.log(\"qq boxView close\");\r\n        if (PlatformDY.tempCloseBoxViewCallFunc) {\r\n            PlatformDY.tempCloseBoxViewCallFunc.apply(PlatformDY.tempCloseBoxViewCallObj, PlatformDY.tempCloseBoxViewCallParam);\r\n            PlatformDY.tempCloseBoxViewCallFunc = null;\r\n        }\r\n    };\r\n    PlatformDY.refreshGameList = function () {\r\n        PlatformDY.getGameList().then(function () {\r\n            Als_GameData.getInstance().weCatMiniIconsInfo = [];\r\n            var nLen = 0;\r\n            if (PlatformDY.gameListInfos)\r\n                nLen = PlatformDY.gameListInfos.length;\r\n            for (var i = 0; i < nLen; ++i) {\r\n                var stData = new MoreGameIndex_Als();\r\n                stData.ad_id = PlatformDY.gameListInfos[i].id;\r\n                stData.ad_img = PlatformDY.gameListInfos[i].img;\r\n                stData.name = PlatformDY.gameListInfos[i].title;\r\n                stData.ad_appid = PlatformDY.gameListInfos[i].appid;\r\n                stData.url = PlatformDY.gameListInfos[i].url;\r\n                Als_GameData.getInstance().weCatMiniIconsInfo.push(stData);\r\n            }\r\n            console.log(\"GameData.getInstance().weCatMiniIconsInfo = \", Als_GameData.getInstance().weCatMiniIconsInfo);\r\n        });\r\n    };\r\n    PlatformDY.showBoxView = function () {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n            return tslib_1.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!PlatformDY.boxView) {\r\n                            console.error(\"boxView not init!!!!!!!!!\");\r\n                        }\r\n                        return [4, PlatformDY.boxView.show()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PlatformDY.url = \"\";\r\n    PlatformDY.qqUrl = \"\";\r\n    PlatformDY.ttUrl = \"\";\r\n    PlatformDY.version = 1;\r\n    PlatformDY.miniProgramList = [];\r\n    PlatformDY.qqMiniProgramList = [];\r\n    PlatformDY.ttMiniProgramList = [];\r\n    PlatformDY.nGameID = 0;\r\n    PlatformDY.gameListInfos = null;\r\n    return PlatformDY;\r\n}());\r\nexport default PlatformDY;\r\nvar DYAuthorzia_Cmd = (function () {\r\n    function DYAuthorzia_Cmd() {\r\n    }\r\n    return DYAuthorzia_Cmd;\r\n}());\r\nexport { DYAuthorzia_Cmd };\r\nvar DYAuthorzia_Rev = (function () {\r\n    function DYAuthorzia_Rev() {\r\n    }\r\n    return DYAuthorzia_Rev;\r\n}());\r\nexport { DYAuthorzia_Rev };\r\nvar DYEndGame_Cmd = (function () {\r\n    function DYEndGame_Cmd() {\r\n    }\r\n    return DYEndGame_Cmd;\r\n}());\r\nexport { DYEndGame_Cmd };\r\nvar DYGameListItem = (function () {\r\n    function DYGameListItem() {\r\n    }\r\n    return DYGameListItem;\r\n}());\r\nexport { DYGameListItem };\r\n",
  "references": [
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/base/net/HttpMgr.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/base/utils/Utils.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/common/GameData.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/games/CommonDefine.ts"
  ]
}

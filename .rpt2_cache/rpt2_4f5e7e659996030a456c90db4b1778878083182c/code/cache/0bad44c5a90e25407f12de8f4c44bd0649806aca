{
  "code": "import * as tslib_1 from \"tslib\";\r\nimport { Als_GameData } from \"../../common/GameData\";\r\nimport PlatformDY from \"../../../PlatformDY\";\r\nimport ViewChangeManager_Als from \"../../games/ViewChangeManager\";\r\nimport { MiniManeger_Als } from \"../../minigame/MiniManeger\";\r\nimport ConfigManager_Als from \"../../games/ConfigManager\";\r\nimport { PlayerDataManager_Als } from \"../../common/GameDataManager\";\r\nimport { GoodsType, EnterGameType } from \"../../games/CommonDefine\";\r\nimport GameStateManager_Als from \"../../games/GameStateManager\";\r\nimport { LevelManager_Als } from \"../../manager/LevelManager\";\r\nimport WeCatMoreGameItemOne713Big_Als from \"./WeCatMoreGameItemOne713Big\";\r\nimport MoreGameView_Als from \"./moregame/MoreGameView\";\r\nimport WeCatMoreGameView_Als from \"./WeCatMoreGameView\";\r\nimport FailEntryTwoView_Als from \"./Als_PopView/SettlementVew/FailEntryTwoView\";\r\nimport SuccessfulEntryThreeView_Als from \"./Als_PopView/SuccessfulEntryThreeView\";\r\nimport SuccessfulEntryOneView_Als from \"./Als_PopView/SuccessfulEntryOneView\";\r\nimport { GameManager_Als } from \"../../manager/GameManager\";\r\nimport GameCenterManager_Als from \"../../manager/GameCenterManager\";\r\nvar MoreGameOperRequestTwo_Als = (function (_super) {\r\n    tslib_1.__extends(MoreGameOperRequestTwo_Als, _super);\r\n    function MoreGameOperRequestTwo_Als() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className_key = \"MoreGameOperRequestTwo\";\r\n        _this.bContinue = false;\r\n        _this.nStartY = 0;\r\n        _this.skin = \"game/uiView/MoreGameOperRequestTwo.json\";\r\n        _this.nRandomIndxe = 0;\r\n        _this.aryCatMiniIconsInfoTemp = [];\r\n        _this.nOpenNum = 0;\r\n        return _this;\r\n    }\r\n    MoreGameOperRequestTwo_Als.prototype.childrenCreated = function () {\r\n        _super.prototype.childrenCreated.call(this);\r\n        this.panel_gamelist.height = Laya.stage.height - (1920 - 1640);\r\n        this.initView();\r\n        this.addEvent();\r\n    };\r\n    MoreGameOperRequestTwo_Als.prototype.onAddStage = function () {\r\n        var _this = this;\r\n        _super.prototype.onAddStage.call(this);\r\n        this.nOpenNum += 1;\r\n        MiniManeger_Als.instance.hideBanner();\r\n        if (this.isCreate) {\r\n            this.initView();\r\n            this.addEvent();\r\n            this.imageBtReturn.visible = false;\r\n            Laya.timer.once(3000, this, function () {\r\n                _this.imageBtReturn.visible = true;\r\n            });\r\n            MoreGameOperRequestTwo_Als.isOpen = true;\r\n        }\r\n        if ((this.nOpenNum >= 2 || !PlayerDataManager_Als.getInstance().bIsNewPlayer) && BaseConst.infos.gameInfo.openPsAward == 1) {\r\n            this.timerChangerImage();\r\n        }\r\n        else {\r\n            this.changeImage();\r\n        }\r\n        if (BaseConst.infos.gameInfo.spbt == 0) {\r\n            this.imageBtReturn.visible = false;\r\n        }\r\n        MiniManeger_Als.instance.bFlagSpecialView = false;\r\n    };\r\n    MoreGameOperRequestTwo_Als.prototype.timerChangerImage = function () {\r\n        this.imageBtConGame.skin = \"resource/assets/img/wecat/box_button_2.png\";\r\n        this.bContinue = false;\r\n        Laya.timer.clear(this, this.changeImage);\r\n        Laya.timer.once(5000, this, this.changeImage);\r\n    };\r\n    MoreGameOperRequestTwo_Als.prototype.changeImage = function () {\r\n        this.imageBtConGame.skin = \"resource/assets/img/wecat/box_button_3.png\";\r\n        this.bContinue = true;\r\n    };\r\n    MoreGameOperRequestTwo_Als.prototype.onSpeical_als = function () {\r\n        if (this.bContinue) {\r\n            this.onClickOper_als();\r\n        }\r\n        else {\r\n            this.goToGame_als();\r\n        }\r\n    };\r\n    MoreGameOperRequestTwo_Als.prototype.onRemoved = function () {\r\n        _super.prototype.onRemoved.call(this);\r\n        this.removeEvent();\r\n        MoreGameOperRequestTwo_Als.isOpen = false;\r\n    };\r\n    MoreGameOperRequestTwo_Als.prototype.addEvent = function () {\r\n        this.imageBtReturn.on(Laya.Event.CLICK, this, this.onBackTemp);\r\n        this.imageBtConGame.on(Laya.Event.CLICK, this, this.onSpeical_als);\r\n        this.panel_gamelist.on(Laya.Event.MOUSE_DOWN, this, this.mousedown_als);\r\n    };\r\n    MoreGameOperRequestTwo_Als.prototype.mousedown_als = function (evt) {\r\n        this.nStartY = evt.currentTarget.mouseY;\r\n        var self = this;\r\n        function mouseMove(evt1) {\r\n            var nYTemp = self.nStartY - evt1.currentTarget.mouseY;\r\n            self.moreGamePanel.y -= nYTemp;\r\n            self.moreGamePanel2.y -= nYTemp;\r\n            self.nStartY = evt1.currentTarget.mouseY;\r\n            if (self.moreGamePanel.y >= 0 && self.moreGamePanel2.y >= 0) {\r\n                self.moreGamePanel.y = 0;\r\n                self.moreGamePanel2.y = self.moreGamePanel.height;\r\n            }\r\n        }\r\n        function mouseUp(evt1) {\r\n            this.panel_gamelist.off(Laya.Event.MOUSE_MOVE, this, mouseMove);\r\n            this.panel_gamelist.off(Laya.Event.MOUSE_UP, this, mouseUp);\r\n        }\r\n        this.panel_gamelist.on(Laya.Event.MOUSE_MOVE, this, mouseMove);\r\n        this.panel_gamelist.on(Laya.Event.MOUSE_UP, this, mouseUp);\r\n    };\r\n    MoreGameOperRequestTwo_Als.prototype.removeEvent = function () {\r\n        this.imageBtReturn.off(Laya.Event.CLICK, this, this.onBackTemp);\r\n        this.imageBtConGame.off(Laya.Event.CLICK, this, this.onSpeical_als);\r\n    };\r\n    MoreGameOperRequestTwo_Als.prototype.initPanel = function () {\r\n    };\r\n    MoreGameOperRequestTwo_Als.prototype.initView = function () {\r\n        Laya.timer.clear(this, this.onMove);\r\n        this.aryCatMiniIconsInfoTemp = [];\r\n        this.aryCatMiniIconsInfoTemp = Als_GameData.getInstance().weCatMiniIconsInfo;\r\n        ViewChangeManager_Als.getInstance().hideCommonView();\r\n        this.initPanel();\r\n        var nXStart = 0;\r\n        var nYStart = 0;\r\n        var nCount = 2;\r\n        var aryInfo = [];\r\n        aryInfo = GameCenterManager_Als.getInstance().getRandomIndex(18);\r\n        var func = function (pannel) {\r\n            for (var i = 0; i < aryInfo.length; ++i) {\r\n                var pWeCatMoreGameItemOne = pannel.getChildAt(i);\r\n                if (pWeCatMoreGameItemOne) {\r\n                    pWeCatMoreGameItemOne.setData(aryInfo[i]);\r\n                }\r\n                else {\r\n                    pWeCatMoreGameItemOne = new WeCatMoreGameItemOne713Big_Als(aryInfo[i]);\r\n                    var nAddX = Math.floor(i % nCount);\r\n                    var nYAdd = Math.floor(i / nCount);\r\n                    pWeCatMoreGameItemOne.x = nXStart + pWeCatMoreGameItemOne.width * nAddX + 30 * nAddX;\r\n                    pWeCatMoreGameItemOne.y = nYStart + pWeCatMoreGameItemOne.height * nYAdd + 10 * nYAdd;\r\n                    pannel.addChild(pWeCatMoreGameItemOne);\r\n                    pannel.height = pWeCatMoreGameItemOne.y + pWeCatMoreGameItemOne.height;\r\n                }\r\n            }\r\n        };\r\n        func(this.moreGamePanel);\r\n        this.moreGamePanel2.y = this.moreGamePanel.height;\r\n        this.moreGamePanel2.removeChildren();\r\n        func(this.moreGamePanel2);\r\n        if (BaseConst.infos.gameInfo.isDY) {\r\n            PlatformDY.refreshGameList();\r\n        }\r\n        Laya.timer.frameLoop(1, this, this.onMove);\r\n    };\r\n    MoreGameOperRequestTwo_Als.prototype.onMove = function () {\r\n        var nHight = this.moreGamePanel.height;\r\n        this.moreGamePanel2.y -= 2;\r\n        this.moreGamePanel.y -= 2;\r\n        if (this.moreGamePanel.y <= -nHight) {\r\n            this.moreGamePanel.y = this.moreGamePanel2.y + nHight;\r\n        }\r\n        if (this.moreGamePanel2.y <= -nHight) {\r\n            this.moreGamePanel2.y = this.moreGamePanel.y + nHight;\r\n        }\r\n    };\r\n    MoreGameOperRequestTwo_Als.prototype.onBackTemp = function () {\r\n        MoreGameView_Als.bSpeical = true;\r\n        ViewManager.getInstance().showView(MoreGameView_Als);\r\n    };\r\n    MoreGameOperRequestTwo_Als.prototype.onBack = function () {\r\n        this.onClickOper_als();\r\n    };\r\n    MoreGameOperRequestTwo_Als.prototype.goToGame_als = function () {\r\n        GameCenterManager_Als.getInstance().toGameRandom();\r\n    };\r\n    MoreGameOperRequestTwo_Als.prototype.onClickOper_als = function () {\r\n        MiniManeger_Als.instance.bFlagSpecialView = true;\r\n        if (PlayerDataManager_Als.bGlobEnterGame) {\r\n            ViewManager.getInstance().showView(WeCatMoreGameView_Als);\r\n        }\r\n        else {\r\n            if (MoreGameOperRequestTwo_Als.bGotoNextGame) {\r\n                var nSpCost = 1;\r\n                var stGameConfig = ConfigManager_Als.getInstance().getGameConfigDataByID(8);\r\n                if (stGameConfig) {\r\n                    nSpCost = parseInt(stGameConfig.strValue);\r\n                }\r\n                var b = PlayerDataManager_Als.getInstance().CheckGoods(GoodsType.enum_GoodsType_Sp, nSpCost);\r\n                if (!b) {\r\n                    GameManager_Als.instance.powerIsEnough();\r\n                    return;\r\n                }\r\n                PlayerDataManager_Als.getInstance().subGoods(GoodsType.enum_GoodsType_Sp, nSpCost);\r\n                if (PlayerDataManager_Als.getInstance().getCurLevel() >= BaseConst.infos.gameInfo.splevel\r\n                    && BaseConst.infos.gameInfo.openPsAward == 1) {\r\n                    PlayerDataManager_Als.getInstance().bEnterGameFromGameHome = false;\r\n                    ViewManager.getInstance().showView(SuccessfulEntryOneView_Als);\r\n                }\r\n                else {\r\n                    ViewChangeManager_Als.getInstance().goToNextLevel();\r\n                }\r\n            }\r\n            else {\r\n                if (MoreGameOperRequestTwo_Als.bOperFlag) {\r\n                    if (MoreGameOperRequestTwo_Als.bSuccess) {\r\n                        if (BaseConst.infos.gameInfo.openPsAward == 1\r\n                            && PlayerDataManager_Als.getInstance().getCurLevel() >= BaseConst.infos.gameInfo.splevel) {\r\n                            ViewManager.getInstance().showView(SuccessfulEntryOneView_Als);\r\n                        }\r\n                        else {\r\n                            ViewManager.getInstance().showView(SuccessfulEntryThreeView_Als);\r\n                        }\r\n                    }\r\n                    else {\r\n                        ViewManager.getInstance().showView(FailEntryTwoView_Als);\r\n                    }\r\n                }\r\n            }\r\n            if (MoreGameOperRequestTwo_Als.toHome) {\r\n                ViewChangeManager_Als.getInstance().CurLevelBase.closeGameView();\r\n                PlayerDataManager_Als.getInstance().setCurLevel(PlayerDataManager_Als.getInstance().getCurLevelMax());\r\n                GameStateManager_Als.getInstance().levelState = EnterGameType.enum_EnterGameType_GameHome;\r\n                LevelManager_Als.getInstance().createLevelScene(PlayerDataManager_Als.getInstance().getCurLevelToChallenge());\r\n            }\r\n            if (MoreGameOperRequestTwo_Als.bReStartGame) {\r\n                PlayerDataManager_Als.getInstance().subGoods(GoodsType.enum_GoodsType_Sp, 1);\r\n                ViewChangeManager_Als.getInstance().restartGame(true);\r\n            }\r\n        }\r\n        this.removeSelf();\r\n        Laya.timer.clearAll(this);\r\n        MiniManeger_Als.instance.showBannerAd();\r\n        MoreGameOperRequestTwo_Als.bOperFlag = false;\r\n        MoreGameOperRequestTwo_Als.bSuccess = false;\r\n        MoreGameOperRequestTwo_Als.bGotoNextGame = false;\r\n        MoreGameOperRequestTwo_Als.toHome = false;\r\n        ViewChangeManager_Als.getInstance().showCommonView();\r\n    };\r\n    MoreGameOperRequestTwo_Als.bOperFlag = false;\r\n    MoreGameOperRequestTwo_Als.bSuccess = false;\r\n    MoreGameOperRequestTwo_Als.toHome = false;\r\n    MoreGameOperRequestTwo_Als.bGotoNextGame = false;\r\n    MoreGameOperRequestTwo_Als.bReStartGame = false;\r\n    MoreGameOperRequestTwo_Als.isOpen = false;\r\n    return MoreGameOperRequestTwo_Als;\r\n}(BaseSceneUISkinPopView));\r\nexport default MoreGameOperRequestTwo_Als;\r\n",
  "references": [
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/common/GameData.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/MoreGameOperReqIndex.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/PlatformDY.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/games/ViewChangeManager.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/minigame/MiniManeger.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/games/ConfigManager.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/common/GameDataManager.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/games/CommonDefine.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/Als_PopView/AddPsView.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/games/GameStateManager.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/manager/LevelManager.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/GuessLike.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/WeCatMoreGameItemOne713Big.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/moregame/MoreGameView.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/MoreGameOperRequestTemp.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/WeCatMoreGameView.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/Als_PopView/SettlementVew/FailEntryTwoView.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/Als_PopView/SuccessfulEntryThreeView.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/Als_PopView/SuccessfulEntryOneView.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/manager/GameManager.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/manager/GameCenterManager.ts"
  ]
}

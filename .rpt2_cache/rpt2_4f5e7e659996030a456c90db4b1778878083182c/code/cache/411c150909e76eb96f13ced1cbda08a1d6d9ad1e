{
  "code": "import * as tslib_1 from \"tslib\";\r\nimport { MiniManeger_Als } from \"../../../minigame/MiniManeger\";\r\nimport Als_SoundManager from \"../../../common/SoundManager\";\r\nimport MoreGameOperRequest_Als from \"../MoreGameOperRequest\";\r\nimport SuccessfulEntryThreeView_Als from \"./SuccessfulEntryThreeView\";\r\nimport ViewChangeManager_Als from \"../../../games/ViewChangeManager\";\r\nimport { PlayerDataManager_Als } from \"../../../common/GameDataManager\";\r\nimport { GoodsType } from \"../../../games/CommonDefine\";\r\nimport MoreGameOperRequestTwo_Als from \"../MoreGameOperRequestTwo\";\r\nimport AnimationManager_Als from \"../../../manager/AnimationManager\";\r\nimport { Als_GameData } from \"../../../common/GameData\";\r\nimport PlatformDY from \"../../../../PlatformDY\";\r\nimport WeCatMoreGameItemOne_Als from \"../WeCatMoreGameItemOne\";\r\nimport { PopBaseScene } from \"../../base/PopBaseScene\";\r\nvar SuccessfulEntryOneViewTwo_Als = (function (_super) {\r\n    tslib_1.__extends(SuccessfulEntryOneViewTwo_Als, _super);\r\n    function SuccessfulEntryOneViewTwo_Als() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className_key = \"SuccessfulEntryOneViewTwo\";\r\n        _this.showEnterType = BasePopAnimationEnterType.SCALE_MODE_BACK;\r\n        _this.scrollSizeMax = 50;\r\n        _this.nTimePanel = 5000;\r\n        _this.skin = \"game/uiView/SuccessfulEntryOneViewTwo.json\";\r\n        _this.bRecvAward = false;\r\n        return _this;\r\n    }\r\n    SuccessfulEntryOneViewTwo_Als.prototype.childrenCreated = function () {\r\n        _super.prototype.childrenCreated.call(this);\r\n        this.grp_center.width = this.width;\r\n        this.grp_center.height = this.height;\r\n    };\r\n    SuccessfulEntryOneViewTwo_Als.prototype.onAddStage = function () {\r\n        MiniManeger_Als.instance.showBannerAd();\r\n        this.initView();\r\n        this.addEvent();\r\n    };\r\n    SuccessfulEntryOneViewTwo_Als.prototype.onRemoved = function () {\r\n        _super.prototype.onRemoved.call(this);\r\n        this.removeEvent();\r\n        if (this.aniReal) {\r\n            this.aniReal.stop();\r\n        }\r\n    };\r\n    SuccessfulEntryOneViewTwo_Als.prototype.initMiniGame = function () {\r\n        this.img_back.visible = true;\r\n        this.imageWeCatMoreGame.visible = true;\r\n    };\r\n    SuccessfulEntryOneViewTwo_Als.prototype.initView = function () {\r\n        var _this = this;\r\n        this.initPanel();\r\n        this.proceMoreGame();\r\n        this.bRecvAward = false;\r\n        this.btLable.visible = false;\r\n        Laya.timer.once(3000, this, function () {\r\n            _this.btLable.visible = true;\r\n        });\r\n        this.startGameAni();\r\n    };\r\n    SuccessfulEntryOneViewTwo_Als.prototype.onMousClck_Als = function (evt) {\r\n        Als_SoundManager.getInstance().playEffect(\"button\", 1);\r\n        switch (evt.currentTarget) {\r\n            case this.btLable:\r\n                this.onNoThinks();\r\n                break;\r\n            case this.imageBtSign:\r\n                this.onWatchVideoRecvAward();\r\n                break;\r\n            case this.img_back:\r\n                this.onBack();\r\n                break;\r\n            case this.panelWeCatMoreGame:\r\n                this.onShowMoreGame();\r\n                break;\r\n        }\r\n    };\r\n    SuccessfulEntryOneViewTwo_Als.prototype.addEvent = function () {\r\n        this.registerEvent(this.btLable, Laya.Event.CLICK, this.onMousClck_Als, this);\r\n        this.registerEvent(this.imageBtSign, Laya.Event.CLICK, this.onMousClck_Als, this);\r\n        this.registerEvent(this.img_back, Laya.Event.CLICK, this.onMousClck_Als, this);\r\n    };\r\n    SuccessfulEntryOneViewTwo_Als.prototype.onBack = function () {\r\n        MoreGameOperRequestTwo_Als.bOperFlag = true;\r\n        MoreGameOperRequestTwo_Als.bSuccess = true;\r\n        ViewManager.getInstance().showView(MoreGameOperRequestTwo_Als);\r\n        this.removeSelf();\r\n    };\r\n    SuccessfulEntryOneViewTwo_Als.prototype.onNoThinks = function () {\r\n        MoreGameOperRequest_Als.bOperFlag = true;\r\n        MoreGameOperRequest_Als.bSuccess = true;\r\n        ViewManager.getInstance().showView(MoreGameOperRequest_Als);\r\n        this.removeSelf();\r\n    };\r\n    SuccessfulEntryOneViewTwo_Als.prototype.onWatchVideoRecvAward = function () {\r\n        var _this = this;\r\n        var self = this;\r\n        if (ViewChangeManager_Als.getInstance().CurLevelBase) {\r\n            ViewChangeManager_Als.getInstance().CurLevelBase.levelOnHide();\r\n        }\r\n        MiniManeger_Als.instance.playViderAd({\r\n            successFun: function () {\r\n                Laya.timer.once(100, self, function () {\r\n                    if (ViewChangeManager_Als.getInstance().CurLevelBase) {\r\n                        ViewChangeManager_Als.getInstance().CurLevelBase.levelOnShow();\r\n                    }\r\n                });\r\n                PlayerDataManager_Als.getInstance().AddGoods(GoodsType.enum_GoodsType_Sp, 2);\r\n                PlayerDataManager_Als.getInstance().addWatchVideoAddSpTime();\r\n                ViewManager.getInstance().showView(SuccessfulEntryThreeView_Als);\r\n                _this.removeSelf();\r\n            }\r\n        });\r\n    };\r\n    SuccessfulEntryOneViewTwo_Als.prototype.startGameAni = function () {\r\n        Laya.timer.clearAll(this.imageBtSign);\r\n        AnimationManager_Als.instance.zoomTween(this.imageBtSign, this.imageBtSign);\r\n    };\r\n    SuccessfulEntryOneViewTwo_Als.prototype.createSkeleton = function (url) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return tslib_1.__generator(this, function (_a) {\r\n                return [2, new Promise(function (resolve) {\r\n                        AnimationManager_Als.instance.showSkeletonAnimation(url, function (boomAnimation) {\r\n                            _this.aniReal = boomAnimation;\r\n                            _this.aniReal.player.playbackRate = 1;\r\n                            _this.aniReal.autoSize = true;\r\n                            _this.aniReal.scale(1, 1);\r\n                            _this.aniReal.play(0, true);\r\n                            _this.aniReal.x = _this.aniReal.width + 400;\r\n                            _this.aniReal.y = _this.aniReal.height / 2;\r\n                            _this.boxAni.addChild(_this.aniReal);\r\n                            resolve(boomAnimation);\r\n                        }, 0);\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    SuccessfulEntryOneViewTwo_Als.prototype.proceMoreGame = function () {\r\n        this.refreshWeCatMoreGame();\r\n        this.imageWeCatMoreGame.visible = true;\r\n    };\r\n    SuccessfulEntryOneViewTwo_Als.prototype.refreshWeCatMoreGame = function () {\r\n        this.panelWeCatMoreGame;\r\n        var nXStart = 5;\r\n        var nXAddTemp = 150;\r\n        var nYAddTemp = 180;\r\n        var nYStart = 5;\r\n        var aryInfo = [];\r\n        var nCount = 3;\r\n        aryInfo = this.getRandomIndex();\r\n        var nLen = 6;\r\n        nLen = nLen >= aryInfo.length ? aryInfo.length : nLen;\r\n        for (var i = 0; i < nLen; ++i) {\r\n            var pWeCatMoreGameItemOne = this.panelWeCatMoreGame.getChildAt(i);\r\n            if (pWeCatMoreGameItemOne) {\r\n                pWeCatMoreGameItemOne.setData(aryInfo[i]);\r\n            }\r\n            else {\r\n                pWeCatMoreGameItemOne = new WeCatMoreGameItemOne_Als(aryInfo[i]);\r\n                var nAddX = Math.floor(i % nCount);\r\n                var nYAdd = Math.floor(i / nCount);\r\n                pWeCatMoreGameItemOne.x = nXStart + pWeCatMoreGameItemOne.width * nAddX + 10 * nAddX;\r\n                pWeCatMoreGameItemOne.y = nYStart + pWeCatMoreGameItemOne.height * nYAdd + 10 * nYAdd;\r\n                this.panelWeCatMoreGame.addChild(pWeCatMoreGameItemOne);\r\n                this.scrollSizeMax = 180 * (nYAdd + 1);\r\n                this.nTimePanel = (nYAdd + 1) * 1000;\r\n            }\r\n        }\r\n        if (BaseConst.infos.gameInfo.isDY && DeviceUtil.isWXMiniGame()) {\r\n            PlatformDY.refreshGameList();\r\n        }\r\n    };\r\n    SuccessfulEntryOneViewTwo_Als.prototype.getRandomIndex = function () {\r\n        if (Als_GameData.getInstance().weCatMiniIconsInfo.length - 1 < 0) {\r\n            return [];\r\n        }\r\n        var nRandom = Utils.random(0, Als_GameData.getInstance().weCatMiniIconsInfo.length - 1);\r\n        var nCount = Als_GameData.getInstance().weCatMiniIconsInfo.length % 3;\r\n        if (nCount > 0) {\r\n            nCount = 3 - nCount;\r\n        }\r\n        nCount = Als_GameData.getInstance().weCatMiniIconsInfo.length + nCount;\r\n        var aryInfo = [];\r\n        for (var i = 0; i < nCount; ++i) {\r\n            aryInfo.push(nRandom);\r\n            nRandom += 1;\r\n            if (nRandom >= Als_GameData.getInstance().weCatMiniIconsInfo.length) {\r\n                nRandom = 0;\r\n            }\r\n        }\r\n        return aryInfo;\r\n    };\r\n    SuccessfulEntryOneViewTwo_Als.prototype.onShowMoreGame = function () {\r\n        MiniManeger_Als.instance.showMoreGamesModal();\r\n    };\r\n    SuccessfulEntryOneViewTwo_Als.prototype.panelScrollAni = function () {\r\n        var _this = this;\r\n        Laya.Tween.clearAll(this.panelWeCatMoreGame.vScrollBar);\r\n        Laya.timer.clearAll(this.panelScrollAni);\r\n        Laya.Tween.to(this.panelWeCatMoreGame.vScrollBar, { value: this.scrollSizeMax }, this.nTimePanel, null, Laya.Handler.create(this, function (args) {\r\n            Laya.Tween.to(_this.panelWeCatMoreGame.vScrollBar, { value: 0 }, _this.nTimePanel, null, Laya.Handler.create(_this, function (args) {\r\n                _this.scrollSizeMax = _this.panelWeCatMoreGame.vScrollBar.max;\r\n                Laya.timer.once(0, _this, _this.panelScrollAni);\r\n            }));\r\n        }));\r\n    };\r\n    SuccessfulEntryOneViewTwo_Als.prototype.initPanel = function () {\r\n        if (!DeviceUtil.isWXMiniGame()) {\r\n            this.panelWeCatMoreGame.vScrollBarSkin = \"\";\r\n            this.panelWeCatMoreGame.elasticEnabled = true;\r\n            this.panelWeCatMoreGame.vScrollBar.elasticDistance = 200;\r\n            this.panelWeCatMoreGame.vScrollBar.elasticBackTime = 100;\r\n        }\r\n    };\r\n    return SuccessfulEntryOneViewTwo_Als;\r\n}(PopBaseScene));\r\nexport default SuccessfulEntryOneViewTwo_Als;\r\n",
  "references": [
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/minigame/MiniManeger.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/common/SoundManager.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/MoreGameOperRequest.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/Als_PopView/SuccessfulEntryThreeView.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/games/ViewChangeManager.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/common/GameDataManager.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/games/CommonDefine.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/MoreGameOperRequestTwo.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/manager/AnimationManager.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/common/GameData.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/PlatformDY.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/game/WeCatMoreGameItemOne.ts",
    "E:/laya/project/laya_girl_ts_wecat_git/src/script/views/base/PopBaseScene.ts"
  ]
}
